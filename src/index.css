@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   CSS CUSTOM PROPERTIES FOR THEMING
   ======================================== */
:root {
  --color-canvas: #ffffff;
  --color-surface: #f8fafc;
  --color-surface-raised: #f1f5f9;
  --color-border: #e2e8f0;
  --color-border-muted: #f1f5f9;
  --color-text-primary: #111827;
  --color-text-secondary: #4b5563;
  --color-text-tertiary: #6b7280;
  --color-text-muted: #9ca3af;
  --color-accent: #2563eb;
  --color-accent-subtle: #eff6ff;
  --color-scrollbar-track: #f1f5f9;
  --color-scrollbar-thumb: #cbd5e1;
  --color-scrollbar-hover: #94a3b8;
}

.dark {
  --color-canvas: #0d1117;
  --color-surface: #161b22;
  --color-surface-raised: #1c2128;
  --color-border: #30363d;
  --color-border-muted: #21262d;
  --color-text-primary: #e6edf3;
  --color-text-secondary: #8b949e;
  --color-text-tertiary: #6e7681;
  --color-text-muted: #484f58;
  --color-accent: #58a6ff;
  --color-accent-subtle: #161b22;
  --color-scrollbar-track: #161b22;
  --color-scrollbar-thumb: #30363d;
  --color-scrollbar-hover: #484f58;
  color-scheme: dark;
}

/* Custom scrollbar styles */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-scrollbar-track);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: var(--color-scrollbar-thumb);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-scrollbar-hover);
}

/* ========================================
   COMPONENT LAYER - LIGHT + DARK
   ======================================== */
@layer components {
  /* Card styles */
  .card {
    @apply bg-white rounded-lg shadow-card border border-surface-200 p-4;
  }

  .dark .card {
    @apply bg-gh-surface shadow-dark-card border-gh-border;
  }

  .card-hover {
    @apply card transition-shadow duration-200 hover:shadow-card-hover;
  }

  /* Button styles */
  .btn {
    @apply inline-flex items-center justify-center px-4 py-2 rounded-md font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
  }

  .dark .btn {
    @apply focus:ring-offset-gh-canvas;
  }

  .btn-primary {
    @apply btn bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500;
  }

  .dark .btn-primary {
    @apply bg-gh-blue-strong hover:bg-blue-700;
  }

  .btn-secondary {
    @apply btn bg-surface-100 text-gray-700 hover:bg-surface-200 focus:ring-primary-500;
  }

  .dark .btn-secondary {
    @apply bg-gh-overlay text-gh-text hover:bg-gh-border;
  }

  .btn-danger {
    @apply btn bg-red-600 text-white hover:bg-red-700 focus:ring-red-500;
  }

  .btn-ghost {
    @apply btn bg-transparent text-gray-600 hover:bg-surface-100 focus:ring-primary-500;
  }

  .dark .btn-ghost {
    @apply text-gh-text-secondary hover:bg-gh-overlay;
  }

  .btn-sm {
    @apply px-3 py-1.5 text-sm;
  }

  .btn-lg {
    @apply px-6 py-3 text-lg;
  }

  /* Input styles */
  .input {
    @apply w-full px-3 py-2 border border-surface-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200;
  }

  .dark .input {
    @apply bg-gh-canvas border-gh-border text-gh-text focus:ring-gh-blue focus:border-gh-blue;
  }

  .input-error {
    @apply border-red-500 focus:ring-red-500 focus:border-red-500;
  }

  /* Badge styles */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-green {
    @apply badge bg-green-100 text-green-800;
  }

  .dark .badge-green {
    @apply bg-green-900/30 text-gh-green;
  }

  .badge-yellow {
    @apply badge bg-yellow-100 text-yellow-800;
  }

  .dark .badge-yellow {
    @apply bg-yellow-900/30 text-gh-yellow;
  }

  .badge-red {
    @apply badge bg-red-100 text-red-800;
  }

  .dark .badge-red {
    @apply bg-red-900/30 text-gh-red;
  }

  .badge-blue {
    @apply badge bg-blue-100 text-blue-800;
  }

  .dark .badge-blue {
    @apply bg-blue-900/30 text-gh-blue;
  }

  .badge-gray {
    @apply badge bg-gray-100 text-gray-800;
  }

  .dark .badge-gray {
    @apply bg-gray-800/50 text-gh-text-secondary;
  }

  /* Status indicator */
  .status-dot {
    @apply w-2 h-2 rounded-full;
  }

  .status-dot-green {
    @apply status-dot bg-compliance-green;
  }

  .status-dot-yellow {
    @apply status-dot bg-compliance-yellow;
  }

  .status-dot-red {
    @apply status-dot bg-compliance-red;
  }

  /* Table styles */
  .table-container {
    @apply w-full overflow-x-auto;
  }

  .table {
    @apply min-w-full divide-y divide-surface-200;
  }

  .dark .table {
    @apply divide-gh-border;
  }

  .table thead {
    @apply bg-surface-50;
  }

  .dark .table thead {
    @apply bg-gh-overlay;
  }

  .table th {
    @apply px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider;
  }

  .dark .table th {
    @apply text-gh-text-secondary;
  }

  .table td {
    @apply px-4 py-3 text-sm text-gray-700 whitespace-nowrap;
  }

  .dark .table td {
    @apply text-gh-text;
  }

  .table tbody tr {
    @apply border-b border-surface-100 hover:bg-surface-50 transition-colors;
  }

  .dark .table tbody tr {
    @apply border-gh-border-muted hover:bg-gh-overlay;
  }

  /* Metric card styles */
  .metric-card {
    @apply card-hover cursor-pointer;
  }

  .metric-card-green {
    @apply metric-card border-l-4 border-l-compliance-green;
  }

  .metric-card-yellow {
    @apply metric-card border-l-4 border-l-compliance-yellow;
  }

  .metric-card-red {
    @apply metric-card border-l-4 border-l-compliance-red;
  }

  /* Sidebar styles */
  .sidebar-link {
    @apply flex items-center gap-3 px-4 py-2.5 text-gray-600 rounded-md transition-colors duration-200 hover:bg-surface-100 hover:text-gray-900;
  }

  .dark .sidebar-link {
    @apply text-gh-text-secondary hover:bg-gh-overlay hover:text-gh-text;
  }

  .sidebar-link-active {
    @apply sidebar-link bg-primary-50 text-primary-700 font-medium hover:bg-primary-100;
  }

  .dark .sidebar-link-active {
    @apply bg-gh-blue-strong/15 text-gh-blue hover:bg-gh-blue-strong/20;
  }

  /* Risk matrix cell */
  .risk-cell {
    @apply flex items-center justify-center w-12 h-12 text-xs font-semibold rounded cursor-pointer transition-transform hover:scale-105;
  }

  /* Alert styles */
  .alert {
    @apply p-4 rounded-lg border;
  }

  .alert-critical {
    @apply alert bg-red-50 border-red-200 text-red-800;
  }

  .dark .alert-critical {
    @apply bg-red-900/20 border-red-900/50 text-gh-red;
  }

  .alert-warning {
    @apply alert bg-yellow-50 border-yellow-200 text-yellow-800;
  }

  .dark .alert-warning {
    @apply bg-yellow-900/20 border-yellow-900/50 text-gh-yellow;
  }

  .alert-info {
    @apply alert bg-blue-50 border-blue-200 text-blue-800;
  }

  .dark .alert-info {
    @apply bg-blue-900/20 border-blue-900/50 text-gh-blue;
  }

  /* Modal styles */
  .modal-overlay {
    @apply fixed inset-0 bg-black/50 flex items-center justify-center z-50;
  }

  .dark .modal-overlay {
    @apply bg-black/70;
  }

  .modal-content {
    @apply bg-white rounded-lg shadow-elevated max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto;
  }

  .dark .modal-content {
    @apply bg-gh-surface shadow-dark-elevated border border-gh-border;
  }

  /* Loading spinner */
  .spinner {
    @apply animate-spin h-5 w-5 border-2 border-primary-600 border-t-transparent rounded-full;
  }

  .dark .spinner {
    @apply border-gh-blue border-t-transparent;
  }
}

/* Risk matrix gradient colors */
.risk-low {
  background-color: #22c55e;
  color: white;
}

.risk-medium {
  background-color: #eab308;
  color: white;
}

.risk-high {
  background-color: #f97316;
  color: white;
}

.risk-critical {
  background-color: #dc2626;
  color: white;
}

/* Trend indicators */
.trend-up {
  color: #10b981;
}

.trend-down {
  color: #ef4444;
}

.trend-stable {
  color: #6b7280;
}

/* ========================================
   DARK MODE GLOBAL OVERRIDES
   Covers inline Tailwind classes used
   throughout all components
   ======================================== */

/* Body & root backgrounds */
.dark body,
.dark .bg-surface-50 {
  background-color: #0d1117 !important;
}

/* White backgrounds â†’ GitHub surface */
.dark .bg-white {
  background-color: #161b22 !important;
}

.dark .bg-white\/90 {
  background-color: rgba(22, 27, 34, 0.95) !important;
}

/* Surface variations */
.dark .bg-surface-100,
.dark .bg-gray-50 {
  background-color: #1c2128 !important;
}

.dark .bg-surface-200,
.dark .bg-gray-100 {
  background-color: #21262d !important;
}

/* Border overrides */
.dark .border-surface-200,
.dark .border-surface-100,
.dark .border-surface-300,
.dark .border-gray-200,
.dark .border-gray-100 {
  border-color: #30363d !important;
}

.dark .border-white\/20 {
  border-color: rgba(48, 54, 61, 0.6) !important;
}

.dark .divide-surface-200 > :not([hidden]) ~ :not([hidden]),
.dark .divide-gray-200 > :not([hidden]) ~ :not([hidden]) {
  border-color: #30363d !important;
}

/* Text color overrides */
.dark .text-gray-900,
.dark .text-surface-900 {
  color: #e6edf3 !important;
}

.dark .text-gray-800 {
  color: #c9d1d9 !important;
}

.dark .text-gray-700,
.dark .text-surface-700 {
  color: #8b949e !important;
}

.dark .text-gray-600,
.dark .text-surface-600 {
  color: #8b949e !important;
}

.dark .text-gray-500,
.dark .text-surface-500 {
  color: #6e7681 !important;
}

.dark .text-gray-400,
.dark .text-surface-400 {
  color: #484f58 !important;
}

/* Accent colored backgrounds in dark mode */
.dark .bg-primary-50 {
  background-color: rgba(31, 111, 235, 0.15) !important;
}

.dark .bg-primary-100 {
  background-color: rgba(31, 111, 235, 0.2) !important;
}

.dark .bg-blue-50 {
  background-color: rgba(31, 111, 235, 0.1) !important;
}

.dark .bg-blue-100 {
  background-color: rgba(88, 166, 255, 0.15) !important;
}

.dark .bg-green-50 {
  background-color: rgba(63, 185, 80, 0.1) !important;
}

.dark .bg-green-100 {
  background-color: rgba(63, 185, 80, 0.15) !important;
}

.dark .bg-yellow-50 {
  background-color: rgba(210, 153, 34, 0.1) !important;
}

.dark .bg-yellow-100 {
  background-color: rgba(210, 153, 34, 0.15) !important;
}

.dark .bg-red-50 {
  background-color: rgba(248, 81, 73, 0.1) !important;
}

.dark .bg-red-100 {
  background-color: rgba(248, 81, 73, 0.15) !important;
}

.dark .bg-purple-50 {
  background-color: rgba(188, 140, 255, 0.1) !important;
}

.dark .bg-indigo-50 {
  background-color: rgba(88, 166, 255, 0.08) !important;
}

.dark .bg-orange-50 {
  background-color: rgba(247, 150, 22, 0.1) !important;
}

/* Colored text in dark mode */
.dark .text-blue-800,
.dark .text-blue-900 {
  color: #58a6ff !important;
}

.dark .text-blue-700,
.dark .text-blue-600 {
  color: #58a6ff !important;
}

.dark .text-green-800,
.dark .text-green-700 {
  color: #3fb950 !important;
}

.dark .text-yellow-800,
.dark .text-yellow-700 {
  color: #d29922 !important;
}

.dark .text-red-800,
.dark .text-red-700,
.dark .text-red-600 {
  color: #f85149 !important;
}

.dark .text-purple-800,
.dark .text-purple-700 {
  color: #bc8cff !important;
}

.dark .text-orange-800,
.dark .text-orange-700 {
  color: #f79616 !important;
}

.dark .text-primary-700 {
  color: #58a6ff !important;
}

.dark .text-primary-600 {
  color: #58a6ff !important;
}

/* Colored border overrides */
.dark .border-blue-200 {
  border-color: rgba(88, 166, 255, 0.3) !important;
}

.dark .border-green-200 {
  border-color: rgba(63, 185, 80, 0.3) !important;
}

.dark .border-yellow-200 {
  border-color: rgba(210, 153, 34, 0.3) !important;
}

.dark .border-red-200 {
  border-color: rgba(248, 81, 73, 0.3) !important;
}

.dark .border-purple-200 {
  border-color: rgba(188, 140, 255, 0.3) !important;
}

/* Hover states */
.dark .hover\:bg-surface-100:hover,
.dark .hover\:bg-gray-50:hover {
  background-color: #1c2128 !important;
}

.dark .hover\:bg-surface-200:hover,
.dark .hover\:bg-gray-100:hover {
  background-color: #21262d !important;
}

.dark .hover\:bg-primary-100:hover {
  background-color: rgba(31, 111, 235, 0.2) !important;
}

.dark .hover\:bg-red-50:hover {
  background-color: rgba(248, 81, 73, 0.15) !important;
}

.dark .hover\:text-gray-900:hover {
  color: #e6edf3 !important;
}

/* Input & form elements in dark mode */
.dark input,
.dark textarea,
.dark select {
  background-color: #0d1117 !important;
  border-color: #30363d !important;
  color: #e6edf3 !important;
}

.dark input::placeholder,
.dark textarea::placeholder {
  color: #484f58 !important;
}

.dark input:focus,
.dark textarea:focus,
.dark select:focus {
  border-color: #58a6ff !important;
  box-shadow: 0 0 0 2px rgba(88, 166, 255, 0.3) !important;
}

/* Focus ring offset for dark mode */
.dark .focus\:ring-offset-2 {
  --tw-ring-offset-color: #0d1117 !important;
}

/* Gradient backgrounds for dark (login, hero sections) */
.dark .from-blue-50 {
  --tw-gradient-from: rgba(31, 111, 235, 0.1) !important;
}

.dark .to-indigo-50 {
  --tw-gradient-to: rgba(88, 166, 255, 0.08) !important;
}

/* Shadow overrides */
.dark .shadow-sm,
.dark .shadow,
.dark .shadow-md,
.dark .shadow-lg {
  --tw-shadow-color: rgba(0, 0, 0, 0.4) !important;
}

.dark .shadow-2xl {
  --tw-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.5) !important;
}

/* Recharts overrides for dark mode */
.dark .recharts-cartesian-axis-tick-value {
  fill: #8b949e !important;
}

.dark .recharts-cartesian-grid line {
  stroke: #21262d !important;
}

.dark .recharts-tooltip-wrapper .recharts-default-tooltip {
  background-color: #1c2128 !important;
  border-color: #30363d !important;
}

.dark .recharts-legend-item-text {
  color: #8b949e !important;
}

/* Print styles for audit reports */
@media print {
  .no-print {
    display: none !important;
  }

  .print-break {
    page-break-before: always;
  }

  body {
    font-size: 12px;
  }

  .card {
    box-shadow: none;
    border: 1px solid #e5e7eb;
  }

  /* Force light mode for print */
  .dark .bg-white {
    background-color: #ffffff !important;
  }

  .dark .text-gray-900 {
    color: #111827 !important;
  }
}

/* ========================================
   TRANSITIONS FOR THEME SWITCHING
   ======================================== */
html.theme-transition,
html.theme-transition *,
html.theme-transition *::before,
html.theme-transition *::after {
  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.2s ease !important;
  transition-delay: 0s !important;
}
