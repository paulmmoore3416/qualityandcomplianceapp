import{j as e}from"./vendor-react-Coyc-9rJ.js";import{f as j,c as r,u as A,a as M}from"./index-BahTgtJs.js";import{Z as S,_ as R,$ as O,x as T,A as p,o as P,F as W}from"./vendor-icons-CczvD28u.js";import{R as D,A as I,C as K,X as V,Y as F,T as Y,a as f}from"./vendor-recharts-8rfK60na.js";import"./vendor-DW9sAQKa.js";import"./vendor-zustand-Bm6pua9f.js";import"./vendor-uuid-CtRu48qb.js";function y({metric:n,value:d,status:t,trend:x,changePercent:l,onClick:m}){const a=()=>{switch(x){case"improving":return e.jsx(O,{className:"w-4 h-4 text-green-500"});case"declining":return e.jsx(R,{className:"w-4 h-4 text-red-500"});default:return e.jsx(S,{className:"w-4 h-4 text-gray-400"})}},c=()=>{switch(x){case"improving":return"text-green-600";case"declining":return"text-red-600";default:return"text-gray-500"}};return e.jsxs("div",{onClick:m,className:r("card cursor-pointer transition-all duration-200 hover:shadow-card-hover border-l-4",t==="green"&&"border-l-compliance-green",t==="yellow"&&"border-l-compliance-yellow",t==="red"&&"border-l-compliance-red"),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 truncate",children:n.shortName}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:d?`${j(d.value,1)}${n.unit}`:"--"})]}),e.jsx("div",{className:r("w-3 h-3 rounded-full flex-shrink-0",t==="green"&&"bg-compliance-green",t==="yellow"&&"bg-compliance-yellow",t==="red"&&"bg-compliance-red")})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[a(),l!==void 0&&e.jsxs("span",{className:r("text-sm font-medium",c()),children:[l>0?"+":"",j(l,1),"%"]})]}),e.jsx("span",{className:r("text-xs px-2 py-0.5 rounded-full",t==="green"&&"bg-green-100 text-green-700",t==="yellow"&&"bg-yellow-100 text-yellow-700",t==="red"&&"bg-red-100 text-red-700"),children:t})]}),e.jsxs("p",{className:"mt-2 text-xs text-gray-500 line-clamp-2",children:[n.description.slice(0,80),"..."]})]})}function X(){const{getDashboardMetrics:n,getCAPAStats:d,getNCRStats:t,getUnacknowledgedAlerts:x,setActiveView:l,setSelectedMetricId:m}=A(),a=n(),c=d(),g=t(),i=x(),N=a.filter(s=>s.metric.category==="Quality"),u=a.filter(s=>s.metric.category==="Compliance"),b=a.filter(s=>s.metric.category==="Operational"),v=a.filter(s=>s.metric.category==="Financial"),o=a.filter(s=>s.status==="red").length,h=a.filter(s=>s.status==="yellow").length,w=a.filter(s=>s.status==="green").length,C=[{name:"Week 1",fpy:94.5,ncr:2.1,oee:82},{name:"Week 2",fpy:95.2,ncr:1.8,oee:84},{name:"Week 3",fpy:94.8,ncr:2,oee:83},{name:"Week 4",fpy:96.1,ncr:1.5,oee:86}];return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"card bg-gradient-to-br from-primary-500 to-primary-700 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Overall Status"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:o===0&&h===0?"Compliant":o>0?"Action Needed":"Monitor"})]}),o===0&&h===0?e.jsx(T,{className:"w-12 h-12 text-primary-200"}):e.jsx(p,{className:"w-12 h-12 text-primary-200"})]}),e.jsxs("div",{className:"mt-4 flex gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-300"}),w," Green"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-300"}),h," Yellow"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-300"}),o," Red"]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"CAPA Status"}),e.jsxs("p",{className:"text-2xl font-bold mt-1 text-gray-900",children:[c.open," Open"]})]}),e.jsx("div",{className:r("w-12 h-12 rounded-full flex items-center justify-center",c.overdue>0?"bg-red-100":"bg-green-100"),children:e.jsx(P,{className:r("w-6 h-6",c.overdue>0?"text-red-600":"text-green-600")})})]}),e.jsx("div",{className:"mt-4 flex items-center gap-2",children:c.overdue>0?e.jsxs("span",{className:"text-sm text-red-600 font-medium",children:[c.overdue," overdue - Action required"]}):e.jsx("span",{className:"text-sm text-green-600",children:"All on track"})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"NCR Status"}),e.jsxs("p",{className:"text-2xl font-bold mt-1 text-gray-900",children:[g.open," Open"]})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(W,{className:"w-6 h-6 text-orange-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"flex gap-2 text-xs",children:Object.entries(g.byType).slice(0,3).map(([s,k])=>e.jsxs("span",{className:"badge-gray",children:[s,": ",k]},s))})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Active Alerts"}),e.jsx("p",{className:"text-2xl font-bold mt-1 text-gray-900",children:i.length})]}),e.jsx("div",{className:r("w-12 h-12 rounded-full flex items-center justify-center",i.some(s=>s.type==="Critical")?"bg-red-100":i.length>0?"bg-yellow-100":"bg-green-100"),children:e.jsx(p,{className:r("w-6 h-6",i.some(s=>s.type==="Critical")?"text-red-600":i.length>0?"text-yellow-600":"text-green-600")})})]}),e.jsx("div",{className:"mt-4",children:i.length>0?e.jsx("button",{onClick:()=>l("risk"),className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"View all alerts →"}):e.jsx("span",{className:"text-sm text-green-600",children:"No active alerts"})})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Key Metrics Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(I,{data:C,children:[e.jsx(K,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),e.jsx(V,{dataKey:"name",tick:{fontSize:12},stroke:"#94a3b8"}),e.jsx(F,{tick:{fontSize:12},stroke:"#94a3b8"}),e.jsx(Y,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),e.jsx(f,{type:"monotone",dataKey:"fpy",name:"FPY %",stroke:"#10b981",fill:"#10b981",fillOpacity:.2}),e.jsx(f,{type:"monotone",dataKey:"oee",name:"OEE %",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.2})]})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quality & Compliance Metrics (KCIs)"}),e.jsx("button",{onClick:()=>l("metrics"),className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"View all →"})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:[...N,...u].slice(0,8).map(s=>e.jsx(y,{metric:s.metric,value:s.currentValue,status:s.status,trend:s.trend,changePercent:s.changePercent,onClick:()=>{m(s.metric.id),l("metrics")}},s.metric.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Operational Performance (KPIs)"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:[...b,...v].slice(0,8).map(s=>e.jsx(y,{metric:s.metric,value:s.currentValue,status:s.status,trend:s.trend,changePercent:s.changePercent,onClick:()=>{m(s.metric.id),l("metrics")}},s.metric.id))})]}),i.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Alerts"}),e.jsx("div",{className:"space-y-3",children:i.slice(0,5).map(s=>e.jsx("div",{className:r("p-4 rounded-lg border",s.type==="Critical"&&"bg-red-50 border-red-200",s.type==="Warning"&&"bg-yellow-50 border-yellow-200",s.type==="Info"&&"bg-blue-50 border-blue-200"),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(p,{className:r("w-5 h-5 mt-0.5",s.type==="Critical"&&"text-red-600",s.type==="Warning"&&"text-yellow-600",s.type==="Info"&&"text-blue-600")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.message}),s.isoReference&&e.jsxs("p",{className:"text-xs text-primary-600 mt-1 font-medium",children:[s.isoReference.standard,":",s.isoReference.clause]})]})]}),e.jsx("span",{className:"text-xs text-gray-500",children:M(s.timestamp)})]})},s.id))})]})]})}export{X as default};
