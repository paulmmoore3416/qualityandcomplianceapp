const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-X-BLujZp.js","assets/vendor-react-Coyc-9rJ.js","assets/vendor-DW9sAQKa.js","assets/vendor-icons-CczvD28u.js","assets/vendor-recharts-8rfK60na.js","assets/vendor-zustand-Bm6pua9f.js","assets/vendor-uuid-CtRu48qb.js","assets/MetricsView-D6E3FlDK.js","assets/RiskMatrixView-DP78LcpT.js","assets/CAPAView-BvMLQff3.js","assets/NCRView-DdbersWp.js","assets/LifecycleView-CEoStGGh.js","assets/AuditView-b_f7L7y9.js","assets/SettingsView-ClDeIdBL.js","assets/VigilanceView-Bmo7avg2.js","assets/SupplierView-DSjhCTtU.js","assets/TrainingView-DsQKnhek.js","assets/ChangeControlView-CklKH65q.js","assets/DocumentsView-DHeLIHcN.js","assets/AdminView-D5V77qA5.js","assets/AIAgentsView-BMwP42-M.js","assets/ValidationView-BsCaYsSA.js","assets/AnalyticsDashboard-Cg0lUH-J.js"])))=>i.map(i=>d[i]);
import{j as e,a as p,R as j,d as je}from"./vendor-react-Coyc-9rJ.js";import{c as U,p as le}from"./vendor-zustand-Bm6pua9f.js";import{v as A}from"./vendor-uuid-CtRu48qb.js";import{ae as Se,h as Ce}from"./vendor-DW9sAQKa.js";import{L as Ae,a as _e,B as de,A as P,C as Ie,F as Re,b as ue,G as Ee,c as B,d as Me,e as De,T as Oe,f as me,g as L,S as M,U as Pe,h as pe,i as Te,j as Le,k as K,l as q,m as F,X as ge,n as Ue,o as he,p as z,q as fe,r as Q,s as X,P as ee,t as xe,D as ye,u as W,M as Y,v as Ve,w as qe,I as be,E as Fe,x as O,y as ze,R as ve,H as we,z as $e,J as Ge,K as Qe,N as He,O as Be,Q as te,V as Ke,W as We,Y as Ye}from"./vendor-icons-CczvD28u.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();const Ze="modulepreload",Je=function(s){return"/qualityandcomplianceapp/"+s},ae={},C=function(n,t,a){let r=Promise.resolve();if(t&&t.length>0){let u=function(g){return Promise.all(g.map(x=>Promise.resolve(x).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),o=c?.nonce||c?.getAttribute("nonce");r=u(t.map(g=>{if(g=Je(g),g in ae)return;ae[g]=!0;const x=g.endsWith(".css"),h=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${h}`))return;const f=document.createElement("link");if(f.rel=x?"stylesheet":Ze,x||(f.as="script"),f.crossOrigin="",f.href=g,o&&f.setAttribute("nonce",o),document.head.appendChild(f),x)return new Promise((y,b)=>{f.addEventListener("load",y),f.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${g}`)))})}))}function i(c){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=c,window.dispatchEvent(o),!o.defaultPrevented)throw c}return r.then(c=>{for(const o of c||[])o.status==="rejected"&&i(o.reason);return n().catch(i)})},H=[{id:"M001",name:"First Pass Yield",shortName:"FPY",category:"Quality",description:"Percentage of products produced correctly without rework or defects on the first attempt. A key indicator of process stability and capability.",formula:"(Units_Passed_First_Time / Total_Units_Started) × 100",unit:"%",isoMappings:[{standard:"ISO 13485:2016",clause:"8.2.6",description:"Monitoring and measurement of product"},{standard:"ISO 9001",clause:"9.1",description:"Monitoring, measurement, analysis and evaluation"},{standard:"ISO 14971",clause:"7.3",description:"Residual risk evaluation"}],riskImpact:"High - Correlates directly to Process Stability. Low FPY indicates potential systematic issues requiring ISO 14971 risk reassessment.",threshold:{green:95,yellow:90,red:85,direction:"higher-better"},workaroundSuggestion:"If manual tracking is error-prone, implement digital batch records (eDBR) to capture real-time pass/fail at each gate. Consider Statistical Process Control (SPC) charts for trend analysis."},{id:"M002",name:"Non-Conformance Report Rate",shortName:"NCR Rate",category:"Quality",description:"Rate of defective or non-conforming products identified during manufacturing. Tracks quality escapes and process deviations.",formula:"(Total_NCRs / Total_Units_Produced) × 100",unit:"%",isoMappings:[{standard:"ISO 13485:2016",clause:"8.3",description:"Control of nonconforming product"},{standard:"ISO 9001",clause:"8.7",description:"Control of nonconforming outputs"},{standard:"ISO 14971",clause:"10",description:"Production and post-production activities"}],riskImpact:"Critical - High NCR rates trigger mandatory risk assessment updates. Each NCR must be evaluated for patient safety impact.",threshold:{green:1,yellow:3,red:5,direction:"lower-better"},workaroundSuggestion:"Integrate with PLM software to auto-generate NCRs from floor rejects. Implement Pareto analysis to identify top failure modes."},{id:"M003",name:"CAPA Closure Rate",shortName:"CAPA Rate",category:"Compliance",description:"Percentage of Corrective and Preventive Actions closed within target timeframe. Key audit metric for regulatory compliance.",formula:"(Closed_CAPAs / Total_Open_CAPAs) × 100",unit:"%",isoMappings:[{standard:"ISO 13485:2016",clause:"8.5.2",description:"Corrective action"},{standard:"ISO 13485:2016",clause:"8.5.3",description:"Preventive action"},{standard:"ISO 9001",clause:"10.2",description:"Nonconformity and corrective action"}],riskImpact:"Critical - Regulatory Audit Red Flag. Open/overdue CAPAs indicate systemic QMS failures.",threshold:{green:90,yellow:75,red:60,direction:"higher-better"},workaroundSuggestion:"Automate 30-60-90 day alerts. Use Root Cause Analysis templates (5-Why, Fishbone) to prevent CAPA stagnation. Implement escalation matrix for overdue items."},{id:"M004",name:"CAPA Overdue Rate",shortName:"Overdue CAPA",category:"Compliance",description:"Percentage of CAPAs that have exceeded their target closure date. Critical metric for regulatory audits.",formula:"(Overdue_CAPAs / Total_Open_CAPAs) × 100",unit:"%",isoMappings:[{standard:"ISO 13485:2016",clause:"8.5.2",description:"Corrective action"},{standard:"ISO 9001",clause:"10.2",description:"Nonconformity and corrective action"}],riskImpact:"Critical - Direct indicator of QMS health. Zero tolerance typically required for Class III devices.",threshold:{green:5,yellow:10,red:15,direction:"lower-better"},workaroundSuggestion:"Implement a 72-hour pre-overdue alert system for operations managers. Consider weekly CAPA review meetings for high-risk items."},{id:"M005",name:"Lot Acceptance Rate",shortName:"LAR",category:"Quality",description:"Percentage of manufactured lots released versus rejected or scrapped. Indicates overall manufacturing quality and yield.",formula:"(Released_Lots / Total_Lots_Manufactured) × 100",unit:"%",isoMappings:[{standard:"ISO 13485:2016",clause:"7.5.1",description:"Control of production and service provision"},{standard:"ISO 13485:2016",clause:"8.2.6",description:"Monitoring and measurement of product"}],riskImpact:"High - Impacts Inventory Turns and COGS. Low LAR indicates systematic quality issues.",threshold:{green:98,yellow:95,red:90,direction:"higher-better"},workaroundSuggestion:"Implement in-process controls to catch issues before lot completion. Use sampling plans per ISO 2859-1 or ANSI/ASQ Z1.4."},{id:"M006",name:"Out-of-Specification Rate",shortName:"OOS Rate",category:"Quality",description:"Frequency of testing results falling outside authorized specifications. Triggers investigation and potential CAPA.",formula:"(OOS_Results / Total_Tests) × 100",unit:"%",isoMappings:[{standard:"ISO 13485:2016",clause:"8.2.6",description:"Monitoring and measurement of product"},{standard:"ISO 13485:2016",clause:"8.3",description:"Control of nonconforming product"}],riskImpact:"High - Each OOS requires documented investigation. Trending OOS indicates process drift.",threshold:{green:1,yellow:2,red:3,direction:"lower-better"},workaroundSuggestion:"Implement OOS investigation SOP with laboratory error vs. manufacturing error distinction. Use LIMS for automatic flagging."},{id:"M007",name:"Out-of-Trend Rate",shortName:"OOT Rate",category:"Quality",description:"Frequency of results showing statistical trends toward specification limits, even if currently within spec.",formula:"(OOT_Results / Total_Tests) × 100",unit:"%",isoMappings:[{standard:"ISO 13485:2016",clause:"8.4",description:"Analysis of data"},{standard:"ISO 9001",clause:"9.1.3",description:"Analysis and evaluation"}],riskImpact:"Medium - Early warning indicator. OOT trending should trigger preventive action before OOS occurs.",threshold:{green:2,yellow:4,red:6,direction:"lower-better"},workaroundSuggestion:"Use statistical trending rules (Western Electric rules, Nelson rules) for early detection. Implement control charts with warning limits."},{id:"M008",name:"Audit Finding Resolution Rate",shortName:"Audit Resolution",category:"Compliance",description:"Number of audit findings closed within target timeframe. Key indicator of audit readiness and QMS effectiveness.",formula:"(Resolved_Findings / Total_Findings) × 100",unit:"%",isoMappings:[{standard:"ISO 13485:2016",clause:"8.2.4",description:"Internal audit"},{standard:"ISO 9001",clause:"9.2",description:"Internal audit"}],riskImpact:"High - Unresolved audit findings during regulatory inspection indicate systemic QMS issues.",threshold:{green:95,yellow:85,red:75,direction:"higher-better"},workaroundSuggestion:"Categorize findings by severity (Critical/Major/Minor) with differentiated timelines. Track average days-to-closure."},{id:"M009",name:"Complaint Rate",shortName:"Complaint Rate",category:"Compliance",description:"Rate of customer complaints received per units shipped. Key post-market surveillance metric.",formula:"(Total_Complaints / Units_Shipped) × 1000",unit:"per 1000 units",isoMappings:[{standard:"ISO 13485:2016",clause:"8.2.1",description:"Feedback"},{standard:"ISO 13485:2016",clause:"8.2.2",description:"Complaint handling"},{standard:"ISO 14971",clause:"10",description:"Production and post-production activities"}],riskImpact:"Critical - Complaints may indicate safety issues requiring MDR/Vigilance reporting. Feeds into risk management file updates.",threshold:{green:.5,yellow:1,red:2,direction:"lower-better"},workaroundSuggestion:"Implement complaint trending dashboard. Auto-flag complaints with reportable terms (injury, death, malfunction)."},{id:"M010",name:"Overall Equipment Effectiveness",shortName:"OEE",category:"Operational",description:"Combines availability, performance, and quality rates to measure overall machine efficiency. Gold standard for manufacturing performance.",formula:"Availability × Performance × Quality (each as decimal)",unit:"%",isoMappings:[{standard:"ISO 13485:2016",clause:"6.3",description:"Infrastructure"},{standard:"ISO 13485:2016",clause:"7.5.1",description:"Control of production and service provision"}],riskImpact:"Medium - Low OEE may indicate equipment reliability issues affecting product quality consistency.",threshold:{green:85,yellow:70,red:55,direction:"higher-better"},workaroundSuggestion:"Break down OEE into components (Availability, Performance, Quality) to identify specific improvement areas. Implement TPM (Total Productive Maintenance)."},{id:"M011",name:"Cycle Time",shortName:"Cycle Time",category:"Operational",description:"Time taken to complete a specific manufacturing process or product from start to finish. Key efficiency metric.",formula:"End_Time - Start_Time",unit:"minutes",isoMappings:[{standard:"ISO 13485:2016",clause:"7.5.1",description:"Control of production and service provision"},{standard:"ISO 9001",clause:"8.5.1",description:"Control of production and service provision"}],riskImpact:"Low - Primarily efficiency metric, but compressed cycle times may compromise quality if not validated.",threshold:{green:100,yellow:110,red:120,direction:"lower-better"},workaroundSuggestion:"Monitor cycle time alongside FPY - efficiency gains that reduce quality are counterproductive. Validate any cycle time reductions per ISO 13485:7.5.6."},{id:"M012",name:"Throughput",shortName:"Throughput",category:"Operational",description:"Number of units produced over a specific period. Measures production capacity utilization.",formula:"Total_Units_Produced / Time_Period",unit:"units/hour",isoMappings:[{standard:"ISO 13485:2016",clause:"7.5.1",description:"Control of production and service provision"},{standard:"ISO 9001",clause:"8.5.1",description:"Control of production and service provision"}],riskImpact:"Low - Primarily operational metric. Track Compliant Units per Hour rather than raw throughput.",threshold:{green:100,yellow:90,red:80,direction:"higher-better"},workaroundSuggestion:'Calculate "Compliant Throughput" = Throughput × FPY to avoid efficiency vs. quality conflicts.'},{id:"M013",name:"Unplanned Downtime",shortName:"Downtime",category:"Operational",description:"Equipment reliability metric tracking unexpected production stops. Impacts delivery and may indicate maintenance issues.",formula:"(Unplanned_Stop_Time / Total_Available_Time) × 100",unit:"%",isoMappings:[{standard:"ISO 13485:2016",clause:"6.3",description:"Infrastructure"},{standard:"ISO 13485:2016",clause:"7.5.6",description:"Validation of processes for production and service provision"}],riskImpact:"Medium - Frequent unplanned downtime may indicate equipment degradation affecting process validation status.",threshold:{green:5,yellow:10,red:15,direction:"lower-better"},workaroundSuggestion:"Implement predictive maintenance using equipment monitoring. Track Mean Time Between Failures (MTBF) and Mean Time To Repair (MTTR)."},{id:"M014",name:"Changeover Time",shortName:"Changeover",category:"Operational",description:"Time required when switching production lines between products. Impacts flexibility and throughput.",formula:"End_Changeover - Start_Changeover",unit:"minutes",isoMappings:[{standard:"ISO 13485:2016",clause:"7.5.1",description:"Control of production and service provision"},{standard:"ISO 13485:2016",clause:"7.5.2",description:"Cleanliness of product"}],riskImpact:"Medium - Shortening changeover must not bypass Line Clearance protocols. Cross-contamination risk if rushed.",threshold:{green:30,yellow:45,red:60,direction:"lower-better"},workaroundSuggestion:"Apply SMED (Single-Minute Exchange of Dies) principles while maintaining line clearance verification. Document any changeover procedure changes per change control."},{id:"M015",name:"Production Attainment",shortName:"Attainment",category:"Operational",description:"Percentage of time production targets are met. Key indicator of planning accuracy and execution capability.",formula:"(Actual_Production / Planned_Production) × 100",unit:"%",isoMappings:[{standard:"ISO 13485:2016",clause:"7.1",description:"Planning of product realization"},{standard:"ISO 9001",clause:"8.1",description:"Operational planning and control"}],riskImpact:"Low - Primarily planning metric. Chronic under-attainment may indicate capacity or yield issues.",threshold:{green:95,yellow:90,red:85,direction:"higher-better"},workaroundSuggestion:"Analyze root causes of missed targets. Consider capacity planning tools and realistic yield assumptions in production planning."},{id:"M016",name:"Cost of Goods Sold Per Unit",shortName:"COGS/Unit",category:"Financial",description:"Total direct and indirect costs to manufacture a single device. Critical for pricing and profitability analysis.",formula:"Total_Manufacturing_Cost / Units_Produced",unit:"$",isoMappings:[{standard:"ISO 13485:2016",clause:"6.1",description:"Provision of resources"},{standard:"ISO 9001",clause:"7.1",description:"Resources"}],riskImpact:"Low - Financial metric. However, cost pressure should never compromise quality or compliance.",threshold:{green:100,yellow:105,red:110,direction:"lower-better"},workaroundSuggestion:"Include Cost of Poor Quality (COPQ) in analysis - scrap, rework, complaints, recalls. Quality improvements often reduce total COGS."},{id:"M017",name:"Inventory Turns",shortName:"Inv Turns",category:"Financial",description:"Measures how often inventory is replaced over a period. Impacts cash flow, storage costs, and material freshness.",formula:"COGS / Average_Inventory_Value",unit:"turns/year",isoMappings:[{standard:"ISO 13485:2016",clause:"7.5.11",description:"Preservation of product"},{standard:"ISO 13485:2016",clause:"4.2.5",description:"Control of records"}],riskImpact:"Medium - Low turns may indicate expiring materials (shelf life management). Requires ISO 10993 reassessment if material age affects biocompatibility.",threshold:{green:12,yellow:8,red:4,direction:"higher-better"},workaroundSuggestion:"Implement FEFO (First Expired, First Out) for materials with shelf life. Track material age vs. biocompatibility testing validity."},{id:"M018",name:"Lead Time to Customer",shortName:"Lead Time",category:"Financial",description:"Time from order receipt to delivery. Critical for customer satisfaction and market competitiveness.",formula:"Delivery_Date - Order_Date",unit:"days",isoMappings:[{standard:"ISO 13485:2016",clause:"7.2.1",description:"Determination of requirements related to product"},{standard:"ISO 9001",clause:"8.2.1",description:"Customer communication"}],riskImpact:"Low - Customer satisfaction metric. Rushed deliveries should not bypass final QC or documentation requirements.",threshold:{green:14,yellow:21,red:30,direction:"lower-better"},workaroundSuggestion:"Map lead time components (manufacturing, QC release, shipping). Identify bottlenecks without compromising quality release criteria."},{id:"M019",name:"Scrap Rate",shortName:"Scrap Rate",category:"Financial",description:"Percentage of materials wasted or unusable during manufacturing. Direct cost and environmental impact.",formula:"(Scrapped_Materials_Value / Total_Materials_Used_Value) × 100",unit:"%",isoMappings:[{standard:"ISO 13485:2016",clause:"8.3",description:"Control of nonconforming product"},{standard:"ISO 10993",clause:"10993-1",description:"Evaluation and testing within a risk management process"}],riskImpact:"Medium - High scrap may indicate process issues. Material changes to reduce scrap require ISO 10993 reassessment.",threshold:{green:2,yellow:4,red:6,direction:"lower-better"},workaroundSuggestion:"Categorize scrap by root cause (material, process, operator, equipment). Any material substitution to reduce scrap requires full biocompatibility evaluation."},{id:"M020",name:"Sterility Assurance Level",shortName:"SAL",category:"Quality",description:"Probability of a single viable microorganism occurring on a device after sterilization. Industry standard is 10^-6.",formula:"Log reduction based on bioburden and D-value",unit:"probability",isoMappings:[{standard:"ISO 13485:2016",clause:"7.5.5",description:"Particular requirements for sterile medical devices"},{standard:"ISO 13485:2016",clause:"7.5.7",description:"Particular requirements for validation of processes for sterilization"},{standard:"ISO 11135",clause:"10",description:"Validation"},{standard:"ISO 11137",clause:"11137-2",description:"Establishing the sterilization dose"}],riskImpact:"Critical - Direct patient safety metric. Sterility failures are typically Class I recalls.",threshold:{green:-6,yellow:-5,red:-4,direction:"lower-better"},workaroundSuggestion:"Maintain robust bioburden monitoring program. Validate any packaging or load configuration changes. Conduct periodic dose audits."},{id:"M021",name:"Bioburden Level",shortName:"Bioburden",category:"Quality",description:"Population of viable microorganisms on a product prior to sterilization. Critical input for sterilization validation.",formula:"CFU count per ISO 11737-1 methodology",unit:"CFU",isoMappings:[{standard:"ISO 13485:2016",clause:"7.5.5",description:"Particular requirements for sterile medical devices"},{standard:"ISO 11135",clause:"8",description:"Product definition"},{standard:"ISO 14644",clause:"14644-1",description:"Classification of air cleanliness by particle concentration"}],riskImpact:"High - Elevated bioburden may exceed sterilization process capability. Indicates cleanroom or handling issues.",threshold:{green:100,yellow:500,red:1e3,direction:"lower-better"},workaroundSuggestion:"Trend bioburden results by product family. Investigate spikes immediately. Review cleanroom gowning and environmental monitoring data."},{id:"M022",name:"Software Defect Density",shortName:"Defect Density",category:"Quality",description:"Number of confirmed defects per thousand lines of code. Key indicator of software quality.",formula:"(Total_Confirmed_Defects / KLOC) × 1000",unit:"defects/KLOC",isoMappings:[{standard:"IEC 62304",clause:"5.7",description:"Software system testing"},{standard:"IEC 62304",clause:"8.1",description:"Problem reports"},{standard:"ISO 14971",clause:"7.1",description:"Risk control option analysis"}],riskImpact:"High - For Class B and C software, defect density directly relates to residual risk. Track by software safety class.",threshold:{green:1,yellow:3,red:5,direction:"lower-better"},workaroundSuggestion:"Implement static code analysis tools. Track defects by severity and software safety classification. Conduct code reviews per IEC 62304."},{id:"M023",name:"Design Verification Pass Rate",shortName:"Design Ver",category:"Quality",description:"Percentage of design verification tests passing on first execution. Indicates design maturity.",formula:"(Tests_Passed_First_Time / Total_Tests_Executed) × 100",unit:"%",isoMappings:[{standard:"ISO 13485:2016",clause:"7.3.6",description:"Design and development verification"},{standard:"ISO 14971",clause:"7.2",description:"Implementation of risk control measures"}],riskImpact:"High - Low pass rates indicate design issues requiring risk management file updates and potential design changes.",threshold:{green:95,yellow:85,red:75,direction:"higher-better"},workaroundSuggestion:"Link verification tests to design inputs and risk controls. Track requirements coverage matrix. Implement design reviews before verification."}];function Xe(s){return H.find(n=>n.id===s)}function $(s,n){const{threshold:t}=s;return t.direction==="higher-better"?n>=t.green?"green":n>=t.yellow?"yellow":"red":n<=t.green?"green":n<=t.yellow?"yellow":"red"}function Bt(s,n){return s*n}function Kt(s){return s<=4?"Low":s<=9?"Medium":s<=15?"High":"Critical"}function Wt(s){return s==="High"||s==="Critical"}function et(s,n,t){const a=$(s,n),r=t?$(s,t):null;return r&&a!==r&&(r==="green"&&a!=="green"||r==="yellow"&&a==="red")?{requiresReassessment:!0,reason:`Metric status degraded from ${r} to ${a}`,suggestedAction:`Update Risk Management File per ISO 14971:7.3. Review residual risk evaluation for ${s.name}.`}:a==="red"&&s.riskImpact.includes("Critical")?{requiresReassessment:!0,reason:`Critical metric ${s.name} in red status`,suggestedAction:"Immediate CAPA initiation per ISO 13485:8.5.2. Update risk controls per ISO 14971:7.1."}:{requiresReassessment:!1,reason:"Metric within acceptable parameters",suggestedAction:"Continue routine monitoring"}}function Yt(s,n){return s===0?0:n/s*100}function Zt(s,n){return n===0?0:s/n*100}function Jt(s,n){const t=s+n;return t===0?100:s/t*100}function Xt(s,n,t){return{oee:s/100*(n/100)*(t/100)*100,components:{availability:s,performance:n,quality:t}}}function ea(s,n){return n===0?0:s/n*100}function ta(s,n){return n===0?0:s/n*100}function tt(s,n,t){const a=[],r=Xe(s);if(!r)return a;const i=$(r,n),c=et(r,n,t);return i==="red"?a.push({id:A(),type:"Critical",title:`${r.shortName} Critical Alert`,message:`${r.name} has reached critical threshold (${n}${r.unit}). ${c.suggestedAction}`,isoReference:r.isoMappings[0],linkedEntityType:"Metric",linkedEntityId:s,timestamp:new Date,acknowledged:!1}):i==="yellow"&&a.push({id:A(),type:"Warning",title:`${r.shortName} Warning`,message:`${r.name} approaching threshold (${n}${r.unit}). Review recommended.`,isoReference:r.isoMappings[0],linkedEntityType:"Metric",linkedEntityId:s,timestamp:new Date,acknowledged:!1}),c.requiresReassessment&&a.push({id:A(),type:"Critical",title:"Risk Reassessment Required",message:`${c.reason}. ${c.suggestedAction}`,isoReference:{standard:"ISO 14971",clause:"10",description:"Production and post-production activities"},linkedEntityType:"Metric",linkedEntityId:s,timestamp:new Date,acknowledged:!1}),a}function at(s,n,t,a,r="System"){return{id:A(),action:s,previousValue:t,newValue:a,isoClause:n,timestamp:new Date,user:r}}function aa(s){return{Design:["M022","M023"],Verification:["M023","M001"],Validation:["M001","M006","M020"],Production:["M001","M002","M003","M010","M012","M019"],"Post-Market":["M009","M003","M008"]}[s]||[]}const D=U()(le((s,n)=>({metricValues:[],riskAssessments:[],capas:[],ncrs:[],alerts:[],lifecycleRecords:[],lots:[],validationReports:[],suppliers:[],trainingRecords:[],changeControls:[],complaints:[],documents:[],moduleLinks:[],sidebarOpen:!0,activeView:"dashboard",auditMode:!1,selectedMetricId:null,setSidebarOpen:t=>s({sidebarOpen:t}),setActiveView:t=>s({activeView:t}),setAuditMode:t=>s({auditMode:t}),setSelectedMetricId:t=>s({selectedMetricId:t}),addMetricValue:(t,a,r,i,c)=>{const o=n(),u=o.getLatestMetricValue(t),g=at(`Metric value recorded: ${a}`,"ISO 13485:8.4",u?.value,a,i),x={id:A(),metricId:t,value:a,inputs:r,timestamp:new Date,notes:c,linkedRiskAssessments:[],auditTrail:[g]},h=tt(t,a,u?.value);s({metricValues:[...o.metricValues,x],alerts:[...o.alerts,...h]}),n().saveData()},getLatestMetricValue:t=>{const a=n().metricValues.filter(r=>r.metricId===t);return a.length===0?null:a.sort((r,i)=>new Date(i.timestamp).getTime()-new Date(r.timestamp).getTime())[0]},getMetricHistory:(t,a=30)=>n().metricValues.filter(r=>r.metricId===t).sort((r,i)=>new Date(i.timestamp).getTime()-new Date(r.timestamp).getTime()).slice(0,a),getDashboardMetrics:()=>{const t=n();return H.map(a=>{const r=t.getLatestMetricValue(a.id),i=t.getMetricHistory(a.id,7);let c="stable",o;if(i.length>=2){const g=i[0].value,x=i[1].value,h=(g-x)/x*100;o=h,a.threshold.direction==="higher-better"?c=h>2?"improving":h<-2?"declining":"stable":c=h<-2?"improving":h>2?"declining":"stable"}const u=r?$(a,r.value):"green";return{metric:a,currentValue:r,trend:c,status:u,changePercent:o}})},addRiskAssessment:t=>{const a={...t,id:A(),createdAt:new Date,updatedAt:new Date};s(r=>({riskAssessments:[...r.riskAssessments,a]})),n().saveData()},updateRiskAssessment:(t,a)=>{s(r=>({riskAssessments:r.riskAssessments.map(i=>i.id===t?{...i,...a,updatedAt:new Date}:i)})),n().saveData()},getRiskAssessmentsByMetric:t=>n().riskAssessments.filter(a=>a.metricId===t),addCAPA:t=>{const a={...t,id:A(),createdAt:new Date};s(r=>({capas:[...r.capas,a]})),n().saveData()},updateCAPA:(t,a)=>{s(r=>({capas:r.capas.map(i=>i.id===t?{...i,...a}:i)})),n().saveData()},getCAPAStats:()=>{const t=n().capas,a=new Date,r=new Date(a.getFullYear(),a.getMonth(),1);return{total:t.length,open:t.filter(i=>i.status!=="Closed").length,overdue:t.filter(i=>i.status!=="Closed"&&new Date(i.dueDate)<a).length,closedThisMonth:t.filter(i=>i.status==="Closed"&&i.closedAt&&new Date(i.closedAt)>=r).length}},addNCR:t=>{const a={...t,id:A(),createdAt:new Date};s(r=>({ncrs:[...r.ncrs,a]})),n().saveData()},updateNCR:(t,a)=>{s(r=>({ncrs:r.ncrs.map(i=>i.id===t?{...i,...a}:i)})),n().saveData()},getNCRStats:()=>{const t=n().ncrs,a={};return t.forEach(r=>{a[r.type]=(a[r.type]||0)+1}),{total:t.length,open:t.filter(r=>r.status!=="Closed").length,byType:a}},addAlert:t=>{const a={...t,id:A(),timestamp:new Date};s(r=>({alerts:[...r.alerts,a]}))},acknowledgeAlert:t=>{s(a=>({alerts:a.alerts.map(r=>r.id===t?{...r,acknowledged:!0}:r)})),n().saveData()},getUnacknowledgedAlerts:()=>n().alerts.filter(t=>!t.acknowledged).sort((t,a)=>new Date(a.timestamp).getTime()-new Date(t.timestamp).getTime()),addLifecycleRecord:t=>{const a={...t,id:A()};s(r=>({lifecycleRecords:[...r.lifecycleRecords,a]})),n().saveData()},updateLifecycleRecord:(t,a)=>{s(r=>({lifecycleRecords:r.lifecycleRecords.map(i=>i.id===t?{...i,...a}:i)})),n().saveData()},addLot:t=>{const a={...t,id:A()};s(r=>({lots:[...r.lots,a]})),n().saveData()},updateLot:(t,a)=>{s(r=>({lots:r.lots.map(i=>i.id===t?{...i,...a}:i)})),n().saveData()},addValidationReport:t=>{const a={...t,id:A(),createdAt:new Date,updatedAt:new Date};s(r=>({validationReports:[...r.validationReports,a]})),n().saveData()},updateValidationReport:(t,a)=>{s(r=>({validationReports:r.validationReports.map(i=>i.id===t?{...i,...a,updatedAt:new Date}:i)})),n().saveData()},getValidationStats:()=>{const t=n().validationReports,a={};t.forEach(c=>{a[c.type]=(a[c.type]||0)+1});const r=t.filter(c=>c.status==="Approved"),i=r.length>0?r.filter(c=>c.overallConclusion==="Pass").length/r.length*100:0;return{total:t.length,draft:t.filter(c=>c.status==="Draft").length,inProgress:t.filter(c=>c.status==="In Progress").length,underReview:t.filter(c=>c.status==="Under Review").length,approved:r.length,passRate:i,byType:a}},getValidationReportById:t=>n().validationReports.find(a=>a.id===t),addSupplier:t=>{const a={...t,id:A(),createdAt:new Date};s(r=>({suppliers:[...r.suppliers,a]}))},updateSupplier:(t,a)=>{s(r=>({suppliers:r.suppliers.map(i=>i.id===t?{...i,...a}:i)}))},getSupplierStats:()=>{const t=n().suppliers;return{total:t.length,approved:t.filter(a=>a.status==="Approved").length,conditional:t.filter(a=>a.status==="Conditional").length,critical:t.filter(a=>a.riskLevel==="Critical").length}},addTrainingRecord:t=>{const a={...t,id:A()};s(r=>({trainingRecords:[...r.trainingRecords,a]}))},updateTrainingRecord:(t,a)=>{s(r=>({trainingRecords:r.trainingRecords.map(i=>i.id===t?{...i,...a}:i)}))},getTrainingStats:()=>{const t=n().trainingRecords,a=t.filter(i=>i.status==="Completed").length,r=t.filter(i=>i.status==="Overdue").length;return{total:t.length,completed:a,overdue:r,complianceRate:t.length>0?a/t.length*100:100}},addChangeControl:t=>{const a={...t,id:A(),createdAt:new Date};s(r=>({changeControls:[...r.changeControls,a]}))},updateChangeControl:(t,a)=>{s(r=>({changeControls:r.changeControls.map(i=>i.id===t?{...i,...a}:i)}))},getChangeControlStats:()=>{const t=n().changeControls;return{total:t.length,pending:t.filter(a=>a.status==="Pending Review").length,approved:t.filter(a=>a.status==="Approved").length,implemented:t.filter(a=>a.status==="Implemented").length}},addModuleLink:t=>{const a={...t,createdAt:new Date};s(r=>({moduleLinks:[...r.moduleLinks,a]}))},removeModuleLink:(t,a,r,i)=>{s(c=>({moduleLinks:c.moduleLinks.filter(o=>!(o.sourceType===t&&o.sourceId===a&&o.targetType===r&&o.targetId===i))}))},getLinkedEntities:(t,a)=>n().moduleLinks.filter(r=>r.sourceType===t&&r.sourceId===a||r.targetType===t&&r.targetId===a),getLinksForEntity:(t,a)=>{const r=n().moduleLinks;return{incoming:r.filter(i=>i.targetType===t&&i.targetId===a),outgoing:r.filter(i=>i.sourceType===t&&i.sourceId===a)}},loadData:async()=>{if(window.electronAPI)try{const t=await window.electronAPI.loadData("app-state");if(t.success&&t.data){const a=t.data;s({metricValues:a.metricValues||[],riskAssessments:a.riskAssessments||[],capas:a.capas||[],ncrs:a.ncrs||[],alerts:a.alerts||[],lifecycleRecords:a.lifecycleRecords||[],lots:a.lots||[],validationReports:a.validationReports||[],suppliers:a.suppliers||[],trainingRecords:a.trainingRecords||[],changeControls:a.changeControls||[],complaints:a.complaints||[],documents:a.documents||[],moduleLinks:a.moduleLinks||[]})}}catch(t){console.error("Failed to load data from Electron:",t)}},saveData:async()=>{if(window.electronAPI){const t=n(),a={metricValues:t.metricValues,riskAssessments:t.riskAssessments,capas:t.capas,ncrs:t.ncrs,alerts:t.alerts,lifecycleRecords:t.lifecycleRecords,lots:t.lots,validationReports:t.validationReports,suppliers:t.suppliers,trainingRecords:t.trainingRecords,changeControls:t.changeControls,complaints:t.complaints,documents:t.documents,moduleLinks:t.moduleLinks};try{await window.electronAPI.saveData("app-state",a)}catch(r){console.error("Failed to save data to Electron:",r)}}},exportAuditReport:()=>{const t=n(),r={generatedAt:new Date().toISOString(),summary:{metricsTracked:H.length,metricValuesRecorded:t.metricValues.length,activeRiskAssessments:t.riskAssessments.filter(i=>i.status!=="Closed").length,openCAPAs:t.capas.filter(i=>i.status!=="Closed").length,openNCRs:t.ncrs.filter(i=>i.status!=="Closed").length,unacknowledgedAlerts:t.getUnacknowledgedAlerts().length,totalSuppliers:t.suppliers.length,trainingComplianceRate:t.getTrainingStats().complianceRate,pendingChangeControls:t.changeControls.filter(i=>i.status==="Pending Review").length},metrics:t.getDashboardMetrics().map(i=>({id:i.metric.id,name:i.metric.name,currentValue:i.currentValue?.value,status:i.status,trend:i.trend,isoReferences:i.metric.isoMappings.map(c=>`${c.standard}:${c.clause}`)})),capas:t.capas,ncrs:t.ncrs,riskAssessments:t.riskAssessments,suppliers:t.suppliers.map(i=>({name:i.name,code:i.supplierCode,status:i.status,riskLevel:i.riskLevel})),validationReports:t.validationReports.map(i=>({reportNumber:i.reportNumber,title:i.title,type:i.type,category:i.category,status:i.status,overallConclusion:i.overallConclusion,testsTotal:i.testResults.length,testsPassed:i.testResults.filter(c=>c.outcome==="Pass").length,testsFailed:i.testResults.filter(c=>c.outcome==="Fail").length})),moduleLinks:t.moduleLinks.length};return JSON.stringify(r,null,2)}}),{name:"medtech-app-state",partialize:s=>({metricValues:s.metricValues,riskAssessments:s.riskAssessments,capas:s.capas,ncrs:s.ncrs,alerts:s.alerts,lifecycleRecords:s.lifecycleRecords,lots:s.lots,validationReports:s.validationReports,suppliers:s.suppliers,trainingRecords:s.trainingRecords,changeControls:s.changeControls,complaints:s.complaints,documents:s.documents,moduleLinks:s.moduleLinks})}));var I={};const st=[{username:I.REACT_APP_DEMO_ADMIN_USERNAME||"admin-dev",password:I.REACT_APP_DEMO_ADMIN_PASSWORD||"dev-password",user:{id:"user-001",username:"admin",email:"admin@medtech.com",fullName:"System Administrator",role:"Admin",permissions:["view_dashboard","view_metrics","edit_metrics","view_risk","edit_risk","view_capa","edit_capa","approve_capa","view_ncr","edit_ncr","view_documents","edit_documents","delete_documents","share_documents","view_vigilance","edit_vigilance","view_suppliers","edit_suppliers","approve_suppliers","view_training","edit_training","verify_training","view_change_control","edit_change_control","approve_change_control","view_validation","edit_validation","approve_validation","sign_electronically","view_audit_trail","manage_users","manage_roles","system_settings","export_data","import_data"],department:"IT & Quality Systems",title:"Quality Systems Administrator",status:"Active",createdAt:new Date("2024-01-01"),updatedAt:new Date,passwordLastChanged:new Date("2024-01-01"),mustChangePassword:!1,mfaEnabled:!0,failedLoginAttempts:0}},{username:I.REACT_APP_DEMO_QA_USERNAME||"qa_manager-dev",password:I.REACT_APP_DEMO_QA_PASSWORD||"dev-password",user:{id:"user-002",username:"qa_manager",email:"qa.manager@medtech.com",fullName:"Sarah Johnson",role:"QA Manager",permissions:["view_dashboard","view_metrics","edit_metrics","view_risk","edit_risk","view_capa","edit_capa","approve_capa","view_ncr","edit_ncr","view_documents","edit_documents","share_documents","view_vigilance","edit_vigilance","view_suppliers","edit_suppliers","view_training","edit_training","verify_training","view_change_control","edit_change_control","approve_change_control","view_validation","edit_validation","approve_validation","sign_electronically","view_audit_trail","export_data"],department:"Quality Assurance",title:"QA Manager",status:"Active",createdAt:new Date("2024-01-15"),updatedAt:new Date,passwordLastChanged:new Date("2024-01-15"),mustChangePassword:!1,mfaEnabled:!0,failedLoginAttempts:0}},{username:I.REACT_APP_DEMO_ENG_USERNAME||"engineer-dev",password:I.REACT_APP_DEMO_ENG_PASSWORD||"dev-password",user:{id:"user-003",username:"engineer",email:"engineer@medtech.com",fullName:"Michael Chen",role:"Engineer",permissions:["view_dashboard","view_metrics","view_risk","view_capa","edit_capa","view_ncr","edit_ncr","view_documents","edit_documents","share_documents","view_vigilance","view_suppliers","view_training","view_change_control","edit_change_control","view_validation","edit_validation"],department:"Engineering",title:"Senior Design Engineer",status:"Active",createdAt:new Date("2024-02-01"),updatedAt:new Date,passwordLastChanged:new Date("2024-02-01"),mustChangePassword:!1,mfaEnabled:!1,failedLoginAttempts:0}},{username:I.REACT_APP_DEMO_AUDITOR_USERNAME||"auditor-dev",password:I.REACT_APP_DEMO_AUDITOR_PASSWORD||"dev-password",user:{id:"user-004",username:"auditor",email:"auditor@medtech.com",fullName:"Lisa Anderson",role:"Auditor",permissions:["view_dashboard","view_metrics","view_risk","view_capa","view_ncr","view_documents","view_vigilance","view_suppliers","view_training","view_change_control","view_validation","view_audit_trail","export_data"],department:"Regulatory Affairs",title:"Internal Auditor",status:"Active",createdAt:new Date("2024-02-15"),updatedAt:new Date,passwordLastChanged:new Date("2024-02-15"),mustChangePassword:!1,mfaEnabled:!0,failedLoginAttempts:0}},{username:I.REACT_APP_DEMO_USER_USERNAME||"demo-dev",password:I.REACT_APP_DEMO_USER_PASSWORD||"dev-password",user:{id:"user-005",username:"demo",email:"demo@medtech.com",fullName:"Demo User",role:"Demo",permissions:["view_dashboard","view_metrics","edit_metrics","view_risk","edit_risk","view_capa","edit_capa","view_ncr","edit_ncr","view_documents","edit_documents","share_documents","view_vigilance","edit_vigilance","view_suppliers","edit_suppliers","view_training","edit_training","view_change_control","edit_change_control","view_validation","edit_validation","sign_electronically","view_audit_trail","export_data"],department:"Demonstration",title:"Demo Account",status:"Active",createdAt:new Date("2026-01-01"),updatedAt:new Date,passwordLastChanged:new Date("2026-01-01"),mustChangePassword:!1,mfaEnabled:!1,failedLoginAttempts:0}}],T=U()(le((s,n)=>({currentUser:null,session:null,isAuthenticated:!1,isLoading:!1,login:async(t,a)=>{s({isLoading:!0}),await new Promise(i=>setTimeout(i,500));const r=st.find(i=>i.username===t&&i.password===a);if(r){const i={id:`session-${Date.now()}`,userId:r.user.id,token:`token-${Math.random().toString(36).substring(7)}`,ipAddress:"127.0.0.1",userAgent:navigator.userAgent,createdAt:new Date,expiresAt:new Date(Date.now()+288e5),lastActivity:new Date};return s({currentUser:{...r.user,lastLogin:new Date},session:i,isAuthenticated:!0,isLoading:!1}),!0}return s({isLoading:!1}),!1},loginWithSSO:async t=>{s({isLoading:!0}),await new Promise(i=>setTimeout(i,1e3));const a={id:`sso-${t}-${Date.now()}`,username:`${t}_user`,email:`user@${t}.com`,fullName:`${t.charAt(0).toUpperCase()+t.slice(1)} SSO User`,role:"Demo",permissions:["view_dashboard","view_metrics","edit_metrics","view_risk","edit_risk","view_capa","edit_capa","view_ncr","edit_ncr","view_documents","edit_documents","share_documents","view_vigilance","edit_vigilance","view_suppliers","edit_suppliers","view_training","edit_training","view_change_control","edit_change_control","view_validation","edit_validation","sign_electronically","view_audit_trail","export_data"],department:"SSO Users",title:`${t} SSO Account`,status:"Active",createdAt:new Date,updatedAt:new Date,passwordLastChanged:new Date,mustChangePassword:!1,mfaEnabled:!0,failedLoginAttempts:0},r={id:`session-${Date.now()}`,userId:a.id,token:`sso-token-${Math.random().toString(36).substring(7)}`,ipAddress:"127.0.0.1",userAgent:navigator.userAgent,createdAt:new Date,expiresAt:new Date(Date.now()+480*60*1e3),lastActivity:new Date};return s({currentUser:{...a,lastLogin:new Date},session:r,isAuthenticated:!0,isLoading:!1}),!0},logout:()=>{s({currentUser:null,session:null,isAuthenticated:!1})},checkPermission:t=>{const{currentUser:a}=n();return a?a.permissions.includes(t):!1},hasRole:t=>{const{currentUser:a}=n();return a?a.role===t:!1},updateUser:t=>{const{currentUser:a}=n();a&&s({currentUser:{...a,...t,updatedAt:new Date}})}}),{name:"auth-storage"})),Z=U()((s,n)=>({shortcuts:[],isCommandPaletteOpen:!1,isEnabled:!0,registerShortcut:t=>{s(a=>({shortcuts:[...a.shortcuts.filter(r=>r.id!==t.id),{...t,enabled:!0}]}))},unregisterShortcut:t=>{s(a=>({shortcuts:a.shortcuts.filter(r=>r.id!==t)}))},toggleShortcut:(t,a)=>{s(r=>({shortcuts:r.shortcuts.map(i=>i.id===t?{...i,enabled:a}:i)}))},openCommandPalette:()=>s({isCommandPaletteOpen:!0}),closeCommandPalette:()=>s({isCommandPaletteOpen:!1}),toggleCommandPalette:()=>s(t=>({isCommandPaletteOpen:!t.isCommandPaletteOpen})),setEnabled:t=>s({isEnabled:t}),getShortcutsByCategory:t=>n().shortcuts.filter(a=>a.category===t&&a.enabled)}));let se=!1;function it(){if(se)return;se=!0;const s=n=>{const t=Z.getState();if(t.isEnabled){if((n.metaKey||n.ctrlKey)&&n.key==="k"){n.preventDefault(),t.toggleCommandPalette();return}if(n.key==="Escape"&&t.isCommandPaletteOpen){n.preventDefault(),t.closeCommandPalette();return}for(const a of t.shortcuts){if(!a.enabled)continue;const r=a.keys.map(o=>o.toLowerCase()),i=[];if((n.metaKey||n.ctrlKey)&&i.push("cmd"),n.shiftKey&&i.push("shift"),n.altKey&&i.push("alt"),i.push(n.key.toLowerCase()),r.length===i.length&&r.every(o=>i.includes(o==="ctrl"?"cmd":o))){n.preventDefault(),a.action();return}}}};document.addEventListener("keydown",s)}function E(...s){return Se(Ce(s))}function sa(s,n=2){return s.toFixed(n)}function ia(s){return(typeof s=="string"?new Date(s):s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}function rt(s){return(typeof s=="string"?new Date(s):s).toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"UTC"})}function nt(s){const n=typeof s=="string"?new Date(s):s,t=new Date,a=n.getTime()-t.getTime();return Math.ceil(a/864e5)}function ra(s){return nt(s)<0}function na(s){return{Low:"text-risk-low",Medium:"text-risk-medium",High:"text-risk-high",Critical:"text-risk-critical"}[s]}function oa(s){return{Low:"bg-risk-low",Medium:"bg-risk-medium",High:"bg-risk-high",Critical:"bg-risk-critical"}[s]}function ot(){const{sidebarOpen:s,setSidebarOpen:n,activeView:t,setActiveView:a,getCAPAStats:r,getNCRStats:i,getUnacknowledgedAlerts:c,getValidationStats:o}=D(),{currentUser:u,logout:g}=T(),x=r(),h=i(),f=c().length,y=o(),_=[{id:"dashboard",label:"Dashboard",icon:Ae,category:"core"},{id:"analytics",label:"Analytics",icon:_e,category:"core"},{id:"metrics",label:"Metrics",icon:de,category:"core"},{id:"risk",label:"Risk Matrix",icon:P,badge:f>0?f:void 0,category:"core"},{id:"capa",label:"CAPA",icon:Ie,badge:x.overdue>0?x.overdue:void 0,category:"core"},{id:"ncr",label:"NCR",icon:Re,badge:h.open>0?h.open:void 0,category:"core"},{id:"vigilance",label:"Vigilance",icon:ue,category:"pms"},{id:"lifecycle",label:"Lifecycle",icon:Ee,category:"core"},{id:"validation",label:"Validation",icon:B,badge:y.inProgress>0?y.inProgress:void 0,category:"core"},{id:"aiagents",label:"AI Agents",icon:Me,category:"pms"},{id:"changecontrol",label:"Change Control",icon:De,category:"support"},{id:"suppliers",label:"Suppliers",icon:Oe,category:"support"},{id:"training",label:"Training",icon:me,category:"support"},{id:"documents",label:"Documents",icon:L,category:"support"},{id:"audit",label:"Audit Mode",icon:M,category:"core"},{id:"admin",label:"Admin Panel",icon:Pe,category:"support"},{id:"settings",label:"Settings",icon:pe,category:"support"}].filter(S=>S.id==="admin"?u?.role==="Admin":!0);return e.jsxs("aside",{className:E("fixed left-0 top-0 h-full bg-white dark:bg-gh-surface border-r border-surface-200 dark:border-gh-border transition-all duration-300 z-40 flex flex-col",s?"w-64":"w-16"),children:[e.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-surface-200 dark:border-gh-border",children:[s&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:e.jsx(M,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-gray-900 text-sm",children:"MedTech"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Compliance Suite"})]})]}),e.jsx("button",{onClick:()=>n(!s),className:"p-1.5 rounded-md hover:bg-surface-100 text-gray-500 transition-colors",children:s?e.jsx(Te,{className:"w-5 h-5"}):e.jsx(Le,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"flex-1 py-4 px-2 space-y-1 overflow-y-auto",children:_.map(S=>{const R=S.icon,k=t===S.id;return e.jsxs("button",{onClick:()=>a(S.id),className:E("w-full flex items-center gap-3 px-3 py-2.5 rounded-md transition-colors duration-200",k?"bg-primary-50 dark:bg-gh-blue-strong/15 text-primary-700 dark:text-gh-blue font-medium":"text-gray-600 dark:text-gh-text-secondary hover:bg-surface-100 dark:hover:bg-gh-overlay hover:text-gray-900 dark:hover:text-gh-text"),children:[e.jsx(R,{className:"w-5 h-5 flex-shrink-0"}),s&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1 text-left text-sm",children:S.label}),S.badge&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded-full",children:S.badge})]}),!s&&S.badge&&e.jsx("span",{className:"absolute left-10 top-1 w-2 h-2 bg-red-500 rounded-full"})]},S.id)})}),e.jsx("div",{className:"border-t border-surface-200 dark:border-gh-border",children:s?e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(K,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:u?.fullName||"User"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:u?.role||"Guest"})]})]}),e.jsxs("button",{type:"button",onClick:g,className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),"Logout"]})]}):e.jsx("div",{className:"p-2",children:e.jsx("button",{type:"button",onClick:g,className:"w-full p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Logout",children:e.jsx(q,{className:"w-5 h-5 mx-auto"})})})}),s&&e.jsx("div",{className:"p-4 border-t border-surface-200 dark:border-gh-border",children:e.jsxs("div",{className:"bg-surface-50 dark:bg-gh-overlay rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"Compliance Standards"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx("span",{className:"badge-blue text-[10px]",children:"ISO 13485"}),e.jsx("span",{className:"badge-blue text-[10px]",children:"ISO 14971"}),e.jsx("span",{className:"badge-blue text-[10px]",children:"ISO 10993"}),e.jsx("span",{className:"badge-blue text-[10px]",children:"ISO 9001"})]})]})})]})}function ie(s){const n=document.documentElement;n.classList.add("theme-transition"),s==="dark"?n.classList.add("dark"):n.classList.remove("dark"),setTimeout(()=>n.classList.remove("theme-transition"),300)}function ct(){try{const s=localStorage.getItem("medtech-theme");if(s==="dark"||s==="light")return s}catch{}return typeof window<"u"&&window.matchMedia?.("(prefers-color-scheme: dark)").matches?"dark":"light"}const ke=ct();typeof document<"u"&&ke==="dark"&&document.documentElement.classList.add("dark");const J=U()(s=>({theme:ke,toggleTheme:()=>{s(n=>{const t=n.theme==="dark"?"light":"dark";ie(t);try{localStorage.setItem("medtech-theme",t)}catch{}return{theme:t}})},setTheme:n=>{ie(n);try{localStorage.setItem("medtech-theme",n)}catch{}s({theme:n})}})),lt={capa:e.jsx(M,{className:"w-4 h-4"}),ncr:e.jsx(Q,{className:"w-4 h-4"}),risk:e.jsx(Q,{className:"w-4 h-4"}),document:e.jsx(L,{className:"w-4 h-4"}),supplier:e.jsx(fe,{className:"w-4 h-4"}),training:e.jsx(z,{className:"w-4 h-4"}),change_control:e.jsx(L,{className:"w-4 h-4"}),validation:e.jsx(B,{className:"w-4 h-4"}),metric:e.jsx(L,{className:"w-4 h-4"})},re={capa:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",ncr:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",risk:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",document:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",supplier:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",training:"bg-teal-100 text-teal-700 dark:bg-teal-900/30 dark:text-teal-400",change_control:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400",validation:"bg-cyan-100 text-cyan-700 dark:bg-cyan-900/30 dark:text-cyan-400",metric:"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400"},dt={capa:"CAPA",ncr:"NCR",risk:"Risk",document:"Document",supplier:"Supplier",training:"Training",change_control:"Change Control",validation:"Validation",metric:"Metric"};function ut({isOpen:s,onClose:n,onNavigate:t}){const[a,r]=p.useState(""),[i,c]=p.useState([]),[o,u]=p.useState(0),[g,x]=p.useState([]),h=p.useRef(null),{capas:f,ncrs:y,suppliers:b,trainingRecords:_,changeControls:S,validationReports:R}=D();p.useEffect(()=>{const d=localStorage.getItem("medtech-recent-searches");if(d)try{x(JSON.parse(d))}catch{}},[]);const k=d=>{const m=[d,...g.filter(w=>w!==d)].slice(0,5);x(m),localStorage.setItem("medtech-recent-searches",JSON.stringify(m))},N=p.useCallback(d=>{if(!d.trim()){c([]);return}const m=d.toLowerCase(),w=[];f.forEach(l=>{(l.title.toLowerCase().includes(m)||l.id.toLowerCase().includes(m)||l.description?.toLowerCase().includes(m))&&w.push({id:l.id,type:"capa",title:l.title,subtitle:`${l.type} • ${l.priority} Priority`,status:l.status,matchedField:l.title.toLowerCase().includes(m)?"title":"description"})}),y.forEach(l=>{(l.title.toLowerCase().includes(m)||l.id.toLowerCase().includes(m)||l.description?.toLowerCase().includes(m))&&w.push({id:l.id,type:"ncr",title:l.title,subtitle:`${l.type} • ${l.lotNumber||"No lot"}`,status:l.status})}),b.forEach(l=>{(l.name.toLowerCase().includes(m)||l.supplierCode.toLowerCase().includes(m))&&w.push({id:l.id,type:"supplier",title:l.name,subtitle:`${l.category} • ${l.supplierCode}`,status:l.status})}),_.forEach(l=>{(l.trainingTitle.toLowerCase().includes(m)||l.employeeName.toLowerCase().includes(m))&&w.push({id:l.id,type:"training",title:l.trainingTitle,subtitle:`${l.employeeName} • ${l.department}`,status:l.status})}),S.forEach(l=>{(l.title.toLowerCase().includes(m)||l.referenceNumber.toLowerCase().includes(m))&&w.push({id:l.id,type:"change_control",title:l.title,subtitle:`${l.type} • ${l.referenceNumber}`,status:l.status})}),R.forEach(l=>{(l.title.toLowerCase().includes(m)||l.reportNumber.toLowerCase().includes(m))&&w.push({id:l.id,type:"validation",title:l.title,subtitle:`${l.type} • ${l.reportNumber}`,status:l.status})}),c(w.slice(0,20)),u(0)},[f,y,b,_,S,R]);p.useEffect(()=>{const d=setTimeout(()=>{N(a)},150);return()=>clearTimeout(d)},[a,N]),p.useEffect(()=>{s&&h.current?.focus()},[s]),p.useEffect(()=>{if(!s)return;const d=m=>{switch(m.key){case"ArrowDown":m.preventDefault(),u(w=>Math.min(w+1,i.length-1));break;case"ArrowUp":m.preventDefault(),u(w=>Math.max(w-1,0));break;case"Enter":m.preventDefault(),i[o]&&v(i[o]);break;case"Escape":m.preventDefault(),n();break}};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[s,i,o,n]);const v=d=>{k(d.title),t(d.type,d.id),n(),r("")};return s?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:n}),e.jsx("div",{className:"relative min-h-full flex items-start justify-center pt-[15vh] px-4 pb-20",children:e.jsxs("div",{className:"relative w-full max-w-2xl bg-white dark:bg-gh-surface rounded-xl shadow-2xl border border-surface-200 dark:border-gh-border overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-surface-200 dark:border-gh-border",children:[e.jsx(F,{className:"w-5 h-5 text-surface-400"}),e.jsx("input",{ref:h,type:"text",value:a,onChange:d=>r(d.target.value),placeholder:"Search CAPAs, NCRs, documents, suppliers...",className:"flex-1 bg-transparent text-gray-900 dark:text-gray-100 placeholder-surface-400 focus:outline-none text-lg"}),a&&e.jsx("button",{onClick:()=>r(""),className:"p-1 rounded hover:bg-surface-100 dark:hover:bg-gh-overlay",children:e.jsx(ge,{className:"w-4 h-4 text-surface-400"})}),e.jsx("kbd",{className:"hidden sm:inline-flex items-center px-2 py-1 text-xs font-medium text-surface-500 bg-surface-100 dark:bg-gh-overlay rounded",children:"ESC"})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:i.length>0?e.jsx("div",{className:"py-2",children:i.map((d,m)=>e.jsxs("button",{onClick:()=>v(d),onMouseEnter:()=>u(m),className:`w-full flex items-center gap-3 px-4 py-3 text-left transition-colors ${m===o?"bg-primary-50 dark:bg-gh-blue-strong/15":"hover:bg-surface-50 dark:hover:bg-gh-overlay"}`,children:[e.jsx("div",{className:`p-2 rounded-lg ${re[d.type]}`,children:lt[d.type]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:d.title}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${re[d.type]}`,children:dt[d.type]})]}),d.subtitle&&e.jsx("p",{className:"text-sm text-surface-500 truncate",children:d.subtitle})]}),d.status&&e.jsx("span",{className:"text-xs px-2 py-1 bg-surface-100 dark:bg-gh-overlay text-surface-600 dark:text-surface-400 rounded-full",children:d.status}),e.jsx(Ue,{className:"w-4 h-4 text-surface-400"})]},`${d.type}-${d.id}`))}):a?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(F,{className:"w-12 h-12 text-surface-300 mx-auto mb-3"}),e.jsxs("p",{className:"text-surface-500",children:['No results found for "',a,'"']}),e.jsx("p",{className:"text-sm text-surface-400 mt-1",children:"Try a different search term"})]}):e.jsxs("div",{className:"py-6",children:[g.length>0&&e.jsxs("div",{className:"px-4 mb-4",children:[e.jsxs("h3",{className:"text-xs font-medium text-surface-500 uppercase tracking-wider mb-2 flex items-center gap-2",children:[e.jsx(he,{className:"w-3 h-3"})," Recent Searches"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(d=>e.jsx("button",{onClick:()=>r(d),className:"px-3 py-1.5 text-sm bg-surface-100 dark:bg-gh-overlay hover:bg-surface-200 dark:hover:bg-gh-border text-surface-700 dark:text-surface-300 rounded-lg transition-colors",children:d},d))})]}),e.jsxs("div",{className:"px-4",children:[e.jsx("h3",{className:"text-xs font-medium text-surface-500 uppercase tracking-wider mb-2",children:"Search Tips"}),e.jsxs("ul",{className:"text-sm text-surface-500 space-y-1",children:[e.jsx("li",{children:"• Search by CAPA ID, NCR number, or title"}),e.jsx("li",{children:"• Find suppliers by name or code"}),e.jsx("li",{children:"• Search training records by employee or course"}),e.jsx("li",{children:"• Press Enter to select, Esc to close"})]})]})]})}),e.jsxs("div",{className:"px-4 py-2 bg-surface-50 dark:bg-gh-overlay border-t border-surface-200 dark:border-gh-border flex items-center justify-between text-xs text-surface-500",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-200 dark:bg-gh-border rounded",children:"↑"}),e.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-200 dark:bg-gh-border rounded",children:"↓"}),"Navigate"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-200 dark:bg-gh-border rounded",children:"↵"}),"Select"]})]}),e.jsxs("span",{children:[i.length," results"]})]})]})})]}):null}const V=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#f97316"];function mt(){const{currentUser:s}=T(),[n,t]=p.useState([]);return p.useEffect(()=>{const a=[{id:"user-1",name:"Sarah Johnson",color:V[0],currentView:"capa",lastActivity:new Date,isEditing:!0,editingEntity:"CAPA-2024-042"},{id:"user-2",name:"Mike Chen",color:V[1],currentView:"ncr",lastActivity:new Date(Date.now()-12e4)},{id:"user-3",name:"Emily Davis",color:V[2],currentView:"dashboard",lastActivity:new Date(Date.now()-6e4)}];s&&a.push({id:s.id,name:s.fullName,color:V[3],currentView:"dashboard",lastActivity:new Date}),t(a.filter(i=>i.id!==s?.id));const r=setInterval(()=>{t(i=>i.map(c=>({...c,lastActivity:Math.random()>.7?new Date:c.lastActivity,isEditing:Math.random()>.8?!c.isEditing:c.isEditing})))},3e4);return()=>clearInterval(r)},[s]),{activeUsers:n,currentUser:s}}function G(s){return s.split(" ").map(n=>n[0]).join("").toUpperCase().slice(0,2)}function pt(s){const n=Math.floor((new Date().getTime()-s.getTime())/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:`${Math.floor(n/3600)}h ago`}function gt({compact:s=!1}){const{activeUsers:n}=mt(),[t,a]=p.useState(!1),r=n.filter(i=>i.isEditing);return s?e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-surface-100 dark:hover:bg-gh-overlay transition-colors",children:[e.jsxs("div",{className:"flex -space-x-2",children:[n.slice(0,3).map(i=>e.jsx("div",{className:"w-7 h-7 rounded-full border-2 border-white dark:border-gh-surface flex items-center justify-center text-white text-xs font-medium",style:{backgroundColor:i.color},title:i.name,children:G(i.name)},i.id)),n.length>3&&e.jsxs("div",{className:"w-7 h-7 rounded-full border-2 border-white dark:border-gh-surface bg-surface-300 dark:bg-gh-border flex items-center justify-center text-xs font-medium text-gray-700 dark:text-gray-300",children:["+",n.length-3]})]}),e.jsxs("span",{className:"text-sm text-surface-600 dark:text-surface-400 hidden md:inline",children:[n.length," online"]})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>a(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-72 bg-white dark:bg-gh-surface rounded-lg shadow-lg border border-surface-200 dark:border-gh-border z-20 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-surface-200 dark:border-gh-border",children:e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Team Activity"]})}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:n.map(i=>e.jsxs("div",{className:"px-4 py-3 hover:bg-surface-50 dark:hover:bg-gh-overlay flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center text-white text-sm font-medium",style:{backgroundColor:i.color},children:G(i.name)}),e.jsx(X,{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 ${new Date().getTime()-i.lastActivity.getTime()<6e4?"text-green-500 fill-green-500":"text-yellow-500 fill-yellow-500"}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:i.name}),e.jsx("p",{className:"text-xs text-surface-500 flex items-center gap-1",children:i.isEditing?e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"w-3 h-3"}),"Editing ",i.editingEntity]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-3 h-3"}),pt(i.lastActivity)," in ",i.currentView]})})]})]},i.id))}),r.length>0&&e.jsx("div",{className:"px-4 py-2 bg-yellow-50 dark:bg-yellow-900/10 border-t border-surface-200 dark:border-gh-border",children:e.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-400 flex items-center gap-1",children:[e.jsx(ee,{className:"w-3 h-3"}),r.length," user",r.length!==1?"s":""," currently editing"]})})]})]})]}):e.jsxs("div",{className:"card p-4",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Team Activity (",n.length," online)"]}),e.jsx("div",{className:"space-y-3",children:n.map(i=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-medium",style:{backgroundColor:i.color},children:G(i.name)}),e.jsx(X,{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 ${new Date().getTime()-i.lastActivity.getTime()<6e4?"text-green-500 fill-green-500":"text-yellow-500 fill-yellow-500"}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:i.name}),e.jsx("p",{className:"text-xs text-surface-500",children:i.isEditing?`Editing ${i.editingEntity}`:`Viewing ${i.currentView}`})]})]},i.id))})]})}function ht(){const{activeView:s,auditMode:n,setAuditMode:t,getUnacknowledgedAlerts:a,exportAuditReport:r,setActiveView:i}=D(),{currentUser:c,logout:o}=T(),{theme:u,toggleTheme:g}=J(),{openCommandPalette:x}=Z(),[h,f]=p.useState(!1),[y,b]=p.useState(!1),_=a(),S=_.filter(v=>v.type==="Critical"),R=p.useCallback((v,d)=>{i({capa:"capa",ncr:"ncr",risk:"risk",document:"documents",supplier:"suppliers",training:"training",change_control:"changecontrol",validation:"validation",metric:"metrics"}[v]),b(!1)},[i]),k={dashboard:"Dashboard",analytics:"Advanced Analytics",metrics:"Metrics Management",risk:"ISO 14971 Risk Matrix",capa:"CAPA Management",ncr:"Non-Conformance Reports",lifecycle:"Lifecycle Management",audit:"Audit Mode",settings:"Settings",vigilance:"Post-Market Vigilance",suppliers:"Supplier Management",training:"Training Records",changecontrol:"Change Control",documents:"Document Control",aiagents:"AI Agents",admin:"Administration",validation:"Validation Reports"},N=()=>{const v=r(),d=new Blob([v],{type:"application/json"}),m=URL.createObjectURL(d),w=document.createElement("a");w.href=m,w.download=`compliance-report-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(m)};return e.jsxs("header",{className:"h-16 bg-white dark:bg-gh-surface border-b border-surface-200 dark:border-gh-border flex items-center justify-between px-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:k[s]}),e.jsx("p",{className:"text-xs text-gray-500",children:rt(new Date)})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 pl-3 pr-2 py-2 w-64 text-sm bg-surface-50 dark:bg-gh-overlay border border-surface-200 dark:border-gh-border rounded-lg hover:border-primary-300 dark:hover:border-gh-blue transition-colors text-left",children:[e.jsx(F,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"flex-1 text-gray-400",children:"Search..."}),e.jsx("kbd",{className:"hidden sm:inline-flex items-center px-1.5 py-0.5 text-xs font-medium text-surface-400 bg-surface-200 dark:bg-gh-border rounded",children:"⌘K"})]}),e.jsx("button",{onClick:x,className:"p-2 rounded-lg bg-surface-100 dark:bg-gh-overlay hover:bg-surface-200 dark:hover:bg-gh-border transition-colors",title:"Command Palette (⌘K)",children:e.jsx(xe,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),e.jsxs("button",{type:"button",onClick:N,className:"btn-secondary btn-sm gap-2",children:[e.jsx(ye,{className:"w-4 h-4"}),"Export"]}),e.jsx("button",{type:"button",onClick:g,className:E("p-2 rounded-lg transition-colors",u==="dark"?"bg-gh-overlay text-gh-yellow hover:bg-gh-border":"bg-surface-100 text-gray-600 hover:bg-surface-200"),title:u==="dark"?"Switch to light mode":"Switch to dark mode",children:u==="dark"?e.jsx(W,{className:"w-5 h-5"}):e.jsx(Y,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>t(!n),className:E("flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors",n?"bg-primary-600 text-white hover:bg-primary-700":"bg-surface-100 text-gray-600 hover:bg-surface-200"),children:n?e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-4 h-4"}),"Audit Mode ON"]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4"}),"Audit Mode"]})}),e.jsx(gt,{compact:!0}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>f(!h),className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-surface-100 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center",children:e.jsx(K,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"text-left hidden md:block",children:[e.jsx("p",{className:"text-sm font-medium text-surface-900",children:c?.fullName}),e.jsx("p",{className:"text-xs text-surface-500",children:c?.role})]})]}),h&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>f(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gh-surface rounded-lg shadow-lg dark:shadow-dark-elevated border border-surface-200 dark:border-gh-border z-20",children:[e.jsxs("div",{className:"p-4 border-b border-surface-200",children:[e.jsx("p",{className:"font-medium text-surface-900",children:c?.fullName}),e.jsx("p",{className:"text-sm text-surface-600",children:c?.email}),e.jsxs("p",{className:"text-xs text-surface-500 mt-1",children:[c?.department," • ",c?.title]})]}),e.jsx("div",{className:"p-2",children:e.jsxs("button",{onClick:()=>{o(),f(!1)},className:"w-full flex items-center gap-2 px-3 py-2 text-left text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),"Sign Out"]})})]})]})]}),e.jsx("div",{className:"relative",children:e.jsxs("button",{className:"p-2 rounded-lg hover:bg-surface-100 transition-colors relative",children:[e.jsx(ue,{className:"w-5 h-5 text-gray-600"}),_.length>0&&e.jsx("span",{className:E("absolute -top-1 -right-1 w-5 h-5 flex items-center justify-center text-xs font-bold rounded-full",S.length>0?"bg-red-500 text-white":"bg-yellow-500 text-white"),children:_.length})]})})]}),e.jsx(ut,{isOpen:y,onClose:()=>b(!1),onNavigate:R})]})}const ft={"ISO 13485:2016":{name:"ISO 13485:2016",fullName:"Medical devices — Quality management systems — Requirements for regulatory purposes",description:"Specifies requirements for a quality management system where an organization needs to demonstrate its ability to provide medical devices and related services that consistently meet customer and applicable regulatory requirements.",clauses:{"4.1":"Quality management system - General requirements","4.2":"Quality management system - Documentation requirements","5.1":"Management commitment","5.2":"Customer focus","5.3":"Quality policy","5.4":"Planning","5.5":"Responsibility, authority and communication","5.6":"Management review","6.1":"Provision of resources","6.2":"Human resources","6.3":"Infrastructure","6.4":"Work environment and contamination control","7.1":"Planning of product realization","7.2":"Customer-related processes","7.3":"Design and development","7.4":"Purchasing","7.5":"Production and service provision","7.5.1":"Control of production and service provision","7.5.2":"Cleanliness of product","7.5.3":"Installation activities","7.5.4":"Servicing activities","7.5.5":"Particular requirements for sterile medical devices","7.5.6":"Validation of processes for production and service provision","7.5.7":"Particular requirements for validation of processes for sterilization and sterile barrier systems","7.5.8":"Identification","7.5.9":"Traceability","7.5.10":"Customer property","7.5.11":"Preservation of product","7.6":"Control of monitoring and measuring equipment","8.1":"General (Measurement, analysis and improvement)","8.2":"Monitoring and measurement","8.2.1":"Feedback","8.2.2":"Complaint handling","8.2.3":"Reporting to regulatory authorities","8.2.4":"Internal audit","8.2.5":"Monitoring and measurement of processes","8.2.6":"Monitoring and measurement of product","8.3":"Control of nonconforming product","8.4":"Analysis of data","8.5":"Improvement","8.5.1":"General","8.5.2":"Corrective action","8.5.3":"Preventive action"}},"ISO 14971":{name:"ISO 14971:2019",fullName:"Medical devices — Application of risk management to medical devices",description:"Specifies terminology, principles and a process for risk management of medical devices, including software as a medical device and in vitro diagnostic medical devices.",clauses:{"4.1":"Risk management process","4.2":"Management responsibilities","4.3":"Qualification of personnel","4.4":"Risk management plan","4.5":"Risk management file","5.1":"Risk analysis process","5.2":"Intended use and reasonably foreseeable misuse","5.3":"Identification of characteristics related to safety","5.4":"Identification of hazards and hazardous situations","5.5":"Risk estimation",6:"Risk evaluation","7.1":"Risk control option analysis","7.2":"Implementation of risk control measures","7.3":"Residual risk evaluation","7.4":"Benefit-risk analysis","7.5":"Risks arising from risk control measures","7.6":"Completeness of risk control",8:"Evaluation of overall residual risk",9:"Risk management review",10:"Production and post-production activities"}},"ISO 10993":{name:"ISO 10993",fullName:"Biological evaluation of medical devices",description:"Series of standards for evaluating the biocompatibility of medical devices.",clauses:{"10993-1":"Evaluation and testing within a risk management process","10993-2":"Animal welfare requirements","10993-3":"Tests for genotoxicity, carcinogenicity and reproductive toxicity","10993-4":"Selection of tests for interactions with blood","10993-5":"Tests for in vitro cytotoxicity","10993-6":"Tests for local effects after implantation","10993-7":"Ethylene oxide sterilization residuals","10993-9":"Framework for identification and quantification of potential degradation products","10993-10":"Tests for skin sensitization","10993-11":"Tests for systemic toxicity","10993-12":"Sample preparation and reference materials","10993-13":"Identification and quantification of degradation products from polymeric medical devices","10993-14":"Identification and quantification of degradation products from ceramics","10993-15":"Identification and quantification of degradation products from metals and alloys","10993-16":"Toxicokinetic study design for degradation products and leachables","10993-17":"Establishment of allowable limits for leachable substances","10993-18":"Chemical characterization of medical device materials within a risk management process","10993-23":"Tests for irritation"}},"ISO 9001":{name:"ISO 9001:2015",fullName:"Quality management systems — Requirements",description:"Specifies requirements for a quality management system when an organization needs to demonstrate its ability to consistently provide products and services that meet customer and applicable statutory and regulatory requirements.",clauses:{"4.1":"Understanding the organization and its context","4.2":"Understanding the needs and expectations of interested parties","4.3":"Determining the scope of the quality management system","4.4":"Quality management system and its processes","5.1":"Leadership and commitment","5.2":"Policy","5.3":"Organizational roles, responsibilities and authorities","6.1":"Actions to address risks and opportunities","6.2":"Quality objectives and planning to achieve them","6.3":"Planning of changes","7.1":"Resources","7.2":"Competence","7.3":"Awareness","7.4":"Communication","7.5":"Documented information","8.1":"Operational planning and control","8.2":"Requirements for products and services","8.3":"Design and development of products and services","8.4":"Control of externally provided processes, products and services","8.5":"Production and service provision","8.6":"Release of products and services","8.7":"Control of nonconforming outputs","9.1":"Monitoring, measurement, analysis and evaluation","9.2":"Internal audit","9.3":"Management review","10.1":"General (Improvement)","10.2":"Nonconformity and corrective action","10.3":"Continual improvement"}},"ISO 11135":{name:"ISO 11135:2014",fullName:"Sterilization of health-care products — Ethylene oxide — Requirements for the development, validation and routine control of a sterilization process for medical devices",description:"Specifies requirements for the development, validation and routine control of an ethylene oxide sterilization process for medical devices.",clauses:{6:"Characterization of sterilizing agent",7:"Process and equipment characterization",8:"Product definition",9:"Process definition",10:"Validation",11:"Routine monitoring and control",12:"Product release from sterilization",13:"Maintaining process effectiveness"}},"ISO 11137":{name:"ISO 11137",fullName:"Sterilization of health care products — Radiation",description:"Series of standards for radiation sterilization of medical devices.",clauses:{"11137-1":"Requirements for development, validation and routine control of a sterilization process for medical devices","11137-2":"Establishing the sterilization dose","11137-3":"Guidance on dosimetric aspects of development, validation and routine control"}},"ISO 11607":{name:"ISO 11607",fullName:"Packaging for terminally sterilized medical devices",description:"Specifies requirements and test methods for materials, preformed sterile barrier systems, sterile barrier systems and packaging systems.",clauses:{"11607-1":"Requirements for materials, sterile barrier systems and packaging systems","11607-2":"Validation requirements for forming, sealing and assembly processes"}},"ISO 14644":{name:"ISO 14644",fullName:"Cleanrooms and associated controlled environments",description:"Series of standards covering cleanroom classification, testing, design, and operations.",clauses:{"14644-1":"Classification of air cleanliness by particle concentration","14644-2":"Monitoring to provide evidence of cleanroom performance related to air cleanliness by particle concentration","14644-3":"Test methods","14644-4":"Design, construction and start-up","14644-5":"Operations","14644-7":"Separative devices (clean air hoods, gloveboxes, isolators and mini-environments)","14644-8":"Classification of air cleanliness by chemical concentration"}},"IEC 62304":{name:"IEC 62304:2006/AMD1:2015",fullName:"Medical device software — Software life cycle processes",description:"Defines the life cycle requirements for medical device software development and maintenance.",clauses:{"4.1":"Quality management system","4.2":"Risk management","4.3":"Software safety classification","5.1":"Software development planning","5.2":"Software requirements analysis","5.3":"Software architectural design","5.4":"Software detailed design","5.5":"Software unit implementation","5.6":"Software integration and integration testing","5.7":"Software system testing","5.8":"Software release","6.1":"Software maintenance plan","6.2":"Problem and modification analysis","6.3":"Modification implementation","7.1":"Configuration identification","7.2":"Change control","7.3":"Configuration status accounting","8.1":"Problem reports","8.2":"Analysis of change requests","8.3":"Approval of change requests","9.1":"Software of unknown provenance (SOUP)"}},"IEC 60601":{name:"IEC 60601-1",fullName:"Medical electrical equipment — Part 1: General requirements for basic safety and essential performance",description:"Applies to the basic safety and essential performance of medical electrical equipment.",clauses:{4:"General requirements",5:"General requirements for testing of ME EQUIPMENT",6:"Classification of ME EQUIPMENT and ME SYSTEMS",7:"ME EQUIPMENT identification, marking and documents",8:"Protection against electrical HAZARDS from ME EQUIPMENT",9:"Protection against MECHANICAL HAZARDS of ME EQUIPMENT and ME SYSTEMS",10:"Protection against unwanted and excessive radiation HAZARDS",11:"Protection against excessive temperatures and other HAZARDS",12:"Accuracy of controls and instruments and protection against hazardous outputs",13:"HAZARDOUS SITUATIONS and fault conditions",14:"PROGRAMMABLE ELECTRICAL MEDICAL SYSTEMS (PEMS)",15:"Construction of ME EQUIPMENT",16:"ME SYSTEMS",17:"Electromagnetic compatibility of ME EQUIPMENT and ME SYSTEMS"}},"IEC 62366":{name:"IEC 62366-1:2015",fullName:"Medical devices — Part 1: Application of usability engineering to medical devices",description:"Specifies a process for manufacturers to analyse, specify, develop and evaluate the usability of medical devices.",clauses:{"4.1":"Usability engineering process","4.2":"Risk management","5.1":"Prepare USE SPECIFICATION","5.2":"Identify USER INTERFACE characteristics related to safety and potential USE ERRORS","5.3":"Identify known or foreseeable HAZARDS and HAZARDOUS SITUATIONS","5.4":"Identify and describe HAZARD-RELATED USE SCENARIOS","5.5":"Select HAZARD-RELATED USE SCENARIOS for SUMMATIVE EVALUATION","5.6":"Establish USER INTERFACE SPECIFICATION","5.7":"Establish USER INTERFACE EVALUATION PLAN","5.8":"Design, implement, and FORMATIVE EVALUATION","5.9":"SUMMATIVE EVALUATION of USABILITY of the USER INTERFACE"}},"ISO 14155":{name:"ISO 14155:2020",fullName:"Clinical investigation of medical devices for human subjects — Good clinical practice",description:"Addresses good clinical practice for the design, conduct, recording and reporting of clinical investigations.",clauses:{4:"Ethical considerations",5:"Clinical investigation planning",6:"Clinical investigation conduct",7:"Monitoring, auditing and inspection",8:"Documentation and data management",9:"Handling and storage of investigational medical devices",10:"Safety reporting",11:"Statistical considerations",12:"Clinical investigation report"}},"ISO 15223":{name:"ISO 15223-1:2021",fullName:"Medical devices — Symbols to be used with information to be supplied by the manufacturer",description:"Specifies symbols used for labelling and information supplied by manufacturers of medical devices.",clauses:{"5.1":"Symbols for general information","5.2":"Symbols indicating warnings or precautions","5.3":"Symbols indicating storage and handling conditions","5.4":"Symbols for IVD medical devices"}}},ca={"FDA 21 CFR Part 820":{name:"21 CFR Part 820",fullName:"Quality System Regulation",description:"FDA regulations for medical device quality systems in the United States.",subparts:{A:"General Provisions (820.1-820.5)",B:"Quality System Requirements (820.20-820.25)",C:"Design Controls (820.30)",D:"Document Controls (820.40)",E:"Purchasing Controls (820.50)",F:"Identification and Traceability (820.60-820.65)",G:"Production and Process Controls (820.70-820.75)",H:"Acceptance Activities (820.80-820.86)",I:"Nonconforming Product (820.90)",J:"Corrective and Preventive Action (820.100)",K:"Labeling and Packaging Control (820.120-820.130)",L:"Handling, Storage, Distribution, and Installation (820.140-820.170)",M:"Records (820.180-820.198)",N:"Servicing (820.200)",O:"Statistical Techniques (820.250)"}},"EU MDR 2017/745":{name:"EU MDR 2017/745",fullName:"European Medical Device Regulation",description:"European Union regulation on medical devices.",chapters:{I:"Scope and definitions",II:"Making available, obligations of economic operators, reprocessing, CE marking",III:"Identification and traceability, UDI, registration",IV:"Notified bodies",V:"Classification and conformity assessment",VI:"Clinical evaluation and clinical investigations",VII:"Post-market surveillance, vigilance, market surveillance",VIII:"Cooperation between Member States",IX:"Confidentiality, data protection, funding",X:"Final provisions"}},"EU IVDR 2017/746":{name:"EU IVDR 2017/746",fullName:"European In Vitro Diagnostic Regulation",description:"European Union regulation on in vitro diagnostic medical devices.",chapters:{I:"Scope and definitions",II:"Making available, obligations of economic operators, CE marking",III:"Identification and traceability, UDI, registration",IV:"Notified bodies",V:"Classification and conformity assessment",VI:"Clinical evidence and performance evaluation",VII:"Post-market surveillance, vigilance, market surveillance"}}};function xt(){const{getDashboardMetrics:s,getUnacknowledgedAlerts:n,acknowledgeAlert:t,selectedMetricId:a}=D(),r=s(),i=n(),c=r.find(o=>o.metric.id===a);return e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-4 border-b border-surface-200",children:[e.jsx(qe,{className:"w-5 h-5 text-primary-600"}),e.jsx("h2",{className:"font-semibold text-gray-900",children:"Compliance Guardrail"})]}),i.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-red-500"}),"Active Alerts (",i.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:i.slice(0,5).map(o=>e.jsx("div",{className:E("p-3 rounded-lg text-sm",o.type==="Critical"&&"bg-red-50 border border-red-200",o.type==="Warning"&&"bg-yellow-50 border border-yellow-200",o.type==="Info"&&"bg-blue-50 border border-blue-200"),children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:o.title}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:o.message}),o.isoReference&&e.jsxs("p",{className:"text-xs text-primary-600 mt-1 font-medium",children:[o.isoReference.standard,":",o.isoReference.clause]})]}),e.jsx("button",{onClick:()=>t(o.id),className:"text-xs text-gray-500 hover:text-gray-700",children:"Dismiss"})]})},o.id))})]}),c&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4 text-primary-500"}),"ISO Reference: ",c.metric.shortName]}),e.jsxs("div",{className:"bg-surface-50 rounded-lg p-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Metric Status"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:E("w-3 h-3 rounded-full",c.status==="green"&&"bg-compliance-green",c.status==="yellow"&&"bg-compliance-yellow",c.status==="red"&&"bg-compliance-red")}),e.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:c.status})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"ISO Mappings"}),e.jsx("div",{className:"mt-1 space-y-1",children:c.metric.isoMappings.map((o,u)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium text-primary-700",children:[o.standard,":",o.clause]}),e.jsx("p",{className:"text-xs text-gray-600",children:o.description})]},u))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Risk Impact"}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:c.metric.riskImpact})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Workaround Suggestion"}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:c.metric.workaroundSuggestion})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Compliance Status"}),e.jsx("div",{className:"space-y-2",children:Object.entries(r.reduce((o,u)=>(o[u.status]=(o[u.status]||0)+1,o),{})).map(([o,u])=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:E("w-2 h-2 rounded-full",o==="green"&&"bg-compliance-green",o==="yellow"&&"bg-compliance-yellow",o==="red"&&"bg-compliance-red")}),e.jsx("span",{className:"capitalize",children:o})]}),e.jsxs("span",{className:"font-medium",children:[u," metrics"]})]},o))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Quick Reference"}),e.jsx("div",{className:"space-y-2",children:Object.entries(ft).slice(0,4).map(([o,u])=>e.jsxs("div",{className:"p-2 bg-surface-50 rounded-lg hover:bg-surface-100 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:u.name}),e.jsx(Fe,{className:"w-3 h-3 text-gray-400"})]}),e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[u.description.slice(0,60),"..."]})]},o))})]}),e.jsxs("div",{className:"p-3 bg-primary-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-primary-800 mb-2",children:"ALCOA+ Data Integrity"}),e.jsxs("ul",{className:"text-xs text-primary-700 space-y-1",children:[e.jsxs("li",{children:[e.jsx(O,{className:"w-3 h-3 inline mr-1"}),"Attributable - All entries tracked by user"]}),e.jsxs("li",{children:[e.jsx(O,{className:"w-3 h-3 inline mr-1"}),"Legible - Digital records maintained"]}),e.jsxs("li",{children:[e.jsx(O,{className:"w-3 h-3 inline mr-1"}),"Contemporaneous - Timestamped entries"]}),e.jsxs("li",{children:[e.jsx(O,{className:"w-3 h-3 inline mr-1"}),"Original - Source data preserved"]}),e.jsxs("li",{children:[e.jsx(O,{className:"w-3 h-3 inline mr-1"}),"Accurate - Validated calculations"]})]})]})]})}function yt({children:s}){const{sidebarOpen:n,auditMode:t}=D();return e.jsxs("div",{className:"flex h-screen bg-surface-50 dark:bg-gh-canvas",children:[e.jsx(ot,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-64":"ml-16"}`,children:[e.jsx(ht,{}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("main",{className:`flex-1 overflow-y-auto p-6 ${t?"mr-80":""}`,children:e.jsx("div",{className:"max-w-7xl mx-auto",children:s})}),t&&e.jsx("div",{className:"w-80 border-l border-surface-200 dark:border-gh-border bg-white dark:bg-gh-surface overflow-y-auto",children:e.jsx(xt,{})})]})]})]})}class ne extends p.Component{state={hasError:!1,error:null,errorInfo:null};static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,t){this.setState({errorInfo:t}),this.props.onError?.(n,t),console.error("ErrorBoundary caught an error:",n,t),typeof window<"u"&&window.electronAPI&&window.electronAPI.saveData("last-error",{error:n.message,stack:n.stack,componentStack:t.componentStack,timestamp:new Date().toISOString()})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleGoHome=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.hash="#dashboard",window.location.reload()};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-surface-50 dark:bg-gh-canvas flex items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-lg w-full bg-white dark:bg-gh-surface rounded-xl shadow-xl border border-surface-200 dark:border-gh-border p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(P,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"An unexpected error occurred. Our team has been notified and is working to fix the issue."}),this.state.error&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6 text-left",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:[this.state.error.name,": ",this.state.error.message]}),this.state.errorInfo&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-red-600 dark:text-red-400 cursor-pointer hover:underline",children:"Show technical details"}),e.jsx("pre",{className:"mt-2 text-xs text-red-700 dark:text-red-300 overflow-auto max-h-40 bg-red-100 dark:bg-red-900/20 p-2 rounded",children:this.state.errorInfo.componentStack})]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs("button",{onClick:this.handleReset,className:"inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(ve,{className:"w-4 h-4"}),"Try Again"]}),e.jsxs("button",{onClick:this.handleGoHome,className:"inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-surface-100 hover:bg-surface-200 dark:bg-gh-overlay dark:hover:bg-gh-border text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors",children:[e.jsx(we,{className:"w-4 h-4"}),"Go to Dashboard"]}),e.jsx("button",{onClick:this.handleReload,className:"inline-flex items-center justify-center gap-2 px-4 py-2.5 border border-surface-300 dark:border-gh-border hover:bg-surface-50 dark:hover:bg-gh-overlay text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors",children:"Reload Page"})]}),e.jsxs("p",{className:"mt-6 text-xs text-gray-500 dark:text-gray-500",children:["Error ID: ",Date.now().toString(36)," • ISO 13485:2016 Clause 8.2.3 - Customer Communication"]})]})}):this.props.children}}const bt=()=>`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Ne=U()((s,n)=>({toasts:[],addToast:t=>{const a=bt(),r={...t,id:a,duration:t.duration??5e3};return s(i=>({toasts:[...i.toasts,r]})),r.duration&&r.duration>0&&setTimeout(()=>{n().removeToast(a)},r.duration),a},removeToast:t=>{s(a=>({toasts:a.toasts.filter(r=>r.id!==t)}))},clearAll:()=>{s({toasts:[]})},success:(t,a)=>n().addToast({type:"success",title:t,message:a}),error:(t,a)=>n().addToast({type:"error",title:t,message:a,duration:8e3}),warning:(t,a)=>n().addToast({type:"warning",title:t,message:a,duration:6e3}),info:(t,a)=>n().addToast({type:"info",title:t,message:a})})),vt={success:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",icon:e.jsx(O,{className:"w-5 h-5"}),iconColor:"text-green-600 dark:text-green-400"},error:{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",icon:e.jsx($e,{className:"w-5 h-5"}),iconColor:"text-red-600 dark:text-red-400"},warning:{bg:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-800",icon:e.jsx(P,{className:"w-5 h-5"}),iconColor:"text-yellow-600 dark:text-yellow-400"},info:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",icon:e.jsx(be,{className:"w-5 h-5"}),iconColor:"text-blue-600 dark:text-blue-400"}};function wt({toast:s}){const{removeToast:n}=Ne(),t=vt[s.type];return e.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-lg border shadow-lg backdrop-blur-sm animate-slide-in ${t.bg} ${t.border}`,role:"alert",children:[e.jsx("span",{className:t.iconColor,children:t.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.title}),s.message&&e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:s.message}),s.action&&e.jsx("button",{onClick:s.action.onClick,className:"mt-2 text-sm font-medium text-primary-600 hover:text-primary-700 dark:text-primary-400",children:s.action.label})]}),e.jsx("button",{onClick:()=>n(s.id),className:"flex-shrink-0 p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:e.jsx(ge,{className:"w-4 h-4 text-gray-500"})})]})}function oe(){const{toasts:s}=Ne();return s.length===0?null:e.jsxs("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm w-full",children:[s.map(n=>e.jsx(wt,{toast:n},n.id)),e.jsx("style",{children:`
        @keyframes slide-in {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        .animate-slide-in {
          animation: slide-in 0.3s ease-out;
        }
      `})]})}function kt(){const[s,n]=p.useState(""),[t,a]=p.useState(0),r=p.useRef(null),{isCommandPaletteOpen:i,closeCommandPalette:c}=Z(),{setActiveView:o,saveData:u,exportAuditReport:g}=D(),{logout:x}=T(),{theme:h,toggleTheme:f}=J(),y=p.useMemo(()=>[{id:"nav-dashboard",title:"Go to Dashboard",icon:e.jsx(we,{className:"w-4 h-4"}),category:"navigation",action:()=>o("dashboard"),keywords:["home","main"]},{id:"nav-metrics",title:"Go to Metrics",icon:e.jsx(de,{className:"w-4 h-4"}),category:"navigation",action:()=>o("metrics"),keywords:["kpi","performance"]},{id:"nav-capa",title:"Go to CAPA",icon:e.jsx(M,{className:"w-4 h-4"}),category:"navigation",action:()=>o("capa"),keywords:["corrective","preventive"]},{id:"nav-ncr",title:"Go to NCR",icon:e.jsx(P,{className:"w-4 h-4"}),category:"navigation",action:()=>o("ncr"),keywords:["nonconformance","defect"]},{id:"nav-risk",title:"Go to Risk Matrix",icon:e.jsx(P,{className:"w-4 h-4"}),category:"navigation",action:()=>o("risk"),keywords:["hazard","iso14971"]},{id:"nav-documents",title:"Go to Documents",icon:e.jsx(L,{className:"w-4 h-4"}),category:"navigation",action:()=>o("documents"),keywords:["files","dms"]},{id:"nav-suppliers",title:"Go to Suppliers",icon:e.jsx(fe,{className:"w-4 h-4"}),category:"navigation",action:()=>o("suppliers"),keywords:["vendor","asl"]},{id:"nav-training",title:"Go to Training",icon:e.jsx(me,{className:"w-4 h-4"}),category:"navigation",action:()=>o("training"),keywords:["education","certification"]},{id:"nav-change",title:"Go to Change Control",icon:e.jsx(Ge,{className:"w-4 h-4"}),category:"navigation",action:()=>o("changecontrol"),keywords:["ecn","revision"]},{id:"nav-validation",title:"Go to Validation",icon:e.jsx(B,{className:"w-4 h-4"}),category:"navigation",action:()=>o("validation"),keywords:["evt","dvt","pvt","dvpr"]},{id:"nav-vigilance",title:"Go to Vigilance",icon:e.jsx(Qe,{className:"w-4 h-4"}),category:"navigation",action:()=>o("vigilance"),keywords:["complaint","adverse"]},{id:"nav-lifecycle",title:"Go to Lifecycle",icon:e.jsx(He,{className:"w-4 h-4"}),category:"navigation",action:()=>o("lifecycle"),keywords:["product","phase"]},{id:"nav-ai",title:"Go to AI Agents",icon:e.jsx(Be,{className:"w-4 h-4"}),category:"navigation",action:()=>o("aiagents"),keywords:["llm","automation"]},{id:"nav-admin",title:"Go to Admin",icon:e.jsx(z,{className:"w-4 h-4"}),category:"navigation",action:()=>o("admin"),keywords:["users","roles"]},{id:"nav-settings",title:"Go to Settings",icon:e.jsx(pe,{className:"w-4 h-4"}),category:"navigation",action:()=>o("settings"),keywords:["preferences","config"]},{id:"action-new-capa",title:"Create New CAPA",subtitle:"Corrective/Preventive Action",icon:e.jsx(te,{className:"w-4 h-4"}),category:"actions",action:()=>{o("capa")},keywords:["add"]},{id:"action-new-ncr",title:"Create New NCR",subtitle:"Non-Conformance Report",icon:e.jsx(te,{className:"w-4 h-4"}),category:"actions",action:()=>{o("ncr")},keywords:["add"]},{id:"action-save",title:"Save All Data",icon:e.jsx(ve,{className:"w-4 h-4"}),category:"actions",action:()=>u(),keywords:["persist","store"]},{id:"action-export",title:"Export Audit Report",icon:e.jsx(ye,{className:"w-4 h-4"}),category:"actions",action:()=>g(),keywords:["download","pdf"]},{id:"settings-theme",title:h==="dark"?"Switch to Light Mode":"Switch to Dark Mode",icon:h==="dark"?e.jsx(W,{className:"w-4 h-4"}):e.jsx(Y,{className:"w-4 h-4"}),category:"settings",action:f,keywords:["color","appearance"]},{id:"settings-logout",title:"Sign Out",icon:e.jsx(q,{className:"w-4 h-4"}),category:"settings",action:x,keywords:["exit","leave"]}],[h,o,f,x,u,g]),b=p.useMemo(()=>{if(!s.trim())return y;const k=s.toLowerCase();return y.filter(N=>{const v=N.title.toLowerCase().includes(k),d=N.subtitle?.toLowerCase().includes(k),m=N.keywords?.some(w=>w.includes(k));return v||d||m})},[y,s]),_=p.useMemo(()=>{const k={navigation:[],actions:[],settings:[]};return b.forEach(N=>{k[N.category]?.push(N)}),k},[b]);if(p.useEffect(()=>{i&&(n(""),a(0),setTimeout(()=>r.current?.focus(),50))},[i]),p.useEffect(()=>{if(!i)return;const k=N=>{switch(N.key){case"ArrowDown":N.preventDefault(),a(v=>Math.min(v+1,b.length-1));break;case"ArrowUp":N.preventDefault(),a(v=>Math.max(v-1,0));break;case"Enter":N.preventDefault(),b[t]&&(b[t].action(),c());break}};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[i,b,t,c]),!i)return null;const S={navigation:"Navigation",actions:"Actions",settings:"Settings"};let R=0;return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:c}),e.jsx("div",{className:"relative min-h-full flex items-start justify-center pt-[15vh] px-4 pb-20",children:e.jsxs("div",{className:"relative w-full max-w-xl bg-white dark:bg-gh-surface rounded-xl shadow-2xl border border-surface-200 dark:border-gh-border overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-surface-200 dark:border-gh-border",children:[e.jsx(xe,{className:"w-5 h-5 text-surface-400"}),e.jsx("input",{ref:r,type:"text",value:s,onChange:k=>{n(k.target.value),a(0)},placeholder:"Type a command or search...",className:"flex-1 bg-transparent text-gray-900 dark:text-gray-100 placeholder-surface-400 focus:outline-none"}),e.jsx("kbd",{className:"hidden sm:inline-flex items-center px-2 py-1 text-xs font-medium text-surface-500 bg-surface-100 dark:bg-gh-overlay rounded",children:"ESC"})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto py-2",children:b.length===0?e.jsxs("div",{className:"py-8 text-center text-surface-500",children:[e.jsx(F,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No commands found"})]}):Object.entries(_).map(([k,N])=>N.length===0?null:e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"px-4 py-1.5 text-xs font-medium text-surface-500 uppercase tracking-wider",children:S[k]}),N.map(v=>{const d=R++,m=d===t;return e.jsxs("button",{onClick:()=>{v.action(),c()},onMouseEnter:()=>a(d),className:`w-full flex items-center gap-3 px-4 py-2.5 text-left transition-colors ${m?"bg-primary-50 dark:bg-gh-blue-strong/15 text-primary-900 dark:text-gh-blue":"hover:bg-surface-50 dark:hover:bg-gh-overlay text-gray-900 dark:text-gray-100"}`,children:[e.jsx("span",{className:`flex-shrink-0 ${m?"text-primary-600 dark:text-gh-blue":"text-surface-500"}`,children:v.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-medium",children:v.title}),v.subtitle&&e.jsx("span",{className:"ml-2 text-sm text-surface-500",children:v.subtitle})]})]},v.id)})]},k))}),e.jsx("div",{className:"px-4 py-2 bg-surface-50 dark:bg-gh-overlay border-t border-surface-200 dark:border-gh-border flex items-center justify-between text-xs text-surface-500",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-200 dark:bg-gh-border rounded",children:"↑"}),e.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-200 dark:bg-gh-border rounded",children:"↓"}),"Navigate"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-200 dark:bg-gh-border rounded",children:"↵"}),"Select"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-200 dark:bg-gh-border rounded",children:"⌘K"}),"Toggle"]})]})})]})})]})}const Nt=()=>e.jsxs("svg",{width:"21",height:"21",viewBox:"0 0 21 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{width:"10",height:"10",fill:"#f25022"}),e.jsx("rect",{x:"11",width:"10",height:"10",fill:"#00a4ef"}),e.jsx("rect",{y:"11",width:"10",height:"10",fill:"#7fba00"}),e.jsx("rect",{x:"11",y:"11",width:"10",height:"10",fill:"#ffb900"})]}),jt=()=>{const[s,n]=p.useState(""),[t,a]=p.useState(""),[r,i]=p.useState(""),{login:c,loginWithSSO:o,isLoading:u}=T(),{theme:g,toggleTheme:x}=J(),h=async y=>{if(y.preventDefault(),i(""),!s||!t){i("Please enter username and password");return}await c(s,t)||i("Invalid username or password")},f=async y=>{i("");try{await o(y)||i(`Failed to authenticate with ${y}`)}catch(b){i(`SSO authentication error: ${b}`)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-surface-900 via-primary-900 to-surface-900 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-40 left-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"})]}),e.jsx("button",{type:"button",onClick:x,className:"absolute top-6 right-6 z-20 p-2.5 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20 transition-colors",title:g==="dark"?"Switch to light mode":"Switch to dark mode",children:g==="dark"?e.jsx(W,{className:"w-5 h-5"}):e.jsx(Y,{className:"w-5 h-5"})}),e.jsxs("div",{className:"max-w-md w-full relative z-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-primary-500 to-primary-700 rounded-2xl mb-4 shadow-2xl",children:e.jsx(M,{className:"w-12 h-12 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-2 drop-shadow-lg",children:"MedTech Compliance Suite"}),e.jsx("p",{className:"text-surface-300 text-lg",children:"ISO 13485 Quality Management System"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"21 CFR Part 11 Compliant • ALCOA+ Data Integrity"})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gh-surface/95 backdrop-blur-xl rounded-2xl shadow-2xl p-8 border border-white/20 dark:border-gh-border",children:[e.jsx("h2",{className:"text-2xl font-semibold text-surface-900 mb-6 text-center",children:"Sign In to Your Account"}),r&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[e.jsx(Q,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:r})})]}),e.jsxs("form",{onSubmit:h,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-surface-400"}),e.jsx("input",{type:"text",value:s,onChange:y=>n(y.target.value),className:"w-full pl-10 pr-4 py-3 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Enter your username",disabled:u})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ke,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-surface-400"}),e.jsx("input",{type:"password",value:t,onChange:y=>a(y.target.value),className:"w-full pl-10 pr-4 py-3 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Enter your password",disabled:u})]})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white font-semibold py-3 px-4 rounded-lg transition-all transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg",children:u?"Signing in...":"Sign In"})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-surface-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white/90 dark:bg-gh-surface/95 text-surface-500 font-medium",children:"Or continue with"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{type:"button",onClick:()=>f("google"),disabled:u,className:"w-full flex items-center justify-center gap-3 bg-white dark:bg-gh-overlay hover:bg-gray-50 dark:hover:bg-gh-border border-2 border-surface-200 dark:border-gh-border text-surface-700 font-semibold py-3 px-4 rounded-lg transition-all transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",children:[e.jsx(We,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{children:"Sign in with Google"})]}),e.jsxs("button",{type:"button",onClick:()=>f("github"),disabled:u,className:"w-full flex items-center justify-center gap-3 bg-gray-900 hover:bg-gray-800 text-white font-semibold py-3 px-4 rounded-lg transition-all transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",children:[e.jsx(Ye,{className:"w-5 h-5"}),e.jsx("span",{children:"Sign in with GitHub"})]}),e.jsxs("button",{type:"button",onClick:()=>f("microsoft"),disabled:u,className:"w-full flex items-center justify-center gap-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-all transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",children:[e.jsx(Nt,{}),e.jsx("span",{children:"Sign in with Microsoft"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-gh-blue-strong/10 dark:to-gh-overlay border border-blue-200 dark:border-gh-blue-strong/30 rounded-lg",children:[e.jsxs("p",{className:"text-xs font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),"Demo Credentials Available:"]}),e.jsxs("div",{className:"text-xs text-blue-800 space-y-1.5 grid grid-cols-2 gap-x-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Demo:"})," demo / demo2026"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Admin:"})," admin / admin123"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"QA Mgr:"})," qa_manager / qa123"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Engineer:"})," engineer / eng123"]}),e.jsxs("p",{className:"col-span-2",children:[e.jsx("strong",{children:"Auditor:"})," auditor / audit123"]})]})]}),e.jsxs("div",{className:"mt-4 text-center text-xs text-surface-500",children:[e.jsx("p",{children:"Protected by multi-factor authentication"}),e.jsx("p",{children:"All sessions are encrypted and monitored"})]})]}),e.jsxs("div",{className:"mt-6 text-center text-surface-300 text-sm",children:[e.jsx("p",{className:"font-medium",children:"FDA 21 CFR Part 11 & Part 820 Compliant"}),e.jsx("p",{className:"mt-2",children:"© 2026 MedTech Compliance Solutions LLC"}),e.jsx("p",{className:"text-xs mt-1 text-surface-400",children:"Katie Emma & Paul Moore • St. Louis, MO"})]})]}),e.jsx("style",{children:`
        @keyframes blob {
          0% {
            transform: translate(0px, 0px) scale(1);
          }
          33% {
            transform: translate(30px, -50px) scale(1.1);
          }
          66% {
            transform: translate(-20px, 20px) scale(0.9);
          }
          100% {
            transform: translate(0px, 0px) scale(1);
          }
        }
        .animate-blob {
          animation: blob 7s infinite;
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
      `})]})},ce=j.lazy(()=>C(()=>import("./Dashboard-X-BLujZp.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),St=j.lazy(()=>C(()=>import("./MetricsView-D6E3FlDK.js"),__vite__mapDeps([7,1,2,3,4,5,6]))),Ct=j.lazy(()=>C(()=>import("./RiskMatrixView-DP78LcpT.js"),__vite__mapDeps([8,1,2,3,5,6]))),At=j.lazy(()=>C(()=>import("./CAPAView-BvMLQff3.js"),__vite__mapDeps([9,1,2,3,6,5]))),_t=j.lazy(()=>C(()=>import("./NCRView-DdbersWp.js"),__vite__mapDeps([10,1,2,3,4,5,6]))),It=j.lazy(()=>C(()=>import("./LifecycleView-CEoStGGh.js"),__vite__mapDeps([11,1,2,3,5,6]))),Rt=j.lazy(()=>C(()=>import("./AuditView-b_f7L7y9.js"),__vite__mapDeps([12,1,2,3,5,6]))),Et=j.lazy(()=>C(()=>import("./SettingsView-ClDeIdBL.js"),__vite__mapDeps([13,1,2,3,5,6]))),Mt=j.lazy(()=>C(()=>import("./VigilanceView-Bmo7avg2.js"),__vite__mapDeps([14,1,2,3,5,6]))),Dt=j.lazy(()=>C(()=>import("./SupplierView-DSjhCTtU.js"),__vite__mapDeps([15,1,2,3,5,6]))),Ot=j.lazy(()=>C(()=>import("./TrainingView-DsQKnhek.js"),__vite__mapDeps([16,1,2,3,5,6]))),Pt=j.lazy(()=>C(()=>import("./ChangeControlView-CklKH65q.js"),__vite__mapDeps([17,1,2,3,5,6]))),Tt=j.lazy(()=>C(()=>import("./DocumentsView-DHeLIHcN.js"),__vite__mapDeps([18,1,2,3,5,6]))),Lt=j.lazy(()=>C(()=>import("./AdminView-D5V77qA5.js"),__vite__mapDeps([19,1,2,3,6]))),Ut=j.lazy(()=>C(()=>import("./AIAgentsView-BMwP42-M.js"),__vite__mapDeps([20,1,2,3]))),Vt=j.lazy(()=>C(()=>import("./ValidationView-BsCaYsSA.js"),__vite__mapDeps([21,1,2,3,6,5]))),qt=j.lazy(()=>C(()=>import("./AnalyticsDashboard-Cg0lUH-J.js"),__vite__mapDeps([22,1,2,3,4,5,6])));it();function Ft(){const{activeView:s,loadData:n}=D(),{isAuthenticated:t}=T();if(p.useEffect(()=>{n()},[n]),!t)return e.jsxs(ne,{children:[e.jsx(jt,{}),e.jsx(oe,{})]});const a=()=>{switch(s){case"dashboard":return e.jsx(ce,{});case"metrics":return e.jsx(St,{});case"risk":return e.jsx(Ct,{});case"capa":return e.jsx(At,{});case"ncr":return e.jsx(_t,{});case"vigilance":return e.jsx(Mt,{});case"lifecycle":return e.jsx(It,{});case"changecontrol":return e.jsx(Pt,{});case"suppliers":return e.jsx(Dt,{});case"training":return e.jsx(Ot,{});case"documents":return e.jsx(Tt,{});case"aiagents":return e.jsx(Ut,{});case"admin":return e.jsx(Lt,{});case"audit":return e.jsx(Rt,{});case"settings":return e.jsx(Et,{});case"validation":return e.jsx(Vt,{});case"analytics":return e.jsx(qt,{});default:return e.jsx(ce,{})}};return e.jsxs(ne,{children:[e.jsx(yt,{children:e.jsx(p.Suspense,{fallback:e.jsx("div",{className:"p-8 text-center",children:"Loading..."}),children:a()})}),e.jsx(kt,{}),e.jsx(oe,{})]})}je.createRoot(document.getElementById("root")).render(e.jsx(j.StrictMode,{children:e.jsx(Ft,{})}));export{ft as I,H as M,ca as R,ia as a,ta as b,E as c,ea as d,Jt as e,sa as f,$ as g,Zt as h,Yt as i,Xt as j,rt as k,Bt as l,Kt as m,Wt as n,oa as o,na as p,ra as q,nt as r,aa as s,T as t,D as u};
