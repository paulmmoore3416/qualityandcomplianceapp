import{a as h,j as e}from"./vendor-react-Coyc-9rJ.js";import{u as A,k as C,c as i,I as R,R as S}from"./index-BahTgtJs.js";import{D as O,S as k,x as p,o as M,A as j,w as L}from"./vendor-icons-CczvD28u.js";import"./vendor-DW9sAQKa.js";import"./vendor-zustand-Bm6pua9f.js";import"./vendor-uuid-CtRu48qb.js";function V(){const{getDashboardMetrics:g,getCAPAStats:N,riskAssessments:d,exportAuditReport:u}=A(),[c,f]=h.useState("overview"),[o,b]=h.useState("30d"),a=g(),l=N(),m=a.filter(s=>s.status==="green").length,r=Math.round(m/a.length*100),v=s=>{const t=u();{const w=new Blob([t],{type:"application/json"}),x=URL.createObjectURL(w),n=document.createElement("a");n.href=x,n.download=`audit-report-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(x)}},y=[{id:"overview",label:"Overview",icon:k},{id:"metrics",label:"Metrics",icon:p},{id:"capa",label:"CAPA",icon:M},{id:"ncr",label:"NCR",icon:j},{id:"risk",label:"Risk",icon:j},{id:"standards",label:"Standards",icon:L}];return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Audit Mode"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Comprehensive compliance report generation and audit preparation"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:o,onChange:s=>b(s.target.value),className:"input w-auto",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"all",children:"All time"})]}),e.jsxs("button",{onClick:()=>v(),className:"btn-primary gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),"Export Report"]})]})]}),e.jsx("div",{className:i("card",r>=90&&"bg-gradient-to-r from-green-500 to-green-600",r>=70&&r<90&&"bg-gradient-to-r from-yellow-500 to-yellow-600",r<70&&"bg-gradient-to-r from-red-500 to-red-600"),children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/80",children:"Overall Compliance Score"}),e.jsxs("p",{className:"text-5xl font-bold mt-1",children:[r,"%"]}),e.jsxs("p",{className:"text-white/80 mt-2",children:[m," of ",a.length," metrics within target"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white/80",children:"Report Generated"}),e.jsx("p",{className:"font-medium",children:C(new Date)}),e.jsx("p",{className:"text-white/80 mt-4",children:"Audit Period"}),e.jsx("p",{className:"font-medium",children:o==="all"?"All Time":`Last ${o.replace("d"," days")}`})]})]})}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:y.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>f(s.id),className:i("flex items-center gap-2 px-4 py-2 rounded-lg transition-colors whitespace-nowrap",c===s.id?"bg-primary-100 text-primary-700 font-medium":"bg-surface-100 text-gray-600 hover:bg-surface-200"),children:[e.jsx(t,{className:"w-4 h-4"}),s.label]},s.id)})}),c==="overview"&&e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Metrics Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Metrics Tracked"}),e.jsx("span",{className:"font-semibold",children:a.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-compliance-green"}),"Green (Compliant)"]}),e.jsx("span",{className:"font-semibold",children:a.filter(s=>s.status==="green").length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-compliance-yellow"}),"Yellow (Caution)"]}),e.jsx("span",{className:"font-semibold",children:a.filter(s=>s.status==="yellow").length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-compliance-red"}),"Red (Non-compliant)"]}),e.jsx("span",{className:"font-semibold",children:a.filter(s=>s.status==="red").length})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"CAPA Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total CAPAs"}),e.jsx("span",{className:"font-semibold",children:l.total})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Open"}),e.jsx("span",{className:"font-semibold",children:l.open})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:i("text-gray-600",l.overdue>0&&"text-red-600"),children:"Overdue"}),e.jsx("span",{className:i("font-semibold",l.overdue>0&&"text-red-600"),children:l.overdue})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Closed This Month"}),e.jsx("span",{className:"font-semibold",children:l.closedThisMonth})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Risk Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Assessments"}),e.jsx("span",{className:"font-semibold",children:d.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Open Mitigations"}),e.jsx("span",{className:"font-semibold",children:d.filter(s=>s.mitigationRequired&&s.status!=="Closed").length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"High/Critical"}),e.jsx("span",{className:"font-semibold text-red-600",children:d.filter(s=>(s.riskLevel==="High"||s.riskLevel==="Critical")&&s.status!=="Closed").length})]})]})]})]}),c==="metrics"&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Metrics Compliance Report"}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Metric"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Current Value"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"ISO Reference"}),e.jsx("th",{children:"Trend"})]})}),e.jsx("tbody",{children:a.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("p",{className:"font-medium",children:s.metric.shortName}),e.jsx("p",{className:"text-xs text-gray-500",children:s.metric.name})]}),e.jsx("td",{children:s.metric.category}),e.jsx("td",{className:"font-mono",children:s.currentValue?`${s.currentValue.value.toFixed(1)}${s.metric.unit}`:"--"}),e.jsx("td",{children:e.jsx("span",{className:i("badge",s.status==="green"&&"badge-green",s.status==="yellow"&&"badge-yellow",s.status==="red"&&"badge-red"),children:s.status})}),e.jsxs("td",{className:"text-primary-600 text-sm",children:[s.metric.isoMappings[0]?.standard,":",s.metric.isoMappings[0]?.clause]}),e.jsx("td",{className:i(s.trend==="improving"&&"text-green-600",s.trend==="declining"&&"text-red-600",s.trend==="stable"&&"text-gray-500"),children:s.trend})]},s.metric.id))})]})})]}),c==="standards"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ISO Standards Reference"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(R).slice(0,6).map(([s,t])=>e.jsxs("div",{className:"p-4 bg-surface-50 rounded-lg",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.fullName}),e.jsx("p",{className:"text-xs text-gray-600 mt-2 line-clamp-2",children:t.description})]},s))})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Regulatory Frameworks"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:Object.entries(S).map(([s,t])=>e.jsxs("div",{className:"p-4 bg-primary-50 rounded-lg",children:[e.jsx("p",{className:"font-semibold text-primary-900",children:t.name}),e.jsx("p",{className:"text-sm text-primary-700 mt-1",children:t.fullName})]},s))})]})]}),e.jsx("div",{className:"card bg-green-50 border-green-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(p,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-900",children:"ALCOA+ Data Integrity Compliance"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"All records in this system maintain ALCOA+ principles: Attributable (user tracked), Legible (digital format), Contemporaneous (timestamped), Original (source preserved), Accurate (validated calculations), plus Complete, Consistent, Enduring, and Available."})]})]})})]})}export{V as default};
