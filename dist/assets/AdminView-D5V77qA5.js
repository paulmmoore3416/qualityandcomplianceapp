import{a as g,j as e}from"./vendor-react-Coyc-9rJ.js";import{k as I,X as J,at as me,au as ue,av as pe,aw as xe,S as V,ax as he,K as ge,ak as fe,ay as ve,p as O,x as R,V as U,a9 as B,A as $,h as F,m as we,a1 as ye,z as Q,az as be,aA as je,aB as Ne,a2 as q,d as _e,a6 as ke,D as Ae,o as G}from"./vendor-icons-CczvD28u.js";import{v as Ce}from"./vendor-uuid-CtRu48qb.js";import"./vendor-DW9sAQKa.js";const L=[{key:"view_dashboard",label:"View Dashboard",category:"Dashboard"},{key:"view_metrics",label:"View Metrics",category:"Metrics"},{key:"edit_metrics",label:"Edit Metrics",category:"Metrics"},{key:"view_risk",label:"View Risk Matrix",category:"Risk"},{key:"edit_risk",label:"Edit Risk Matrix",category:"Risk"},{key:"view_capa",label:"View CAPA",category:"CAPA"},{key:"edit_capa",label:"Edit CAPA",category:"CAPA"},{key:"approve_capa",label:"Approve CAPA",category:"CAPA"},{key:"view_ncr",label:"View NCR",category:"NCR"},{key:"edit_ncr",label:"Edit NCR",category:"NCR"},{key:"view_documents",label:"View Documents",category:"Documents"},{key:"edit_documents",label:"Edit Documents",category:"Documents"},{key:"delete_documents",label:"Delete Documents",category:"Documents"},{key:"share_documents",label:"Share Documents",category:"Documents"},{key:"view_vigilance",label:"View Vigilance",category:"Vigilance"},{key:"edit_vigilance",label:"Edit Vigilance",category:"Vigilance"},{key:"view_suppliers",label:"View Suppliers",category:"Suppliers"},{key:"edit_suppliers",label:"Edit Suppliers",category:"Suppliers"},{key:"approve_suppliers",label:"Approve Suppliers",category:"Suppliers"},{key:"view_training",label:"View Training",category:"Training"},{key:"edit_training",label:"Edit Training",category:"Training"},{key:"verify_training",label:"Verify Training",category:"Training"},{key:"view_change_control",label:"View Change Control",category:"Change Control"},{key:"edit_change_control",label:"Edit Change Control",category:"Change Control"},{key:"approve_change_control",label:"Approve Change Control",category:"Change Control"},{key:"view_validation",label:"View Validation",category:"Validation"},{key:"edit_validation",label:"Edit Validation",category:"Validation"},{key:"approve_validation",label:"Approve Validation",category:"Validation"},{key:"sign_electronically",label:"Electronic Signatures",category:"System"},{key:"view_audit_trail",label:"View Audit Trail",category:"System"},{key:"manage_users",label:"Manage Users",category:"Admin"},{key:"manage_roles",label:"Manage Roles",category:"Admin"},{key:"system_settings",label:"System Settings",category:"Admin"},{key:"export_data",label:"Export Data",category:"Data"},{key:"import_data",label:"Import Data",category:"Data"}],T={Admin:L.map(w=>w.key),"QA Manager":["view_dashboard","view_metrics","edit_metrics","view_risk","edit_risk","view_capa","edit_capa","approve_capa","view_ncr","edit_ncr","view_documents","edit_documents","share_documents","view_vigilance","edit_vigilance","view_suppliers","edit_suppliers","view_training","edit_training","verify_training","view_change_control","edit_change_control","approve_change_control","view_validation","edit_validation","approve_validation","sign_electronically","view_audit_trail","export_data"],Engineer:["view_dashboard","view_metrics","view_risk","view_capa","edit_capa","view_ncr","edit_ncr","view_documents","edit_documents","share_documents","view_vigilance","view_suppliers","view_training","view_change_control","edit_change_control","view_validation","edit_validation"],Auditor:["view_dashboard","view_metrics","view_risk","view_capa","view_ncr","view_documents","view_vigilance","view_suppliers","view_training","view_change_control","view_validation","view_audit_trail","export_data"],Viewer:["view_dashboard","view_metrics","view_risk","view_capa","view_ncr","view_documents","view_vigilance","view_suppliers","view_training","view_change_control","view_validation"],Guest:["view_dashboard"],Demo:["view_dashboard","view_metrics","edit_metrics","view_risk","edit_risk","view_capa","edit_capa","view_ncr","edit_ncr","view_documents","edit_documents","share_documents","view_vigilance","edit_vigilance","view_suppliers","edit_suppliers","view_training","edit_training","view_change_control","edit_change_control","view_validation","edit_validation","sign_electronically","view_audit_trail","export_data"]},Se=["Admin","QA Manager","Engineer","Auditor","Viewer","Guest","Demo"];function De({isOpen:w,onClose:j,onSave:A,user:d}){const f=!!d,[r,n]=g.useState({fullName:"",username:"",email:"",phone:"",department:"",title:"",role:"Viewer",status:"Active",mfaEnabled:!1,mustChangePassword:!0,password:""}),[u,v]=g.useState([]),[C,S]=g.useState(!1),[N,m]=g.useState("details"),[c,_]=g.useState({});g.useEffect(()=>{d?(n({fullName:d.fullName,username:d.username,email:d.email,phone:d.phone||"",department:d.department||"",title:d.title||"",role:d.role,status:d.status,mfaEnabled:d.mfaEnabled,mustChangePassword:d.mustChangePassword,password:""}),v(d.permissions)):(n({fullName:"",username:"",email:"",phone:"",department:"",title:"",role:"Viewer",status:"Active",mfaEnabled:!1,mustChangePassword:!0,password:""}),v(T.Viewer)),m("details"),_({})},[d,w]);const b=t=>{n(i=>({...i,role:t})),v(T[t]||[])},p=t=>{v(i=>i.includes(t)?i.filter(y=>y!==t):[...i,t])},k=t=>{const i=L.filter(x=>x.category===t).map(x=>x.key),y=i.every(x=>u.includes(x));v(y?x=>x.filter(h=>!i.includes(h)):x=>[...new Set([...x,...i])])},D=()=>{const t={};return r.fullName.trim()||(t.fullName="Full name is required"),r.username.trim()||(t.username="Username is required"),r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(t.email="Invalid email format"):t.email="Email is required",!f&&!r.password&&(t.password="Password is required for new users"),r.password&&r.password.length<6&&(t.password="Password must be at least 6 characters"),_(t),Object.keys(t).length===0},M=()=>{if(!D())return;const t=new Date,i={id:d?.id||`user-${Ce().substring(0,8)}`,username:r.username,email:r.email,fullName:r.fullName,role:r.role,permissions:u,department:r.department||void 0,title:r.title||void 0,phone:r.phone||void 0,status:r.status,lastLogin:d?.lastLogin,createdAt:d?.createdAt||t,updatedAt:t,passwordLastChanged:d?.passwordLastChanged||t,mustChangePassword:r.mustChangePassword,mfaEnabled:r.mfaEnabled,failedLoginAttempts:d?.failedLoginAttempts||0,accountLockedUntil:d?.accountLockedUntil};A(i),j()};if(!w)return null;const P=[...new Set(L.map(t=>t.category))];return e.jsx("div",{className:"modal-overlay",onClick:j,children:e.jsxs("div",{className:"modal-content max-w-3xl",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-surface-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(I,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-900",children:f?"Edit User":"Add New User"}),e.jsx("p",{className:"text-sm text-surface-500",children:f?`Editing ${d.fullName}`:"Create a new user account"})]})]}),e.jsx("button",{type:"button",onClick:j,className:"p-2 hover:bg-surface-100 rounded-lg transition-colors",children:e.jsx(J,{className:"w-5 h-5 text-surface-400"})})]}),e.jsxs("div",{className:"flex border-b border-surface-200 px-6",children:[e.jsx("button",{type:"button",onClick:()=>m("details"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${N==="details"?"border-primary-500 text-primary-600":"border-transparent text-surface-500 hover:text-surface-700"}`,children:"User Details"}),e.jsxs("button",{type:"button",onClick:()=>m("permissions"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${N==="permissions"?"border-primary-500 text-primary-600":"border-transparent text-surface-500 hover:text-surface-700"}`,children:["Permissions (",u.length,")"]})]}),e.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[N==="details"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700 mb-1",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-surface-400"}),e.jsx("input",{type:"text",value:r.fullName,onChange:t=>n(i=>({...i,fullName:t.target.value})),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 ${c.fullName?"border-red-500":"border-surface-300"}`,placeholder:"John Doe"})]}),c.fullName&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:c.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700 mb-1",children:"Username *"}),e.jsx("input",{type:"text",value:r.username,onChange:t=>n(i=>({...i,username:t.target.value})),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 ${c.username?"border-red-500":"border-surface-300"}`,placeholder:"jdoe",disabled:f}),c.username&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:c.username})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700 mb-1",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-surface-400"}),e.jsx("input",{type:"email",value:r.email,onChange:t=>n(i=>({...i,email:t.target.value})),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 ${c.email?"border-red-500":"border-surface-300"}`,placeholder:"john.doe@medtech.com"})]}),c.email&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:c.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700 mb-1",children:"Phone"}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-surface-400"}),e.jsx("input",{type:"tel",value:r.phone,onChange:t=>n(i=>({...i,phone:t.target.value})),className:"w-full pl-10 pr-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"+1 (555) 000-0000"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700 mb-1",children:"Department"}),e.jsxs("div",{className:"relative",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-surface-400"}),e.jsx("input",{type:"text",value:r.department,onChange:t=>n(i=>({...i,department:t.target.value})),className:"w-full pl-10 pr-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Engineering"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700 mb-1",children:"Job Title"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-surface-400"}),e.jsx("input",{type:"text",value:r.title,onChange:t=>n(i=>({...i,title:t.target.value})),className:"w-full pl-10 pr-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Senior Engineer"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-surface-700 mb-1",children:[e.jsx(V,{className:"w-4 h-4 inline mr-1"}),"Role *"]}),e.jsx("select",{value:r.role,onChange:t=>b(t.target.value),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:Se.map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("p",{className:"text-xs text-surface-500 mt-1",children:"Changing role resets permissions to defaults"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700 mb-1",children:"Status"}),e.jsxs("select",{value:r.status,onChange:t=>n(i=>({...i,status:t.target.value})),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Locked",children:"Locked"}),e.jsx("option",{value:"Pending",children:"Pending"})]})]})]}),(!f||r.password)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700 mb-1",children:f?"New Password":"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:C?"text":"password",value:r.password,onChange:t=>n(i=>({...i,password:t.target.value})),className:`w-full px-3 py-2 pr-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 ${c.password?"border-red-500":"border-surface-300"}`,placeholder:f?"Leave blank to keep current":"Enter password"}),e.jsx("button",{type:"button",onClick:()=>S(!C),className:"absolute right-3 top-1/2 -translate-y-1/2 text-surface-400 hover:text-surface-600",children:C?e.jsx(he,{className:"w-4 h-4"}):e.jsx(ge,{className:"w-4 h-4"})})]}),c.password&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:c.password})]}),f&&!r.password&&e.jsx("button",{type:"button",onClick:()=>n(t=>({...t,password:" "})),className:"text-sm text-primary-600 hover:text-primary-800 font-medium",children:"Reset Password"}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.mfaEnabled,onChange:t=>n(i=>({...i,mfaEnabled:t.target.checked})),className:"w-4 h-4 text-primary-600 border-surface-300 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-surface-700",children:"Enable Multi-Factor Authentication (MFA)"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.mustChangePassword,onChange:t=>n(i=>({...i,mustChangePassword:t.target.checked})),className:"w-4 h-4 text-primary-600 border-surface-300 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-surface-700",children:"Require password change on next login"})]})]})]}),N==="permissions"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-surface-600",children:[u.length," of ",L.length," permissions enabled for ",e.jsx("strong",{children:r.role})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>v(L.map(t=>t.key)),className:"text-xs text-primary-600 hover:text-primary-800 font-medium",children:"Select All"}),e.jsx("span",{className:"text-surface-300",children:"|"}),e.jsx("button",{type:"button",onClick:()=>v([]),className:"text-xs text-red-600 hover:text-red-800 font-medium",children:"Clear All"}),e.jsx("span",{className:"text-surface-300",children:"|"}),e.jsx("button",{type:"button",onClick:()=>v(T[r.role]||[]),className:"text-xs text-surface-600 hover:text-surface-800 font-medium",children:"Reset to Role Default"})]})]}),P.map(t=>{const i=L.filter(h=>h.category===t),y=i.every(h=>u.includes(h.key)),x=i.some(h=>u.includes(h.key));return e.jsxs("div",{className:"border border-surface-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2.5 bg-surface-50 cursor-pointer",onClick:()=>k(t),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:y,ref:h=>{h&&(h.indeterminate=x&&!y)},onChange:()=>k(t),className:"w-4 h-4 text-primary-600 border-surface-300 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-surface-900",children:t})]}),e.jsxs("span",{className:"text-xs text-surface-500",children:[i.filter(h=>u.includes(h.key)).length,"/",i.length]})]}),e.jsx("div",{className:"px-4 py-2 grid grid-cols-2 gap-1",children:i.map(h=>e.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u.includes(h.key),onChange:()=>p(h.key),className:"w-3.5 h-3.5 text-primary-600 border-surface-300 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-xs text-surface-700",children:h.label})]},h.key))})]},t)})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-surface-200",children:[e.jsx("button",{type:"button",onClick:j,className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"button",onClick:M,className:"btn-primary",children:f?"Save Changes":"Create User"})]})]})})}const z=[{category:"Dashboard & Metrics",permissions:[{key:"view_dashboard",label:"View Dashboard",description:"Access the main dashboard"},{key:"view_metrics",label:"View Metrics",description:"View quality metrics and KPIs"},{key:"edit_metrics",label:"Edit Metrics",description:"Create and edit metric entries"}]},{category:"Risk Management",permissions:[{key:"view_risk",label:"View Risk Matrix",description:"View ISO 14971 risk assessments"},{key:"edit_risk",label:"Edit Risk Matrix",description:"Create and modify risk assessments"}]},{category:"CAPA Management",permissions:[{key:"view_capa",label:"View CAPA",description:"View corrective and preventive actions"},{key:"edit_capa",label:"Edit CAPA",description:"Create and modify CAPAs"},{key:"approve_capa",label:"Approve CAPA",description:"Approve or reject CAPAs"}]},{category:"Non-Conformance",permissions:[{key:"view_ncr",label:"View NCR",description:"View non-conformance reports"},{key:"edit_ncr",label:"Edit NCR",description:"Create and modify NCRs"}]},{category:"Document Control",permissions:[{key:"view_documents",label:"View Documents",description:"Access controlled documents"},{key:"edit_documents",label:"Edit Documents",description:"Create and edit documents"},{key:"delete_documents",label:"Delete Documents",description:"Remove documents from system"},{key:"share_documents",label:"Share Documents",description:"Share documents with users"}]},{category:"Post-Market Surveillance",permissions:[{key:"view_vigilance",label:"View Vigilance",description:"View vigilance reports"},{key:"edit_vigilance",label:"Edit Vigilance",description:"Create and modify vigilance reports"}]},{category:"Supplier Management",permissions:[{key:"view_suppliers",label:"View Suppliers",description:"View approved supplier list"},{key:"edit_suppliers",label:"Edit Suppliers",description:"Create and modify supplier records"},{key:"approve_suppliers",label:"Approve Suppliers",description:"Approve or reject suppliers"}]},{category:"Training",permissions:[{key:"view_training",label:"View Training",description:"View training records"},{key:"edit_training",label:"Edit Training",description:"Create and assign training"},{key:"verify_training",label:"Verify Training",description:"Verify training completion"}]},{category:"Change Control",permissions:[{key:"view_change_control",label:"View Change Control",description:"View change requests"},{key:"edit_change_control",label:"Edit Change Control",description:"Create and modify changes"},{key:"approve_change_control",label:"Approve Changes",description:"Approve or reject changes"}]},{category:"Validation (EVT/DVP&R)",permissions:[{key:"view_validation",label:"View Validation",description:"View validation reports"},{key:"edit_validation",label:"Edit Validation",description:"Create and modify reports"},{key:"approve_validation",label:"Approve Validation",description:"Approve validation reports"}]},{category:"System & Administration",permissions:[{key:"sign_electronically",label:"Electronic Signatures",description:"21 CFR Part 11 e-signatures"},{key:"view_audit_trail",label:"View Audit Trail",description:"Access system audit logs"},{key:"manage_users",label:"Manage Users",description:"Create, edit, delete users"},{key:"manage_roles",label:"Manage Roles",description:"Edit role permissions"},{key:"system_settings",label:"System Settings",description:"Modify system configuration"},{key:"export_data",label:"Export Data",description:"Export compliance data"},{key:"import_data",label:"Import Data",description:"Import data into system"}]}],H=z.flatMap(w=>w.permissions.map(j=>j.key)),Ee={Admin:"Full system access. Can manage users, roles, and all system settings.","QA Manager":"Manages quality processes. Can approve CAPAs, change controls, and validation reports.",Engineer:"Creates and edits design records. Can modify CAPAs, NCRs, and change controls.",Auditor:"Read-only access to all quality records for audit purposes. Can export data.",Viewer:"Basic read-only access to quality data. Cannot modify any records.",Guest:"Minimal access. Dashboard view only.",Demo:"Demonstration account with broad edit access but no admin privileges."};function Le({isOpen:w,onClose:j,onSave:A,role:d,currentPermissions:f,userCount:r}){const[n,u]=g.useState([]);g.useEffect(()=>{u([...f])},[f,w]);const v=m=>{u(c=>c.includes(m)?c.filter(_=>_!==m):[...c,m])},C=m=>{const c=m.permissions.map(b=>b.key),_=c.every(b=>n.includes(b));u(_?b=>b.filter(p=>!c.includes(p)):b=>[...new Set([...b,...c])])},S=()=>{A(d,n),j()};if(!w)return null;const N=n.filter(m=>!f.includes(m)).length+f.filter(m=>!n.includes(m)).length;return e.jsx("div",{className:"modal-overlay",onClick:j,children:e.jsxs("div",{className:"modal-content max-w-4xl",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-surface-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(V,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-surface-900",children:["Edit Permissions: ",d]}),e.jsxs("p",{className:"text-sm text-surface-500",children:[Ee[d]," (",r," user",r!==1?"s":"",")"]})]})]}),e.jsx("button",{type:"button",onClick:j,className:"p-2 hover:bg-surface-100 rounded-lg transition-colors",children:e.jsx(J,{className:"w-5 h-5 text-surface-400"})})]}),e.jsxs("div",{className:"px-6 py-3 bg-surface-50 border-b border-surface-200 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-surface-600",children:[n.length," of ",H.length," permissions enabled",N>0&&e.jsxs("span",{className:"ml-2 text-primary-600 font-medium",children:["(",N," change",N!==1?"s":"",")"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>u([...H]),className:"text-xs text-primary-600 hover:text-primary-800 font-medium",children:"Grant All"}),e.jsx("button",{type:"button",onClick:()=>u([]),className:"text-xs text-red-600 hover:text-red-800 font-medium",children:"Revoke All"})]})]}),e.jsx("div",{className:"p-6 max-h-[55vh] overflow-y-auto space-y-3",children:z.map(m=>{const c=m.permissions.map(p=>p.key),_=c.every(p=>n.includes(p)),b=c.some(p=>n.includes(p));return e.jsxs("div",{className:"border border-surface-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-surface-50 cursor-pointer rounded-t-lg",onClick:()=>C(m),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:_,ref:p=>{p&&(p.indeterminate=b&&!_)},onChange:()=>C(m),className:"w-4 h-4 text-primary-600 border-surface-300 rounded focus:ring-primary-500"}),e.jsx("span",{className:"font-medium text-surface-900",children:m.category})]}),e.jsxs("span",{className:"text-xs text-surface-500",children:[c.filter(p=>n.includes(p)).length,"/",c.length]})]}),e.jsx("div",{className:"divide-y divide-surface-100",children:m.permissions.map(p=>{const k=n.includes(p.key),D=k!==f.includes(p.key);return e.jsxs("label",{className:`flex items-center justify-between px-4 py-2.5 cursor-pointer hover:bg-surface-50 transition-colors ${D?"bg-yellow-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:k,onChange:()=>v(p.key),className:"w-4 h-4 text-primary-600 border-surface-300 rounded focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-surface-900",children:p.label}),e.jsx("p",{className:"text-xs text-surface-500",children:p.description})]})]}),k&&e.jsx(fe,{className:"w-4 h-4 text-green-500"})]},p.key)})})]},m.category)})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-surface-200",children:[e.jsxs("p",{className:"text-xs text-surface-500",children:["Changes will apply to all ",r," user",r!==1?"s":""," with the ",d," role."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:j,className:"btn-secondary",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:S,className:"btn-primary",disabled:N===0,children:["Save Permissions ",N>0&&`(${N} changes)`]})]})]})]})})}const E={Admin:["view_dashboard","view_metrics","edit_metrics","view_risk","edit_risk","view_capa","edit_capa","approve_capa","view_ncr","edit_ncr","view_documents","edit_documents","delete_documents","share_documents","view_vigilance","edit_vigilance","view_suppliers","edit_suppliers","approve_suppliers","view_training","edit_training","verify_training","view_change_control","edit_change_control","approve_change_control","view_validation","edit_validation","approve_validation","sign_electronically","view_audit_trail","manage_users","manage_roles","system_settings","export_data","import_data"],"QA Manager":["view_dashboard","view_metrics","edit_metrics","view_risk","edit_risk","view_capa","edit_capa","approve_capa","view_ncr","edit_ncr","view_documents","edit_documents","share_documents","view_vigilance","edit_vigilance","view_suppliers","edit_suppliers","view_training","edit_training","verify_training","view_change_control","edit_change_control","approve_change_control","view_validation","edit_validation","approve_validation","sign_electronically","view_audit_trail","export_data"],Engineer:["view_dashboard","view_metrics","view_risk","view_capa","edit_capa","view_ncr","edit_ncr","view_documents","edit_documents","share_documents","view_vigilance","view_suppliers","view_training","view_change_control","edit_change_control","view_validation","edit_validation"],Auditor:["view_dashboard","view_metrics","view_risk","view_capa","view_ncr","view_documents","view_vigilance","view_suppliers","view_training","view_change_control","view_validation","view_audit_trail","export_data"],Viewer:["view_dashboard","view_metrics","view_risk","view_capa","view_ncr","view_documents","view_vigilance","view_suppliers","view_training","view_change_control","view_validation"],Guest:["view_dashboard"],Demo:["view_dashboard","view_metrics","edit_metrics","view_risk","edit_risk","view_capa","edit_capa","view_ncr","edit_ncr","view_documents","edit_documents","share_documents","view_vigilance","edit_vigilance","view_suppliers","edit_suppliers","view_training","edit_training","view_change_control","edit_change_control","view_validation","edit_validation","sign_electronically","view_audit_trail","export_data"]},Te=()=>{const[w,j]=g.useState("overview"),[A,d]=g.useState(""),[f,r]=g.useState("All"),[n,u]=g.useState([{id:"user-001",username:"admin",email:"admin@medtech.com",fullName:"System Administrator",role:"Admin",permissions:E.Admin,department:"IT & Quality Systems",title:"Quality Systems Administrator",status:"Active",lastLogin:new Date(Date.now()-3600*1e3),createdAt:new Date("2024-01-01"),updatedAt:new Date,passwordLastChanged:new Date("2024-01-01"),mustChangePassword:!1,mfaEnabled:!0,failedLoginAttempts:0},{id:"user-002",username:"qa_manager",email:"qa.manager@medtech.com",fullName:"Sarah Johnson",role:"QA Manager",permissions:E["QA Manager"],department:"Quality Assurance",title:"QA Manager",status:"Active",lastLogin:new Date(Date.now()-10800*1e3),createdAt:new Date("2024-01-15"),updatedAt:new Date,passwordLastChanged:new Date("2024-01-15"),mustChangePassword:!1,mfaEnabled:!0,failedLoginAttempts:0},{id:"user-003",username:"engineer",email:"engineer@medtech.com",fullName:"Michael Chen",role:"Engineer",permissions:E.Engineer,department:"Engineering",title:"Senior Design Engineer",status:"Active",lastLogin:new Date(Date.now()-720*60*1e3),createdAt:new Date("2024-02-01"),updatedAt:new Date,passwordLastChanged:new Date("2024-02-01"),mustChangePassword:!1,mfaEnabled:!1,failedLoginAttempts:0},{id:"user-004",username:"auditor",email:"auditor@medtech.com",fullName:"Lisa Anderson",role:"Auditor",permissions:E.Auditor,department:"Regulatory Affairs",title:"Internal Auditor",status:"Active",lastLogin:new Date(Date.now()-480*60*1e3),createdAt:new Date("2024-02-15"),updatedAt:new Date,passwordLastChanged:new Date("2024-02-15"),mustChangePassword:!1,mfaEnabled:!0,failedLoginAttempts:0},{id:"user-023",username:"jdoe",email:"john.doe@medtech.com",fullName:"John Doe",role:"Viewer",permissions:E.Viewer,department:"Operations",title:"Production Operator",status:"Locked",lastLogin:new Date(Date.now()-1440*60*1e3),createdAt:new Date("2025-08-15"),updatedAt:new Date,passwordLastChanged:new Date("2025-08-15"),mustChangePassword:!0,mfaEnabled:!1,failedLoginAttempts:5,accountLockedUntil:new Date(Date.now()+1800*1e3)}]),[v,C]=g.useState([{id:"alert-001",severity:"Medium",type:"Failed Login",description:"5 failed login attempts from user: jdoe",userId:"user-023",ipAddress:"192.168.1.105",timestamp:new Date(Date.now()-7200*1e3),acknowledged:!1},{id:"alert-002",severity:"Low",type:"Data Export",description:"Large data export performed by qa_manager",userId:"user-002",timestamp:new Date(Date.now()-300*60*1e3),acknowledged:!0,acknowledgedBy:"admin",acknowledgedAt:new Date(Date.now()-14400*1e3)}]),[S,N]=g.useState({...E}),[m,c]=g.useState(!1),[_,b]=g.useState(null),[p,k]=g.useState(!1),[D,M]=g.useState(null),[P,t]=g.useState(null),[i,y]=g.useState(null),x={totalUsers:n.length,activeUsers:n.filter(s=>s.status==="Active").length,lockedAccounts:n.filter(s=>s.status==="Locked").length,pendingApprovals:n.filter(s=>s.status==="Pending").length,systemHealth:"Healthy",storageUsed:245.8,storageLimit:1024},h=n.filter(s=>{const l=s.fullName.toLowerCase().includes(A.toLowerCase())||s.email.toLowerCase().includes(A.toLowerCase())||s.username.toLowerCase().includes(A.toLowerCase()),a=f==="All"||s.role===f;return l&&a}),K=()=>{b(null),c(!0)},X=s=>{b(s),c(!0),y(null)},W=s=>{u(l=>l.find(o=>o.id===s.id)?l.map(o=>o.id===s.id?s:o):[...l,s])},Y=s=>{u(l=>l.filter(a=>a.id!==s)),t(null),y(null)},Z=s=>{u(l=>l.map(a=>a.id!==s?a:a.status==="Active"?{...a,status:"Inactive",updatedAt:new Date}:{...a,status:"Active",updatedAt:new Date})),y(null)},ee=s=>{u(l=>l.map(a=>a.id!==s?a:{...a,status:"Active",failedLoginAttempts:0,accountLockedUntil:void 0,updatedAt:new Date})),y(null)},se=s=>{u(l=>l.map(a=>a.id!==s?a:{...a,mustChangePassword:!0,passwordLastChanged:new Date,updatedAt:new Date})),y(null)},te=s=>{u(l=>l.map(a=>a.id!==s?a:{...a,mfaEnabled:!a.mfaEnabled,updatedAt:new Date})),y(null)},ae=s=>{C(l=>l.map(a=>a.id!==s?a:{...a,acknowledged:!0,acknowledgedBy:"admin",acknowledgedAt:new Date}))},ie=s=>{M(s),k(!0)},re=(s,l)=>{N(a=>({...a,[s]:l})),u(a=>a.map(o=>o.role!==s?o:{...o,permissions:l,updatedAt:new Date}))},ne=()=>{const s={exportedAt:new Date().toISOString(),users:n.map(({permissions:Pe,...oe})=>oe),securityAlerts:v,rolePermissions:S},l=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),a=URL.createObjectURL(l),o=document.createElement("a");o.href=a,o.download=`audit-trail-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},le=()=>{const s={users:n,securityAlerts:v,rolePermissions:S,timestamp:new Date().toISOString()},l=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),a=URL.createObjectURL(l),o=document.createElement("a");o.href=a,o.download=`system-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},ce=s=>{switch(s){case"Active":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[e.jsx(R,{className:"w-3 h-3"})," Active"]});case"Inactive":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium",children:[e.jsx(G,{className:"w-3 h-3"})," Inactive"]});case"Locked":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:[e.jsx(U,{className:"w-3 h-3"})," Locked"]});case"Pending":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium",children:[e.jsx(G,{className:"w-3 h-3"})," Pending"]})}},de=s=>{switch(s){case"Critical":return"bg-red-100 text-red-700 border-red-300";case"High":return"bg-orange-100 text-orange-700 border-orange-300";case"Medium":return"bg-yellow-100 text-yellow-700 border-yellow-300";case"Low":return"bg-blue-100 text-blue-700 border-blue-300"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-surface-900",children:"Administration Panel"}),e.jsx("p",{className:"text-surface-600 mt-1",children:"User Management & System Configuration"})]}),e.jsxs("button",{type:"button",onClick:K,className:"btn-primary flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"}),"Add User"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-surface-600",children:"Total Users"}),e.jsx("p",{className:"text-3xl font-bold text-surface-900 mt-1",children:x.totalUsers})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(O,{className:"w-6 h-6 text-primary-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-surface-600",children:"Active Users"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-1",children:x.activeUsers})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(R,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-surface-600",children:"Locked Accounts"}),e.jsx("p",{className:"text-3xl font-bold text-red-600 mt-1",children:x.lockedAccounts})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(U,{className:"w-6 h-6 text-red-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-surface-600",children:"System Health"}),e.jsx("p",{className:"text-lg font-bold text-green-600 mt-1",children:x.systemHealth})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(B,{className:"w-6 h-6 text-green-600"})})]})})]}),e.jsx("div",{className:"border-b border-surface-200",children:e.jsx("div",{className:"flex gap-6",children:[{id:"overview",label:"Overview",icon:B},{id:"users",label:"Users",icon:O},{id:"roles",label:"Roles & Permissions",icon:V},{id:"security",label:"Security Alerts",icon:$},{id:"system",label:"System Settings",icon:F}].map(s=>e.jsxs("button",{type:"button",onClick:()=>j(s.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${w===s.id?"border-primary-500 text-primary-600":"border-transparent text-surface-600 hover:text-surface-900"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label,s.id==="security"&&v.filter(l=>!l.acknowledged).length>0&&e.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded-full",children:v.filter(l=>!l.acknowledged).length})]},s.id))})}),w==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"AI Agents Status"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["Vigilance Watchman","Audit-Ready RAG","Risk Predictor"].map(s=>e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-green-900",children:s}),e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),e.jsx("p",{className:"text-sm text-green-700",children:"Running"})]},s))})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"Storage Usage"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-surface-600",children:[x.storageUsed," GB / ",x.storageLimit," GB"]}),e.jsxs("span",{className:"font-medium text-surface-900",children:[Math.round(x.storageUsed/x.storageLimit*100),"%"]})]}),e.jsx("div",{className:"h-3 bg-surface-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all",style:{width:`${x.storageUsed/x.storageLimit*100}%`}})})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"Users by Role"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:["Admin","QA Manager","Engineer","Auditor","Viewer"].map(s=>{const l=n.filter(a=>a.role===s).length;return e.jsxs("div",{className:"p-3 bg-surface-50 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-surface-900",children:l}),e.jsx("p",{className:"text-xs text-surface-600 mt-1",children:s})]},s)})})]})]}),w==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-surface-400"}),e.jsx("input",{type:"text",placeholder:"Search users by name, email, or username...",value:A,onChange:s=>d(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),e.jsxs("div",{className:"relative",children:[e.jsx(ye,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-surface-400"}),e.jsxs("select",{value:f,onChange:s=>r(s.target.value),className:"pl-10 pr-8 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"All",children:"All Roles"}),e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"QA Manager",children:"QA Manager"}),e.jsx("option",{value:"Engineer",children:"Engineer"}),e.jsx("option",{value:"Auditor",children:"Auditor"}),e.jsx("option",{value:"Viewer",children:"Viewer"})]})]})]})}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-surface-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-surface-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-surface-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-surface-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-surface-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-surface-500 uppercase tracking-wider",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-surface-500 uppercase tracking-wider",children:"MFA"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-surface-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-surface-200",children:[h.map(s=>e.jsxs("tr",{className:"hover:bg-surface-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-surface-900",children:s.fullName}),e.jsx("div",{className:"text-sm text-surface-500",children:s.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-xs font-medium",children:s.role})}),e.jsx("td",{className:"px-6 py-4 text-sm text-surface-600",children:s.department}),e.jsx("td",{className:"px-6 py-4",children:ce(s.status)}),e.jsx("td",{className:"px-6 py-4 text-sm text-surface-600",children:s.lastLogin?new Date(s.lastLogin).toLocaleString():"Never"}),e.jsx("td",{className:"px-6 py-4",children:s.mfaEnabled?e.jsx(R,{className:"w-5 h-5 text-green-600"}):e.jsx(Q,{className:"w-5 h-5 text-surface-300"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("button",{type:"button",onClick:()=>y(i===s.id?null:s.id),className:"p-1.5 rounded-lg hover:bg-surface-100 transition-colors",title:"User actions",children:e.jsx(be,{className:"w-5 h-5 text-surface-500"})}),i===s.id&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>y(null)}),e.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white rounded-lg shadow-lg border border-surface-200 z-20 py-1",children:[e.jsxs("button",{type:"button",onClick:()=>X(s),className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-surface-700 hover:bg-surface-50",children:[e.jsx(F,{className:"w-4 h-4"}),"Edit User"]}),e.jsxs("button",{type:"button",onClick:()=>se(s.id),className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-surface-700 hover:bg-surface-50",children:[e.jsx(je,{className:"w-4 h-4"}),"Reset Password"]}),e.jsxs("button",{type:"button",onClick:()=>te(s.id),className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-surface-700 hover:bg-surface-50",children:[e.jsx(V,{className:"w-4 h-4"}),s.mfaEnabled?"Disable MFA":"Enable MFA"]}),s.status==="Locked"?e.jsxs("button",{type:"button",onClick:()=>ee(s.id),className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-green-700 hover:bg-green-50",children:[e.jsx(Ne,{className:"w-4 h-4"}),"Unlock Account"]}):e.jsxs("button",{type:"button",onClick:()=>Z(s.id),className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-surface-700 hover:bg-surface-50",children:[s.status==="Active"?e.jsx(Q,{className:"w-4 h-4"}):e.jsx(R,{className:"w-4 h-4"}),s.status==="Active"?"Deactivate":"Activate"]}),e.jsx("div",{className:"border-t border-surface-200 my-1"}),e.jsxs("button",{type:"button",onClick:()=>{t(s.id),y(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[e.jsx(q,{className:"w-4 h-4"}),"Delete User"]})]})]})]})})]},s.id)),h.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-surface-500",children:"No users found matching your search criteria."})})]})]})})})]}),w==="security"&&e.jsxs("div",{className:"space-y-4",children:[v.length===0&&e.jsxs("div",{className:"card text-center py-8",children:[e.jsx(R,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"text-surface-600",children:"No security alerts."})]}),v.map(s=>e.jsx("div",{className:`card border-2 ${de(s.severity)}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx($,{className:`w-6 h-6 flex-shrink-0 mt-0.5 ${s.severity==="Critical"?"text-red-600":s.severity==="High"?"text-orange-600":s.severity==="Medium"?"text-yellow-600":"text-blue-600"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold",children:s.type}),e.jsx("span",{className:"text-xs px-2 py-0.5 bg-white rounded-full",children:s.severity}),s.acknowledged&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded-full",children:"Acknowledged"})]}),e.jsx("p",{className:"text-sm mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[s.ipAddress&&e.jsxs("span",{children:["IP: ",s.ipAddress]}),e.jsx("span",{children:new Date(s.timestamp).toLocaleString()}),s.acknowledgedBy&&e.jsxs("span",{children:["Acknowledged by ",s.acknowledgedBy," at ",new Date(s.acknowledgedAt).toLocaleString()]})]})]})]}),!s.acknowledged&&e.jsx("button",{type:"button",onClick:()=>ae(s.id),className:"btn-sm btn-primary",children:"Acknowledge"})]})},s.id))]}),w==="roles"&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"Role Definitions"}),e.jsx("p",{className:"text-surface-600 mb-6",children:"Manage role-based access control and permissions for each user role."}),e.jsx("div",{className:"space-y-4",children:["Admin","QA Manager","Engineer","Auditor","Viewer"].map(s=>{const l=n.filter(o=>o.role===s),a=S[s]||[];return e.jsxs("div",{className:"p-4 border border-surface-200 rounded-lg hover:border-primary-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"w-5 h-5 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-surface-900",children:s}),e.jsxs("p",{className:"text-sm text-surface-600",children:[l.length," user",l.length!==1?"s":""," Â· ",a.length," permissions"]})]})]}),e.jsx("button",{type:"button",onClick:()=>ie(s),className:"btn-sm btn-secondary",children:"Edit Permissions"})]}),l.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:l.map(o=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-surface-100 text-surface-700 rounded text-xs",children:[o.fullName,o.status==="Locked"&&e.jsx(U,{className:"w-3 h-3 text-red-500"})]},o.id))})]},s)})})]}),w==="system"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"System Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_e,{className:"w-5 h-5 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-surface-900",children:"AI Agents"}),e.jsx("p",{className:"text-sm text-surface-600",children:"Manage local AI model deployment"})]})]}),e.jsx("button",{type:"button",className:"btn-sm btn-primary",children:"Configure"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ke,{className:"w-5 h-5 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-surface-900",children:"Database Backup"}),e.jsx("p",{className:"text-sm text-surface-600",children:"Export system data as JSON backup"})]})]}),e.jsx("button",{type:"button",onClick:le,className:"btn-sm btn-secondary",children:"Backup Now"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{className:"w-5 h-5 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-surface-900",children:"Audit Trail Export"}),e.jsx("p",{className:"text-sm text-surface-600",children:"Export system audit logs for compliance"})]})]}),e.jsx("button",{type:"button",onClick:ne,className:"btn-sm btn-secondary",children:"Export"})]})]})]})}),P&&e.jsx("div",{className:"modal-overlay",onClick:()=>t(null),children:e.jsx("div",{className:"modal-content max-w-sm",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(q,{className:"w-6 h-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-2",children:"Delete User"}),e.jsxs("p",{className:"text-sm text-surface-600 mb-6",children:["Are you sure you want to delete ",e.jsx("strong",{children:n.find(s=>s.id===P)?.fullName}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{type:"button",onClick:()=>t(null),className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>Y(P),className:"btn-danger",children:"Delete"})]})]})})}),e.jsx(De,{isOpen:m,onClose:()=>{c(!1),b(null)},onSave:W,user:_}),D&&e.jsx(Le,{isOpen:p,onClose:()=>{k(!1),M(null)},onSave:re,role:D,currentPermissions:S[D]||[],userCount:n.filter(s=>s.role===D).length})]})};export{Te as AdminView,Te as default};
