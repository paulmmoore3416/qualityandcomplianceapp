import{a as r,j as e}from"./vendor-react-Coyc-9rJ.js";import{a as w,c as l,q as M}from"./index-BahTgtJs.js";import{X as F,A as N,Q as T,b as R,o as S,F as A,a9 as P,p as E,m as O,a1 as H,a3 as L,j as X}from"./vendor-icons-CczvD28u.js";import"./vendor-DW9sAQKa.js";import"./vendor-zustand-Bm6pua9f.js";import"./vendor-uuid-CtRu48qb.js";function U({onClose:c}){const[x,n]=r.useState("Customer"),[v,m]=r.useState("Minor"),[h,u]=r.useState(""),[p,g]=r.useState(""),[j,d]=r.useState(""),[o,f]=r.useState(""),[b,y]=r.useState(!1),[a,s]=r.useState(!1),[i,C]=r.useState(!1),I=()=>{console.log("Creating complaint:",{source:x,severity:v,title:h,description:p,productCode:j,lotNumber:o,patientInvolved:b,injuryReported:a,deathReported:i}),c()},D=i||a?"Critical":v,k=a||i||D==="Critical";return e.jsx("div",{className:"modal-overlay",onClick:c,children:e.jsxs("div",{className:"modal-content p-6 max-w-2xl",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Log New Complaint"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Per ISO 13485:8.2.2 - Complaint Handling"})]}),e.jsx("button",{onClick:c,className:"p-1 rounded-md hover:bg-surface-100 text-gray-500",children:e.jsx(F,{className:"w-5 h-5"})})]}),k&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-red-800",children:"Regulatory Reporting Required"})]}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"This complaint involves a serious incident. Per EU MDR Article 87 and FDA 21 CFR 803, you may be required to submit a regulatory report within 15-30 days."})]}),e.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source *"}),e.jsxs("select",{value:x,onChange:t=>n(t.target.value),className:"input",children:[e.jsx("option",{value:"Customer",children:"Customer"}),e.jsx("option",{value:"Healthcare Provider",children:"Healthcare Provider"}),e.jsx("option",{value:"Distributor",children:"Distributor"}),e.jsx("option",{value:"Internal",children:"Internal"}),e.jsx("option",{value:"Regulatory",children:"Regulatory Authority"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Severity *"}),e.jsxs("select",{value:D,onChange:t=>m(t.target.value),disabled:a||i,className:"input disabled:bg-gray-100",children:[e.jsx("option",{value:"Inquiry",children:"Inquiry"}),e.jsx("option",{value:"Minor",children:"Minor"}),e.jsx("option",{value:"Major",children:"Major"}),e.jsx("option",{value:"Critical",children:"Critical"})]}),(a||i)&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Auto-escalated due to safety event"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",value:h,onChange:t=>u(t.target.value),className:"input",placeholder:"Brief description of the complaint..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),e.jsx("textarea",{value:p,onChange:t=>g(t.target.value),rows:3,className:"input",placeholder:"Detailed description including who reported, what happened, when, and how..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Code *"}),e.jsx("input",{type:"text",value:j,onChange:t=>d(t.target.value),className:"input",placeholder:"MDV-XXXX"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lot Number"}),e.jsx("input",{type:"text",value:o,onChange:t=>f(t.target.value),className:"input",placeholder:"LOT-XXXX-XXXX"})]})]}),e.jsxs("div",{className:"bg-surface-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Safety Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:t=>y(t.target.checked),className:"w-4 h-4 rounded text-primary-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Patient was involved in the event"})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:t=>{s(t.target.checked),t.target.checked&&y(!0)},className:"w-4 h-4 rounded text-orange-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Injury was reported"})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:t=>{C(t.target.checked),t.target.checked&&(y(!0),s(!0))},className:"w-4 h-4 rounded text-red-600"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Death was reported"})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-surface-200",children:[e.jsx("button",{onClick:c,className:"btn-secondary flex-1",children:"Cancel"}),e.jsx("button",{onClick:I,disabled:!h||!p||!j,className:"btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Create & Flag for Regulatory":"Create Complaint"})]})]})})}const q=[{id:"1",referenceNumber:"CMP-2026-0042",source:"Healthcare Provider",severity:"Critical",title:"Device overheating during use",description:"Physician reported device became unusually hot during a procedure",productCode:"MDV-1000",lotNumber:"LOT-2026-0128",patientInvolved:!0,injuryReported:!1,deathReported:!1,status:"Under Investigation",receivedDate:new Date("2026-01-25"),investigationDueDate:new Date("2026-02-08"),linkedCAPAs:[],linkedAdverseEvents:[],linkedHazardIds:["H-04"],createdAt:new Date("2026-01-25"),auditTrail:[]},{id:"2",referenceNumber:"CMP-2026-0041",source:"Customer",severity:"Minor",title:"Packaging damaged on arrival",description:"Customer received product with dented outer packaging, inner sterile barrier intact",productCode:"MDV-2000",lotNumber:"LOT-2026-0115",patientInvolved:!1,injuryReported:!1,deathReported:!1,status:"Closed",receivedDate:new Date("2026-01-20"),linkedCAPAs:[],linkedAdverseEvents:[],linkedHazardIds:[],createdAt:new Date("2026-01-20"),closedAt:new Date("2026-01-22"),auditTrail:[]}],V=[{id:"1",authority:"FDA",reportType:"Initial",dueDate:new Date("2026-02-05"),status:"Pending Submission",daysRemaining:8},{id:"2",authority:"EMA",reportType:"Initial",dueDate:new Date("2026-02-10"),status:"Draft",daysRemaining:13}];function K(){const[c,x]=r.useState(!1),[n,v]=r.useState("complaints"),[m,h]=r.useState(""),[u,p]=r.useState("all"),[g,j]=r.useState(null),d=q,o=V,f=d.filter(s=>{const i=s.title.toLowerCase().includes(m.toLowerCase())||s.referenceNumber.toLowerCase().includes(m.toLowerCase()),C=u==="all"||s.severity===u;return i&&C}),b=s=>{switch(s){case"Critical":return"bg-red-100 text-red-700";case"Major":return"bg-orange-100 text-orange-700";case"Minor":return"bg-yellow-100 text-yellow-700";case"Inquiry":return"bg-blue-100 text-blue-700"}},y=s=>{switch(s){case"New":return"bg-purple-100 text-purple-700";case"Under Investigation":return"bg-blue-100 text-blue-700";case"Pending CAPA":return"bg-yellow-100 text-yellow-700";case"Pending Regulatory":return"bg-orange-100 text-orange-700";case"Closed":return"bg-green-100 text-green-700"}},a={totalComplaints:d.length,openComplaints:d.filter(s=>s.status!=="Closed").length,criticalOpen:d.filter(s=>s.severity==="Critical"&&s.status!=="Closed").length,pendingReports:o.filter(s=>s.status!=="Submitted").length,urgentReports:o.filter(s=>s.daysRemaining<=7).length};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Vigilance & Post-Market Surveillance"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Per ISO 13485:8.2.1, EU MDR Article 83-86, FDA 21 CFR 803"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"btn-primary gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),"New Complaint"]})]}),a.urgentReports>0&&e.jsxs("div",{className:"card bg-red-50 border-red-300",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(R,{className:"w-5 h-5 text-red-600 animate-pulse"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-red-900",children:"Urgent: Regulatory Reporting Deadlines"}),e.jsxs("p",{className:"text-sm text-red-700",children:[a.urgentReports," report(s) due within 7 days - Failure to report may result in regulatory action"]})]}),e.jsx("button",{className:"btn-danger btn-sm",children:"View Reports"})]}),e.jsx("div",{className:"mt-4 space-y-2",children:o.filter(s=>s.daysRemaining<=7).map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-red-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"w-5 h-5 text-red-500"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[s.authority," ",s.reportType," Report"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Due: ",w(s.dueDate)]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:l("text-lg font-bold",s.daysRemaining<=3?"text-red-600":"text-orange-600"),children:[s.daysRemaining," days"]}),e.jsx("button",{className:"btn-primary btn-sm",children:"Submit"})]})]},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Complaints"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalComplaints})]}),e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(A,{className:"w-5 h-5 text-primary-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This year"})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Open"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.openComplaints})]}),e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(P,{className:"w-5 h-5 text-blue-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Under investigation"})]}),e.jsxs("div",{className:l("card",a.criticalOpen>0&&"border-red-300 bg-red-50"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Critical"}),e.jsx("p",{className:l("text-2xl font-bold",a.criticalOpen>0?"text-red-600":"text-gray-900"),children:a.criticalOpen})]}),e.jsx("div",{className:l("w-10 h-10 rounded-full flex items-center justify-center",a.criticalOpen>0?"bg-red-100":"bg-gray-100"),children:e.jsx(N,{className:l("w-5 h-5",a.criticalOpen>0?"text-red-600":"text-gray-400")})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Requires immediate action"})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Pending Reports"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.pendingReports})]}),e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(S,{className:"w-5 h-5 text-orange-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Regulatory submissions"})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Complaint Rate"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0.8â€°"})]}),e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(E,{className:"w-5 h-5 text-green-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Per 1,000 units sold"})]})]}),e.jsx("div",{className:"flex gap-2 border-b border-surface-200 pb-2",children:[{id:"complaints",label:"Complaints",icon:A},{id:"adverse",label:"Adverse Events",icon:N},{id:"fsca",label:"Field Safety Actions",icon:R},{id:"pms",label:"PMS/PMCF",icon:P}].map(s=>{const i=s.icon;return e.jsxs("button",{onClick:()=>v(s.id),className:l("flex items-center gap-2 px-4 py-2 rounded-t-lg transition-colors",n===s.id?"bg-white border border-b-0 border-surface-200 text-primary-700 font-medium -mb-[1px]":"text-gray-600 hover:bg-surface-100"),children:[e.jsx(i,{className:"w-4 h-4"}),s.label]},s.id)})}),n==="complaints"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"card flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search complaints...",value:m,onChange:s=>h(s.target.value),className:"input pl-9"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-gray-400"}),["all","Critical","Major","Minor","Inquiry"].map(s=>e.jsx("button",{onClick:()=>p(s),className:l("px-3 py-1.5 text-sm rounded-md transition-colors",u===s?"bg-primary-100 text-primary-700 font-medium":"bg-surface-100 text-gray-600 hover:bg-surface-200"),children:s==="all"?"All":s},s))]})]}),e.jsx("div",{className:"space-y-3",children:f.map(s=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-start justify-between cursor-pointer",onClick:()=>j(g===s.id?null:s.id),children:[e.jsxs("div",{className:"flex items-start gap-3",children:[g===s.id?e.jsx(L,{className:"w-5 h-5 text-gray-400 mt-0.5"}):e.jsx(X,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-mono text-sm text-gray-500",children:s.referenceNumber}),e.jsx("span",{className:l("badge",b(s.severity)),children:s.severity}),e.jsx("span",{className:l("badge",y(s.status)),children:s.status}),s.patientInvolved&&e.jsx("span",{className:"badge bg-purple-100 text-purple-700",children:"Patient Involved"}),s.injuryReported&&e.jsx("span",{className:"badge bg-red-100 text-red-700",children:"Injury Reported"})]}),e.jsx("h4",{className:"font-medium text-gray-900 mt-2",children:s.title}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.description})]})]}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsxs("p",{className:"text-gray-500",children:["Received: ",w(s.receivedDate)]}),s.investigationDueDate&&s.status!=="Closed"&&e.jsxs("p",{className:l("font-medium",M(s.investigationDueDate)?"text-red-600":"text-gray-600"),children:["Due: ",w(s.investigationDueDate)]})]})]}),g===s.id&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-surface-200 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Product"}),e.jsx("p",{className:"font-medium",children:s.productCode})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Lot Number"}),e.jsx("p",{className:"font-medium",children:s.lotNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Source"}),e.jsx("p",{className:"font-medium",children:s.source})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Linked Hazards"}),e.jsx("p",{className:"font-medium text-primary-600",children:s.linkedHazardIds.length>0?s.linkedHazardIds.join(", "):"None identified"})]})]}),s.linkedHazardIds.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4 text-yellow-600"}),e.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:["Risk File Impact: Linked to Hazard ",s.linkedHazardIds.join(", ")]})]}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Per ISO 14971:10 - This complaint data should be evaluated against the design risk estimate"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn-secondary btn-sm",children:"Investigate"}),e.jsx("button",{className:"btn-secondary btn-sm",children:"Link to CAPA"}),e.jsx("button",{className:"btn-secondary btn-sm",children:"Create Adverse Event"}),s.severity==="Critical"&&e.jsx("button",{className:"btn-danger btn-sm",children:"Initiate Regulatory Report"})]})]})]},s.id))})]}),n==="adverse"&&e.jsxs("div",{className:"card text-center py-12",children:[e.jsx(N,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Adverse Event Reporting"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Track and report serious incidents per EU MDR Article 87 and FDA 21 CFR 803"}),e.jsx("button",{className:"btn-primary mt-4",children:"Create Adverse Event Report"})]}),n==="fsca"&&e.jsxs("div",{className:"card text-center py-12",children:[e.jsx(R,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Field Safety Corrective Actions"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Manage recalls, safety notices, and corrective actions"}),e.jsx("button",{className:"btn-primary mt-4",children:"Initiate FSCA"})]}),n==="pms"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Post-Market Clinical Follow-up (PMCF)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-surface-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Active PMCF Studies"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"2"})]}),e.jsxs("div",{className:"bg-surface-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Data Points Collected"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"1,245"})]}),e.jsxs("div",{className:"bg-surface-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Next Report Due"}),e.jsx("p",{className:"text-2xl font-bold text-primary-600",children:"Mar 2026"})]})]})]}),e.jsxs("div",{className:"card bg-primary-50 border-primary-200",children:[e.jsx("h4",{className:"font-semibold text-primary-900 mb-2",children:"EU MDR PMCF Requirements"}),e.jsx("p",{className:"text-sm text-primary-700",children:"Per EU MDR Annex XIV Part B, manufacturers must proactively collect and evaluate clinical data throughout the device lifecycle. The PMCF plan and report must demonstrate ongoing safety and benefit-risk acceptability."})]})]}),e.jsxs("div",{className:"card bg-primary-50 border-primary-200",children:[e.jsx("h4",{className:"font-semibold text-primary-900 mb-2",children:"Regulatory Framework"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-800",children:"ISO 13485:2016 - 8.2.1/8.2.2"}),e.jsx("p",{className:"text-primary-600",children:"Feedback & Complaint Handling"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-800",children:"EU MDR 2017/745 - Art. 83-86"}),e.jsx("p",{className:"text-primary-600",children:"Vigilance & Post-Market Surveillance"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-800",children:"FDA 21 CFR 803"}),e.jsx("p",{className:"text-primary-600",children:"Medical Device Reporting"})]})]})]}),c&&e.jsx(U,{onClose:()=>x(!1)})]})}export{K as default};
