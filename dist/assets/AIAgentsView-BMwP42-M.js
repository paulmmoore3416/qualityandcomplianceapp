import{a as i,j as e}from"./vendor-react-Coyc-9rJ.js";import{X as v,A as M,aC as V,a7 as B,h as P,S as Q,x as b,aD as z,aE as D,m as U,aF as W,aG as $,d as T,$ as E,aH as Y,o as K}from"./vendor-icons-CczvD28u.js";import"./vendor-DW9sAQKa.js";const Z=({agent:a,onClose:d,onSave:x})=>{const[n,l]=i.useState({}),[j,p]=i.useState(!1),[h,N]=i.useState(!1);i.useEffect(()=>{a?.configuration&&(l(a.configuration),p(!1))},[a]);const r=(t,f)=>{l(m=>({...m,[t]:f})),p(!0)},w=async()=>{if(a){N(!0);try{await x(a.id,n),p(!1),d()}catch(t){console.error("Failed to save settings:",t)}finally{N(!1)}}},C=()=>{a?.configuration&&(l(a.configuration),p(!1))};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-surface-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:[a.type==="Vigilance Watchman"&&e.jsx("span",{className:"text-primary-600 font-bold",children:"ðŸ‘ï¸"}),a.type==="Audit-Ready RAG"&&e.jsx("span",{className:"text-purple-600 font-bold",children:"ðŸ§ "}),a.type==="Risk Predictor"&&e.jsx("span",{className:"text-orange-600 font-bold",children:"ðŸ“ˆ"})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-surface-900",children:[a.name," Settings"]}),e.jsxs("p",{className:"text-sm text-surface-600",children:["Version ",a.version]})]})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-surface-100 rounded-lg transition-colors",children:e.jsx(v,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"General Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"Agent Status"}),e.jsxs("select",{value:n.enabled?"enabled":"disabled",onChange:t=>r("enabled",t.target.value==="enabled"),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"enabled",children:"Enabled"}),e.jsx("option",{value:"disabled",children:"Disabled"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"Auto Run"}),e.jsxs("select",{value:n.autoRun?"enabled":"disabled",onChange:t=>r("autoRun",t.target.value==="enabled"),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"enabled",children:"Enabled"}),e.jsx("option",{value:"disabled",children:"Disabled"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"Schedule (Cron Expression)"}),e.jsx("input",{type:"text",value:n.schedule||"",onChange:t=>r("schedule",t.target.value),placeholder:"0 */6 * * *",className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("p",{className:"text-xs text-surface-500",children:"Format: minute hour day month day-of-week"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"Max Concurrent Tasks"}),e.jsx("input",{type:"number",min:"1",max:"10",value:n.maxConcurrentTasks||1,onChange:t=>r("maxConcurrentTasks",parseInt(t.target.value)),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"Performance & Reliability"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"Timeout (seconds)"}),e.jsx("input",{type:"number",min:"10",max:"300",value:(n.timeout||6e4)/1e3,onChange:t=>r("timeout",parseInt(t.target.value)*1e3),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"Retry Attempts"}),e.jsx("input",{type:"number",min:"0",max:"5",value:n.retryAttempts||0,onChange:t=>r("retryAttempts",parseInt(t.target.value)),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"AI Model Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"Model Name"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("select",{value:n.modelName||"",onChange:t=>r("modelName",t.target.value),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:e.jsx("option",{value:"",children:"Select local model..."})}),e.jsx("button",{onClick:async()=>{try{const f=(await window.electronAPI.aiListModels()).map(g=>g.name).filter(Boolean),m=window.prompt(`Available models:
`+f.join(`
`)+`

Enter model name to select/pull:`);if(m&&(r("modelName",m),window.confirm('Pull model "'+m+'" now? (This may download several GB)'))){const y=await window.electronAPI.aiPullModel(m);y.success?alert("Model pulled successfully"):alert("Model pull failed: "+(y.message||"unknown"))}}catch{alert("Error listing models or interacting with Ollama.")}},className:"btn-ghost",children:"Pull"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"Temperature"}),e.jsx("input",{type:"number",min:"0",max:"2",step:"0.01",value:n.temperature||.7,onChange:t=>r("temperature",parseFloat(t.target.value)),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("p",{className:"text-xs text-surface-500",children:"Lower = more focused, Higher = more creative"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"Max Tokens"}),e.jsx("input",{type:"number",min:"100",max:"32768",value:n.maxTokens||4096,onChange:t=>r("maxTokens",parseInt(t.target.value)),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"Deployment Type"}),e.jsxs("select",{value:n.isLocalDeployment?"local":"cloud",onChange:t=>r("isLocalDeployment",t.target.value==="local"),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"local",children:"Local (Ollama/Ollamafile)"}),e.jsx("option",{value:"cloud",children:"Cloud API"})]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"API Endpoint / Base URL"}),e.jsx("input",{type:"url",value:n.endpoint||"",onChange:t=>r("endpoint",t.target.value),placeholder:"http://localhost:11434 or https://api.openai.com/v1",className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),a.type==="Vigilance Watchman"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"Vigilance Watchman Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"auto-cc",checked:n.autoGenerateChangeControl||!1,onChange:t=>r("autoGenerateChangeControl",t.target.checked),className:"w-4 h-4 text-primary-600 border-surface-300 rounded focus:ring-primary-500"}),e.jsx("label",{htmlFor:"auto-cc",className:"text-sm font-medium text-surface-700",children:"Auto-generate Change Control requests for critical hazards"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"Risk Threshold for Auto-CC"}),e.jsxs("select",{value:n.riskThreshold||"high",onChange:t=>r("riskThreshold",t.target.value),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"critical",children:"Critical Only"}),e.jsx("option",{value:"high",children:"High and Critical"}),e.jsx("option",{value:"medium",children:"Medium and Above"})]})]})]})]}),a.type==="Risk Predictor"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"Risk Predictor Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"Prediction Sensitivity"}),e.jsxs("select",{value:n.predictionSensitivity||"medium",onChange:t=>r("predictionSensitivity",t.target.value),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"low",children:"Low (Fewer false positives)"}),e.jsx("option",{value:"medium",children:"Medium (Balanced)"}),e.jsx("option",{value:"high",children:"High (Catch more issues)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"Lookback Period (hours)"}),e.jsx("input",{type:"number",min:"1",max:"168",value:n.lookbackHours||24,onChange:t=>r("lookbackHours",parseInt(t.target.value)),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),a.type==="Audit-Ready RAG"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"RAG System Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"Knowledge Base Path"}),e.jsx("input",{type:"text",value:n.knowledgeBasePath||"/documents",onChange:t=>r("knowledgeBasePath",t.target.value),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-surface-700",children:"Max Context Length"}),e.jsx("input",{type:"number",min:"1000",max:"10000",value:n.maxContextLength||4e3,onChange:t=>r("maxContextLength",parseInt(t.target.value)),className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"include-audit-trail",checked:n.includeAuditTrail||!0,onChange:t=>r("includeAuditTrail",t.target.checked),className:"w-4 h-4 text-primary-600 border-surface-300 rounded focus:ring-primary-500"}),e.jsx("label",{htmlFor:"include-audit-trail",className:"text-sm font-medium text-surface-700",children:"Include audit trail references in responses"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"System Prompt"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:n.systemPrompt||"",onChange:t=>r("systemPrompt",t.target.value),rows:6,className:"w-full px-3 py-2 border border-surface-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 font-mono text-sm",placeholder:"Enter the system prompt that defines the AI agent's behavior and role..."}),e.jsx("p",{className:"text-xs text-surface-500",children:"This prompt defines the AI agent's role, behavior, and response guidelines."})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-surface-200",children:[e.jsx("div",{className:"flex items-center gap-2",children:j&&e.jsxs("div",{className:"flex items-center gap-2 text-amber-600",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Unsaved changes"})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:C,disabled:!j,className:"btn-outline flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(V,{className:"w-4 h-4"}),"Reset"]}),e.jsx("button",{onClick:d,className:"btn-outline",children:"Cancel"}),e.jsxs("button",{onClick:w,disabled:!j||h,className:"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[h?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(B,{className:"w-4 h-4"}),h?"Saving...":"Save Settings"]})]})]})]})}):null};function J({open:a,onClose:d,title:x,response:n,loading:l}){return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:x}),e.jsx("p",{className:"text-sm text-gray-500",children:"AI Response"})]}),e.jsx("button",{onClick:d,className:"btn-ghost btn-sm p-2",children:e.jsx(v,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"p-4",children:l?e.jsx("div",{className:"text-center py-8",children:"Running..."}):e.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 bg-surface-50 p-4 rounded",children:n||"No response"})})]})}):null}const te=()=>{const[a,d]=i.useState(null),[x,n]=i.useState(""),[l,j]=i.useState(null),[p,h]=i.useState(null),[N,r]=i.useState(!1),[w,C]=i.useState(null),[t,f]=i.useState(!1),[m,g]=i.useState(void 0),[y,k]=i.useState(!1),[O,_]=i.useState("Please summarize recent vigilance tasks and list top 3 recommended actions."),u=[{id:"agent-001",name:"Vigilance Watchman",type:"Vigilance Watchman",status:"Running",version:"2.1.0",description:"Monitors incoming complaints/emails, extracts hazards, maps to ISO 14971 risk file, and auto-generates change control requests.",lastRun:new Date(Date.now()-900*1e3),nextScheduledRun:new Date(Date.now()+2700*1e3),totalExecutions:1247,successfulExecutions:1189,failedExecutions:58,averageExecutionTime:4.2,configuration:{enabled:!0,autoRun:!0,schedule:"*/15 * * * *",maxConcurrentTasks:5,timeout:3e4,retryAttempts:3,modelName:"llama3.1:70b",temperature:.1,maxTokens:4096,systemPrompt:"You are a medical device vigilance expert...",isLocalDeployment:!0,endpoint:"http://localhost:11434"},metrics:{tasksProcessed:1247,tasksQueued:3,tasksFailed:58,averageResponseTime:4200,hallucinationDetections:12,confidenceScores:[.92,.88,.95,.91,.89]}},{id:"agent-002",name:"Audit-Ready RAG",type:"Audit-Ready RAG",status:"Running",version:"1.8.0",description:"Retrieval-Augmented Generation system for ISO compliance queries. Ask questions about your quality system and get instant, citation-backed answers.",lastRun:new Date(Date.now()-300*1e3),totalExecutions:892,successfulExecutions:884,failedExecutions:8,averageExecutionTime:2.8,configuration:{enabled:!0,autoRun:!1,maxConcurrentTasks:10,timeout:15e3,retryAttempts:2,modelName:"mistral:7b",temperature:.2,maxTokens:2048,systemPrompt:"You are an ISO 13485 compliance expert...",isLocalDeployment:!0,endpoint:"http://localhost:11434"},metrics:{tasksProcessed:892,tasksQueued:0,tasksFailed:8,averageResponseTime:2800,hallucinationDetections:4,confidenceScores:[.94,.96,.93,.97,.95]}},{id:"agent-003",name:"Risk Predictor",type:"Risk Predictor",status:"Running",version:"2.0.3",description:"Analyzes key metric trends to predict quality escapes before NCRs occur. Monitors FPY, cycle time, and other KPIs for early warning detection.",lastRun:new Date(Date.now()-3600*1e3),nextScheduledRun:new Date(Date.now()+7200*1e3),totalExecutions:456,successfulExecutions:442,failedExecutions:14,averageExecutionTime:8.5,configuration:{enabled:!0,autoRun:!0,schedule:"0 */3 * * *",maxConcurrentTasks:2,timeout:6e4,retryAttempts:3,modelName:"llama3.1:70b",temperature:.15,maxTokens:8192,systemPrompt:"You are a manufacturing quality analytics expert...",isLocalDeployment:!0,endpoint:"http://localhost:11434"},metrics:{tasksProcessed:456,tasksQueued:0,tasksFailed:14,averageResponseTime:8500,hallucinationDetections:7,confidenceScores:[.89,.91,.88,.93,.9]}}],F=[{id:"task-001",status:"Completed",sourceType:"Email",sourceData:"Customer complaint: Catheter tip separated during procedure",extractedHazards:["Component separation","Procedure failure"],linkedRiskIds:["HAZARD-CS-012"],generatedChangeControlId:"CC-2026-018",confidence:.92,processingTime:3.8,warnings:[],createdAt:new Date(Date.now()-7200*1e3),completedAt:new Date(Date.now()-7200*1e3+3800)},{id:"task-002",status:"Completed",sourceType:"PDF",sourceData:"Complaint form: Device packaging integrity issue",extractedHazards:["Sterility compromise","Package breach"],linkedRiskIds:["HAZARD-PKG-004"],confidence:.88,processingTime:4.2,warnings:["Low confidence on hazard classification"],createdAt:new Date(Date.now()-300*60*1e3),completedAt:new Date(Date.now()-300*60*1e3+4200)}],A=[{id:"pred-001",predictionType:"Performance Decline",severity:"Medium",confidence:.87,affectedMetrics:["First Pass Yield","Cycle Time"],triggerData:[{metricId:"fpy",currentValue:94.2,threshold:95,trend:"declining"},{metricId:"cycle_time",currentValue:142,threshold:120,trend:"increasing"}],recommendedActions:["Investigate recent process changes","Review operator training records","Check equipment calibration status"],autoGeneratedChangeControl:!1,createdAt:new Date(Date.now()-10800*1e3)},{id:"pred-002",predictionType:"Threshold Breach",severity:"High",confidence:.93,affectedMetrics:["NCR Rate"],triggerData:[{metricId:"ncr_rate",currentValue:4.8,threshold:3,trend:"increasing"}],recommendedActions:["Initiate root cause analysis","Review recent supplier changes","Trigger change control CC-2026-019"],autoGeneratedChangeControl:!0,changeControlId:"CC-2026-019",createdAt:new Date(Date.now()-3600*1e3),acknowledgedBy:"Sarah Johnson",acknowledgedAt:new Date(Date.now()-2700*1e3)}],R=()=>{const s={id:`query-${Date.now()}`,query:x,userId:"user-001",response:"Based on your quality system records, all 412 batches manufactured in Q4 2025 have proper UDI-DI tags recorded in the production database. The UDI compliance rate is 100% for the period, meeting ISO 13485:2016 Clause 4.2.5 requirements for unique device identification.",sources:["/documents/production/batch-records-q4-2025.pdf","/database/udi-tracking/2025-q4.db","/procedures/SOP-UDI-001-Rev-C.pdf"],confidence:.96,isoReferences:[{standard:"ISO 13485:2016",clause:"4.2.5",description:"Control of Records"},{standard:"EU MDR 2017/745",clause:"Article 27",description:"UDI system"}],relatedDocuments:["DOC-001","DOC-045","SOP-UDI-001"],processingTime:2.4,timestamp:new Date};j(s)},S=s=>{switch(s){case"Vigilance Watchman":return e.jsx(T,{className:"w-8 h-8 text-primary-600"});case"Audit-Ready RAG":return e.jsx(D,{className:"w-8 h-8 text-purple-600"});case"Risk Predictor":return e.jsx(E,{className:"w-8 h-8 text-orange-600"})}},L=s=>{switch(s){case"Running":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Running"]});case"Idle":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm font-medium",children:[e.jsx(K,{className:"w-3 h-3"}),"Idle"]});case"Error":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium",children:[e.jsx(M,{className:"w-3 h-3"}),"Error"]});default:return null}},I=s=>{h(s),r(!0)},q=async(s,c)=>{console.log("Saving settings for agent:",s,c)},G=()=>{r(!1),h(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(J,{open:t,onClose:()=>f(!1),title:u.find(s=>s.type===a)?.name||"AI Agent",response:m,loading:y}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-surface-900",children:"AI Agents"}),e.jsx("p",{className:"text-surface-600 mt-1",children:"Local LLM-Powered Compliance Automation â€¢ Edge AI Deployment"})]}),e.jsxs("button",{onClick:()=>{u.length>0&&I(u[0])},className:"btn-primary flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Configure Agents"]})]}),e.jsx("div",{className:"card bg-gradient-to-r from-primary-50 to-purple-50 border-2 border-primary-200",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Q,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-2",children:"Edge AI Deployment - Air-Gapped Security"}),e.jsx("p",{className:"text-surface-700 mb-3",children:"All AI agents run locally using Ollama. Patient data and trade secrets never leave your facility's network. HIPAA compliant â€¢ 21 CFR Part 11 compatible â€¢ ISO 27001 aligned"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-surface-700",children:"Ollama v0.1.23"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-surface-700",children:"Local Endpoint: http://localhost:11434"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-surface-700",children:"Hallucination Detection: Active"})]})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:u.map(s=>e.jsxs("div",{className:"card hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>d(s.type),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[S(s.type),L(s.status)]}),e.jsx("h3",{className:"text-xl font-semibold text-surface-900 mb-2",children:s.name}),e.jsx("p",{className:"text-sm text-surface-600 mb-4 line-clamp-3",children:s.description}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-surface-600",children:"Success Rate"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[(s.successfulExecutions/s.totalExecutions*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-surface-600",children:"Avg Response Time"}),e.jsxs("span",{className:"font-semibold text-surface-900",children:[s.averageExecutionTime.toFixed(1),"s"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-surface-600",children:"Total Tasks"}),e.jsx("span",{className:"font-semibold text-surface-900",children:s.totalExecutions.toLocaleString()})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>d(s.type),className:"btn-sm btn-primary flex-1 flex items-center justify-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"View Details"]}),e.jsx("button",{onClick:()=>I(s),className:"btn-sm btn-outline",children:e.jsx(P,{className:"w-4 h-4"})})]})]},s.id))}),a&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[S(a),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-surface-900",children:u.find(s=>s.type===a)?.name}),e.jsx("p",{className:"text-surface-600",children:"Agent Details & Performance Metrics"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:async()=>{const s=u.find(H=>H.type===a);if(!s)return;(await window.electronAPI.aiAgentStatus(s.id))?.status!=="running"?(await window.electronAPI.aiStartAgent(s.id,6e4),alert("Agent start requested")):(await window.electronAPI.aiStopAgent(s.id),alert("Agent stop requested"))},className:"btn-sm btn-outline",children:"Start/Stop"}),e.jsx("button",{onClick:async()=>{const s=u.find(o=>o.type===a);if(!s)return;k(!0),f(!0),g(void 0);const c=`${s.configuration?.systemPrompt||""}

${O}`;try{const o=await window.electronAPI.aiRunPrompt({model:s.configuration?.modelName||"mock",prompt:c,temperature:s.configuration?.temperature||.2,maxTokens:s.configuration?.maxTokens||1024,timeoutMs:s.configuration?.timeout||15e3});g(o.output||o.error||JSON.stringify(o))}catch(o){g("Error running prompt: "+String(o))}finally{k(!1)}},className:"btn-sm btn-primary",children:"Run Test Prompt"}),e.jsx("button",{onClick:()=>d(null),className:"p-2 hover:bg-surface-100 rounded-lg transition-colors",children:e.jsx(v,{className:"w-5 h-5"})})]})]}),a==="Risk Predictor"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"Recent Predictions"}),e.jsx("div",{className:"space-y-3",children:A.map(s=>e.jsxs("div",{className:"p-4 bg-surface-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-surface-900",children:s.predictionType}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.severity==="High"?"bg-red-100 text-red-700":s.severity==="Medium"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:s.severity})]}),e.jsxs("p",{className:"text-sm text-surface-600 mb-2",children:["Affected: ",s.affectedMetrics.join(", ")]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-surface-500",children:[e.jsxs("span",{children:["Confidence: ",(s.confidence*100).toFixed(0),"%"]}),e.jsxs("span",{children:[s.recommendedActions.length," actions"]})]})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"Prediction Accuracy"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-surface-600",children:"Predictions Made"}),e.jsx("span",{className:"font-semibold text-surface-900",children:"456"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-surface-600",children:"Accuracy Rate"}),e.jsx("span",{className:"font-semibold text-green-600",children:"94.2%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-surface-600",children:"False Positives"}),e.jsx("span",{className:"font-semibold text-surface-900",children:"5.8%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-surface-600",children:"Issues Prevented"}),e.jsx("span",{className:"font-semibold text-green-600",children:"28"})]})]})]})]})}),a==="Audit-Ready RAG"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"Query History"}),e.jsx("div",{className:"space-y-3",children:l&&e.jsxs("div",{className:"p-4 bg-surface-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-surface-900 mb-2 font-medium",children:"Latest Query:"}),e.jsxs("p",{className:"text-sm text-surface-600 mb-2",children:['"',l.query,'"']}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-surface-500",children:[e.jsxs("span",{children:["Confidence: ",(l.confidence*100).toFixed(0),"%"]}),e.jsxs("span",{children:[l.processingTime.toFixed(1),"s"]})]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-4",children:"Knowledge Base Stats"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-surface-600",children:"Documents Indexed"}),e.jsx("span",{className:"font-semibold text-surface-900",children:"2,847"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-surface-600",children:"Queries Processed"}),e.jsx("span",{className:"font-semibold text-surface-900",children:"1,203"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-surface-600",children:"Avg Response Time"}),e.jsx("span",{className:"font-semibold text-surface-900",children:"2.4s"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-surface-600",children:"ISO References"}),e.jsx("span",{className:"font-semibold text-surface-900",children:"156"})]})]})]})]})})]}),e.jsxs("div",{className:"card bg-gradient-to-r from-purple-50 to-blue-50 border-2 border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(D,{className:"w-6 h-6 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-surface-900",children:"Audit-Ready RAG - Ask Your Quality System"})]}),e.jsx("p",{className:"text-sm text-surface-600 mb-4",children:"Ask questions about ISO compliance, batch records, validation status, or any quality system documentation."}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("input",{type:"text",placeholder:"e.g., Are we compliant with ISO 13485:2016 Clause 7.5.8?",value:x,onChange:s=>n(s.target.value),onKeyPress:s=>s.key==="Enter"&&R(),className:"flex-1 px-4 py-3 border border-purple-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),e.jsxs("button",{onClick:R,className:"btn-primary flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Query"]})]}),l&&e.jsx("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx(W,{className:"w-5 h-5 text-purple-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-surface-900 mb-3",children:l.response}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(b,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"font-medium text-surface-700",children:["Confidence: ",(l.confidence*100).toFixed(0),"%"]}),e.jsx("span",{className:"text-surface-500",children:"â€¢"}),e.jsxs("span",{className:"text-surface-600",children:[l.processingTime,"s processing time"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-surface-700 mb-1",children:"ISO References:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.isoReferences.map((s,c)=>e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:[s.standard," ",s.clause]},c))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-surface-700 mb-1",children:"Sources:"}),e.jsx("div",{className:"space-y-1",children:l.sources.map((s,c)=>e.jsxs("div",{className:"text-xs text-surface-600 flex items-center gap-2",children:[e.jsx($,{className:"w-3 h-3"}),s]},c))})]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(T,{className:"w-5 h-5 text-primary-600"}),e.jsx("h3",{className:"text-lg font-semibold text-surface-900",children:"Vigilance Watchman - Recent Tasks"})]}),e.jsx("div",{className:"space-y-3",children:F.map(s=>e.jsxs("div",{className:"p-3 bg-surface-50 rounded-lg border border-surface-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-semibold text-surface-700",children:s.sourceType}),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[e.jsx(b,{className:"w-3 h-3"}),s.status]})]}),e.jsx("p",{className:"text-sm text-surface-900 mb-2",children:s.sourceData}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:s.extractedHazards.map((c,o)=>e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs",children:c},o))}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-surface-600",children:[e.jsxs("span",{children:["Confidence: ",(s.confidence*100).toFixed(0),"%"]}),s.generatedChangeControlId&&e.jsxs("span",{className:"font-medium text-primary-600",children:["â†’ ",s.generatedChangeControlId]})]})]},s.id))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(E,{className:"w-5 h-5 text-orange-600"}),e.jsx("h3",{className:"text-lg font-semibold text-surface-900",children:"Risk Predictor - Recent Predictions"})]}),e.jsx("div",{className:"space-y-3",children:A.map(s=>e.jsxs("div",{className:`p-3 rounded-lg border-2 ${s.severity==="High"?"bg-red-50 border-red-300":s.severity==="Medium"?"bg-yellow-50 border-yellow-300":"bg-blue-50 border-blue-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-surface-900",children:s.predictionType}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${s.severity==="High"?"bg-red-100 text-red-700":s.severity==="Medium"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:s.severity})]}),e.jsx("div",{className:"space-y-1 mb-2",children:s.triggerData.map((c,o)=>e.jsxs("div",{className:"text-xs",children:[e.jsxs("span",{className:"font-medium",children:[c.metricId,":"]})," ",c.currentValue," (threshold: ",c.threshold,")"," ",e.jsxs("span",{className:c.trend==="increasing"?"text-red-600":"text-green-600",children:["â†‘ ",c.trend]})]},o))}),s.autoGeneratedChangeControl&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(Y,{className:"w-3 h-3 text-orange-600"}),e.jsxs("span",{className:"font-medium text-orange-600",children:["Auto-generated: ",s.changeControlId]})]})]},s.id))})]})]}),N&&e.jsx(Z,{agent:p,onClose:G,onSave:q})]})};export{te as AIAgentsView,te as default};
